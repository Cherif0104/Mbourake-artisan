const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/quotePdfGenerator-DOauOH2K.js","assets/jspdf.es.min-CK_8ImL9.js","assets/react-vendor-CxyJKQzD.js","assets/supabase-vendor-CSCOup90.js","assets/invoicePdfGenerator-BPAlzXJP.js"])))=>i.map(i=>d[i]);
import{r as th,a as ah,b as o,u as Ko,N as Yo,c as bt,d as Fn,e as Js,R as fi,L as sh,O as lh,f as nh,g as ot,B as rh}from"./react-vendor-CxyJKQzD.js";import{c as ih}from"./supabase-vendor-CSCOup90.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))d(h);new MutationObserver(h=>{for(const _ of h)if(_.type==="childList")for(const b of _.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&d(b)}).observe(document,{childList:!0,subtree:!0});function f(h){const _={};return h.integrity&&(_.integrity=h.integrity),h.referrerPolicy&&(_.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?_.credentials="include":h.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function d(h){if(h.ep)return;h.ep=!0;const _=f(h);fetch(h.href,_)}})();var qo={exports:{}},Un={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e0;function ch(){if(e0)return Un;e0=1;var i=Symbol.for("react.transitional.element"),u=Symbol.for("react.fragment");function f(d,h,_){var b=null;if(_!==void 0&&(b=""+_),h.key!==void 0&&(b=""+h.key),"key"in h){_={};for(var z in h)z!=="key"&&(_[z]=h[z])}else _=h;return h=_.ref,{$$typeof:i,type:d,key:b,ref:h!==void 0?h:null,props:_}}return Un.Fragment=u,Un.jsx=f,Un.jsxs=f,Un}var t0;function oh(){return t0||(t0=1,qo.exports=ch()),qo.exports}var t=oh(),Ro={exports:{}},Ln={},Uo={exports:{}},Lo={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0;function dh(){return a0||(a0=1,(function(i){function u(j,A){var B=j.length;j.push(A);e:for(;0<B;){var K=B-1>>>1,ge=j[K];if(0<h(ge,A))j[K]=A,j[B]=ge,B=K;else break e}}function f(j){return j.length===0?null:j[0]}function d(j){if(j.length===0)return null;var A=j[0],B=j.pop();if(B!==A){j[0]=B;e:for(var K=0,ge=j.length,de=ge>>>1;K<de;){var ce=2*(K+1)-1,re=j[ce],ve=ce+1,W=j[ve];if(0>h(re,B))ve<ge&&0>h(W,re)?(j[K]=W,j[ve]=B,K=ve):(j[K]=re,j[ce]=B,K=ce);else if(ve<ge&&0>h(W,B))j[K]=W,j[ve]=B,K=ve;else break e}}return A}function h(j,A){var B=j.sortIndex-A.sortIndex;return B!==0?B:j.id-A.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var _=performance;i.unstable_now=function(){return _.now()}}else{var b=Date,z=b.now();i.unstable_now=function(){return b.now()-z}}var p=[],m=[],y=1,g=null,v=3,N=!1,H=!1,ae=!1,Y=!1,X=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function Z(j){for(var A=f(m);A!==null;){if(A.callback===null)d(m);else if(A.startTime<=j)d(m),A.sortIndex=A.expirationTime,u(p,A);else break;A=f(m)}}function me(j){if(ae=!1,Z(j),!H)if(f(p)!==null)H=!0,oe||(oe=!0,Q());else{var A=f(m);A!==null&&O(me,A.startTime-j)}}var oe=!1,ue=-1,L=5,P=-1;function U(){return Y?!0:!(i.unstable_now()-P<L)}function F(){if(Y=!1,oe){var j=i.unstable_now();P=j;var A=!0;try{e:{H=!1,ae&&(ae=!1,se(ue),ue=-1),N=!0;var B=v;try{t:{for(Z(j),g=f(p);g!==null&&!(g.expirationTime>j&&U());){var K=g.callback;if(typeof K=="function"){g.callback=null,v=g.priorityLevel;var ge=K(g.expirationTime<=j);if(j=i.unstable_now(),typeof ge=="function"){g.callback=ge,Z(j),A=!0;break t}g===f(p)&&d(p),Z(j)}else d(p);g=f(p)}if(g!==null)A=!0;else{var de=f(m);de!==null&&O(me,de.startTime-j),A=!1}}break e}finally{g=null,v=B,N=!1}A=void 0}}finally{A?Q():oe=!1}}}var Q;if(typeof ie=="function")Q=function(){ie(F)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,S=T.port2;T.port1.onmessage=F,Q=function(){S.postMessage(null)}}else Q=function(){X(F,0)};function O(j,A){ue=X(function(){j(i.unstable_now())},A)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_next=function(j){switch(v){case 1:case 2:case 3:var A=3;break;default:A=v}var B=v;v=A;try{return j()}finally{v=B}},i.unstable_requestPaint=function(){Y=!0},i.unstable_runWithPriority=function(j,A){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var B=v;v=j;try{return A()}finally{v=B}},i.unstable_scheduleCallback=function(j,A,B){var K=i.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?K+B:K):B=K,j){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=B+ge,j={id:y++,callback:A,priorityLevel:j,startTime:B,expirationTime:ge,sortIndex:-1},B>K?(j.sortIndex=B,u(m,j),f(p)===null&&j===f(m)&&(ae?(se(ue),ue=-1):ae=!0,O(me,B-K))):(j.sortIndex=ge,u(p,j),H||N||(H=!0,oe||(oe=!0,Q()))),j},i.unstable_shouldYield=U,i.unstable_wrapCallback=function(j){var A=v;return function(){var B=v;v=A;try{return j.apply(this,arguments)}finally{v=B}}}})(Lo)),Lo}var s0;function uh(){return s0||(s0=1,Uo.exports=dh()),Uo.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l0;function xh(){if(l0)return Ln;l0=1;var i=uh(),u=th(),f=ah();function d(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _(e){var a=e,s=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(s=a.return),e=a.return;while(e)}return a.tag===3?s:null}function b(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function z(e){if(e.tag===31){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function p(e){if(_(e)!==e)throw Error(d(188))}function m(e){var a=e.alternate;if(!a){if(a=_(e),a===null)throw Error(d(188));return a!==e?null:e}for(var s=e,l=a;;){var n=s.return;if(n===null)break;var r=n.alternate;if(r===null){if(l=n.return,l!==null){s=l;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===s)return p(n),e;if(r===l)return p(n),a;r=r.sibling}throw Error(d(188))}if(s.return!==l.return)s=n,l=r;else{for(var c=!1,x=n.child;x;){if(x===s){c=!0,s=n,l=r;break}if(x===l){c=!0,l=n,s=r;break}x=x.sibling}if(!c){for(x=r.child;x;){if(x===s){c=!0,s=r,l=n;break}if(x===l){c=!0,l=r,s=n;break}x=x.sibling}if(!c)throw Error(d(189))}}if(s.alternate!==l)throw Error(d(190))}if(s.tag!==3)throw Error(d(188));return s.stateNode.current===s?e:a}function y(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=y(e),a!==null)return a;e=e.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),ae=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),se=Symbol.for("react.consumer"),ie=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function Q(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var T=Symbol.for("react.client.reference");function S(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===T?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ae:return"Fragment";case X:return"Profiler";case Y:return"StrictMode";case me:return"Suspense";case oe:return"SuspenseList";case P:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case H:return"Portal";case ie:return e.displayName||"Context";case se:return(e._context.displayName||"Context")+".Consumer";case Z:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ue:return a=e.displayName||null,a!==null?a:S(e.type)||"Memo";case L:a=e._payload,e=e._init;try{return S(e(a))}catch{}}return null}var O=Array.isArray,j=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,A=f.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B={pending:!1,data:null,method:null,action:null},K=[],ge=-1;function de(e){return{current:e}}function ce(e){0>ge||(e.current=K[ge],K[ge]=null,ge--)}function re(e,a){ge++,K[ge]=e.current,e.current=a}var ve=de(null),W=de(null),E=de(null),xe=de(null);function te(e,a){switch(re(E,a),re(W,e),re(ve,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?wm(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=wm(a),e=_m(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ce(ve),re(ve,e)}function he(){ce(ve),ce(W),ce(E)}function we(e){e.memoizedState!==null&&re(xe,e);var a=ve.current,s=_m(a,e.type);a!==s&&(re(W,e),re(ve,s))}function _e(e){W.current===e&&(ce(ve),ce(W)),xe.current===e&&(ce(xe),Tn._currentValue=B)}var Se,Ze;function Ce(e){if(Se===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);Se=a&&a[1]||"",Ze=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Se+e+Ze}var He=!1;function xt(e,a){if(!e||He)return"";He=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(G){var R=G}Reflect.construct(e,[],ee)}else{try{ee.call()}catch(G){R=G}e.call(ee.prototype)}}else{try{throw Error()}catch(G){R=G}(ee=e())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(G){if(G&&R&&typeof G.stack=="string")return[G.stack,R.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=l.DetermineComponentFrameRoot(),c=r[0],x=r[1];if(c&&x){var w=c.split(`
`),q=x.split(`
`);for(n=l=0;l<w.length&&!w[l].includes("DetermineComponentFrameRoot");)l++;for(;n<q.length&&!q[n].includes("DetermineComponentFrameRoot");)n++;if(l===w.length||n===q.length)for(l=w.length-1,n=q.length-1;1<=l&&0<=n&&w[l]!==q[n];)n--;for(;1<=l&&0<=n;l--,n--)if(w[l]!==q[n]){if(l!==1||n!==1)do if(l--,n--,0>n||w[l]!==q[n]){var $=`
`+w[l].replace(" at new "," at ");return e.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",e.displayName)),$}while(1<=l&&0<=n);break}}}finally{He=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Ce(s):""}function be(e,a){switch(e.tag){case 26:case 27:case 5:return Ce(e.type);case 16:return Ce("Lazy");case 13:return e.child!==a&&a!==null?Ce("Suspense Fallback"):Ce("Suspense");case 19:return Ce("SuspenseList");case 0:case 15:return xt(e.type,!1);case 11:return xt(e.type.render,!1);case 1:return xt(e.type,!0);case 31:return Ce("Activity");default:return""}}function Ke(e){try{var a="",s=null;do a+=be(e,s),s=e,e=e.return;while(e);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var V=Object.prototype.hasOwnProperty,fe=i.unstable_scheduleCallback,pe=i.unstable_cancelCallback,Ae=i.unstable_shouldYield,I=i.unstable_requestPaint,Ee=i.unstable_now,Qe=i.unstable_getCurrentPriorityLevel,Le=i.unstable_ImmediatePriority,De=i.unstable_UserBlockingPriority,Ye=i.unstable_NormalPriority,Ht=i.unstable_LowPriority,Dt=i.unstable_IdlePriority,kt=i.log,ea=i.unstable_setDisableYieldValue,qe=null,ke=null;function Me(e){if(typeof kt=="function"&&ea(e),ke&&typeof ke.setStrictMode=="function")try{ke.setStrictMode(qe,e)}catch{}}var Pe=Math.clz32?Math.clz32:le,mt=Math.log,oa=Math.LN2;function le(e){return e>>>=0,e===0?32:31-(mt(e)/oa|0)|0}var Te=256,Yt=262144,qt=4194304;function ja(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function zs(e,a,s){var l=e.pendingLanes;if(l===0)return 0;var n=0,r=e.suspendedLanes,c=e.pingedLanes;e=e.warmLanes;var x=l&134217727;return x!==0?(l=x&~r,l!==0?n=ja(l):(c&=x,c!==0?n=ja(c):s||(s=x&~e,s!==0&&(n=ja(s))))):(x=l&~r,x!==0?n=ja(x):c!==0?n=ja(c):s||(s=l&~e,s!==0&&(n=ja(s)))),n===0?0:a!==0&&a!==n&&(a&r)===0&&(r=n&-n,s=a&-a,r>=s||r===32&&(s&4194048)!==0)?a:n}function ks(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function Ws(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ld(){var e=qt;return qt<<=1,(qt&62914560)===0&&(qt=4194304),e}function vi(e){for(var a=[],s=0;31>s;s++)a.push(e);return a}function Yl(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function G0(e,a,s,l,n,r){var c=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var x=e.entanglements,w=e.expirationTimes,q=e.hiddenUpdates;for(s=c&~s;0<s;){var $=31-Pe(s),ee=1<<$;x[$]=0,w[$]=-1;var R=q[$];if(R!==null)for(q[$]=null,$=0;$<R.length;$++){var G=R[$];G!==null&&(G.lane&=-536870913)}s&=~ee}l!==0&&nd(e,l,0),r!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=r&~(c&~a))}function nd(e,a,s){e.pendingLanes|=a,e.suspendedLanes&=~a;var l=31-Pe(a);e.entangledLanes|=a,e.entanglements[l]=e.entanglements[l]|1073741824|s&261930}function rd(e,a){var s=e.entangledLanes|=a;for(e=e.entanglements;s;){var l=31-Pe(s),n=1<<l;n&a|e[l]&a&&(e[l]|=a),s&=~n}}function id(e,a){var s=a&-a;return s=(s&42)!==0?1:Ni(s),(s&(e.suspendedLanes|a))!==0?0:s}function Ni(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function wi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function cd(){var e=A.p;return e!==0?e:(e=window.event,e===void 0?32:Zm(e.type))}function od(e,a){var s=A.p;try{return A.p=e,a()}finally{A.p=s}}var Ia=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Ia,Xt="__reactProps$"+Ia,Is="__reactContainer$"+Ia,_i="__reactEvents$"+Ia,F0="__reactListeners$"+Ia,Q0="__reactHandles$"+Ia,dd="__reactResources$"+Ia,Xl="__reactMarker$"+Ia;function Si(e){delete e[Rt],delete e[Xt],delete e[_i],delete e[F0],delete e[Q0]}function el(e){var a=e[Rt];if(a)return a;for(var s=e.parentNode;s;){if(a=s[Is]||s[Rt]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(e=Mm(e);e!==null;){if(s=e[Rt])return s;e=Mm(e)}return a}e=s,s=e.parentNode}return null}function tl(e){if(e=e[Rt]||e[Is]){var a=e.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return e}return null}function Zl(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(d(33))}function al(e){var a=e[dd];return a||(a=e[dd]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ct(e){e[Xl]=!0}var ud=new Set,xd={};function Cs(e,a){sl(e,a),sl(e+"Capture",a)}function sl(e,a){for(xd[e]=a,e=0;e<a.length;e++)ud.add(a[e])}var Y0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),md={},fd={};function X0(e){return V.call(fd,e)?!0:V.call(md,e)?!1:Y0.test(e)?fd[e]=!0:(md[e]=!0,!1)}function Kn(e,a,s){if(X0(a))if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+s)}}function $n(e,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+s)}}function qa(e,a,s,l){if(l===null)e.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(a,s,""+l)}}function da(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function gd(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Z0(e,a,s){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,a);if(!e.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var n=l.get,r=l.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return n.call(this)},set:function(c){s=""+c,r.call(this,c)}}),Object.defineProperty(e,a,{enumerable:l.enumerable}),{getValue:function(){return s},setValue:function(c){s=""+c},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function zi(e){if(!e._valueTracker){var a=gd(e)?"checked":"value";e._valueTracker=Z0(e,a,""+e[a])}}function hd(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var s=a.getValue(),l="";return e&&(l=gd(e)?e.checked?"true":"false":e.value),e=l,e!==s?(a.setValue(e),!0):!1}function Jn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var K0=/[\n"\\]/g;function ua(e){return e.replace(K0,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function ki(e,a,s,l,n,r,c,x){e.name="",c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"?e.type=c:e.removeAttribute("type"),a!=null?c==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+da(a)):e.value!==""+da(a)&&(e.value=""+da(a)):c!=="submit"&&c!=="reset"||e.removeAttribute("value"),a!=null?Ci(e,c,da(a)):s!=null?Ci(e,c,da(s)):l!=null&&e.removeAttribute("value"),n==null&&r!=null&&(e.defaultChecked=!!r),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.name=""+da(x):e.removeAttribute("name")}function pd(e,a,s,l,n,r,c,x){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),a!=null||s!=null){if(!(r!=="submit"&&r!=="reset"||a!=null)){zi(e);return}s=s!=null?""+da(s):"",a=a!=null?""+da(a):s,x||a===e.value||(e.value=a),e.defaultValue=a}l=l??n,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=x?e.checked:!!l,e.defaultChecked=!!l,c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.name=c),zi(e)}function Ci(e,a,s){a==="number"&&Jn(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function ll(e,a,s,l){if(e=e.options,a){a={};for(var n=0;n<s.length;n++)a["$"+s[n]]=!0;for(s=0;s<e.length;s++)n=a.hasOwnProperty("$"+e[s].value),e[s].selected!==n&&(e[s].selected=n),n&&l&&(e[s].defaultSelected=!0)}else{for(s=""+da(s),a=null,n=0;n<e.length;n++){if(e[n].value===s){e[n].selected=!0,l&&(e[n].defaultSelected=!0);return}a!==null||e[n].disabled||(a=e[n])}a!==null&&(a.selected=!0)}}function bd(e,a,s){if(a!=null&&(a=""+da(a),a!==e.value&&(e.value=a),s==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=s!=null?""+da(s):""}function yd(e,a,s,l){if(a==null){if(l!=null){if(s!=null)throw Error(d(92));if(O(l)){if(1<l.length)throw Error(d(93));l=l[0]}s=l}s==null&&(s=""),a=s}s=da(a),e.defaultValue=s,l=e.textContent,l===s&&l!==""&&l!==null&&(e.value=l),zi(e)}function nl(e,a){if(a){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=a;return}}e.textContent=a}var $0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jd(e,a,s){var l=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":l?e.setProperty(a,s):typeof s!="number"||s===0||$0.has(a)?a==="float"?e.cssFloat=s:e[a]=(""+s).trim():e[a]=s+"px"}function vd(e,a,s){if(a!=null&&typeof a!="object")throw Error(d(62));if(e=e.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var n in a)l=a[n],a.hasOwnProperty(n)&&s[n]!==l&&jd(e,n,l)}else for(var r in a)a.hasOwnProperty(r)&&jd(e,r,a[r])}function Ei(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var J0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),P0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pn(e){return P0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ra(){}var Ai=null;function Mi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var rl=null,il=null;function Nd(e){var a=tl(e);if(a&&(e=a.stateNode)){var s=e[Xt]||null;e:switch(e=a.stateNode,a.type){case"input":if(ki(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+ua(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var l=s[a];if(l!==e&&l.form===e.form){var n=l[Xt]||null;if(!n)throw Error(d(90));ki(l,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(a=0;a<s.length;a++)l=s[a],l.form===e.form&&hd(l)}break e;case"textarea":bd(e,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&ll(e,!!s.multiple,a,!1)}}}var Ti=!1;function wd(e,a,s){if(Ti)return e(a,s);Ti=!0;try{var l=e(a);return l}finally{if(Ti=!1,(rl!==null||il!==null)&&(Or(),rl&&(a=rl,e=il,il=rl=null,Nd(a),e)))for(a=0;a<e.length;a++)Nd(e[a])}}function Kl(e,a){var s=e.stateNode;if(s===null)return null;var l=s[Xt]||null;if(l===null)return null;s=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(d(231,a,typeof s));return s}var Ua=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Di=!1;if(Ua)try{var $l={};Object.defineProperty($l,"passive",{get:function(){Di=!0}}),window.addEventListener("test",$l,$l),window.removeEventListener("test",$l,$l)}catch{Di=!1}var es=null,qi=null,Wn=null;function _d(){if(Wn)return Wn;var e,a=qi,s=a.length,l,n="value"in es?es.value:es.textContent,r=n.length;for(e=0;e<s&&a[e]===n[e];e++);var c=s-e;for(l=1;l<=c&&a[s-l]===n[r-l];l++);return Wn=n.slice(e,1<l?1-l:void 0)}function In(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function er(){return!0}function Sd(){return!1}function Zt(e){function a(s,l,n,r,c){this._reactName=s,this._targetInst=n,this.type=l,this.nativeEvent=r,this.target=c,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(s=e[x],this[x]=s?s(r):r[x]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?er:Sd,this.isPropagationStopped=Sd,this}return g(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=er)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=er)},persist:function(){},isPersistent:er}),a}var Es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tr=Zt(Es),Jl=g({},Es,{view:0,detail:0}),W0=Zt(Jl),Ri,Ui,Pl,ar=g({},Jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Pl&&(Pl&&e.type==="mousemove"?(Ri=e.screenX-Pl.screenX,Ui=e.screenY-Pl.screenY):Ui=Ri=0,Pl=e),Ri)},movementY:function(e){return"movementY"in e?e.movementY:Ui}}),zd=Zt(ar),I0=g({},ar,{dataTransfer:0}),ef=Zt(I0),tf=g({},Jl,{relatedTarget:0}),Li=Zt(tf),af=g({},Es,{animationName:0,elapsedTime:0,pseudoElement:0}),sf=Zt(af),lf=g({},Es,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),nf=Zt(lf),rf=g({},Es,{data:0}),kd=Zt(rf),cf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},of={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},df={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uf(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=df[e])?!!a[e]:!1}function Oi(){return uf}var xf=g({},Jl,{key:function(e){if(e.key){var a=cf[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=In(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?of[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oi,charCode:function(e){return e.type==="keypress"?In(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?In(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),mf=Zt(xf),ff=g({},ar,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cd=Zt(ff),gf=g({},Jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oi}),hf=Zt(gf),pf=g({},Es,{propertyName:0,elapsedTime:0,pseudoElement:0}),bf=Zt(pf),yf=g({},ar,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jf=Zt(yf),vf=g({},Es,{newState:0,oldState:0}),Nf=Zt(vf),wf=[9,13,27,32],Bi=Ua&&"CompositionEvent"in window,Wl=null;Ua&&"documentMode"in document&&(Wl=document.documentMode);var _f=Ua&&"TextEvent"in window&&!Wl,Ed=Ua&&(!Bi||Wl&&8<Wl&&11>=Wl),Ad=" ",Md=!1;function Td(e,a){switch(e){case"keyup":return wf.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cl=!1;function Sf(e,a){switch(e){case"compositionend":return Dd(a);case"keypress":return a.which!==32?null:(Md=!0,Ad);case"textInput":return e=a.data,e===Ad&&Md?null:e;default:return null}}function zf(e,a){if(cl)return e==="compositionend"||!Bi&&Td(e,a)?(e=_d(),Wn=qi=es=null,cl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ed&&a.locale!=="ko"?null:a.data;default:return null}}var kf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qd(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!kf[e.type]:a==="textarea"}function Rd(e,a,s,l){rl?il?il.push(l):il=[l]:rl=l,a=Yr(a,"onChange"),0<a.length&&(s=new tr("onChange","change",null,s,l),e.push({event:s,listeners:a}))}var Il=null,en=null;function Cf(e){pm(e,0)}function sr(e){var a=Zl(e);if(hd(a))return e}function Ud(e,a){if(e==="change")return a}var Ld=!1;if(Ua){var Vi;if(Ua){var Hi="oninput"in document;if(!Hi){var Od=document.createElement("div");Od.setAttribute("oninput","return;"),Hi=typeof Od.oninput=="function"}Vi=Hi}else Vi=!1;Ld=Vi&&(!document.documentMode||9<document.documentMode)}function Bd(){Il&&(Il.detachEvent("onpropertychange",Vd),en=Il=null)}function Vd(e){if(e.propertyName==="value"&&sr(en)){var a=[];Rd(a,en,e,Mi(e)),wd(Cf,a)}}function Ef(e,a,s){e==="focusin"?(Bd(),Il=a,en=s,Il.attachEvent("onpropertychange",Vd)):e==="focusout"&&Bd()}function Af(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sr(en)}function Mf(e,a){if(e==="click")return sr(a)}function Tf(e,a){if(e==="input"||e==="change")return sr(a)}function Df(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var ta=typeof Object.is=="function"?Object.is:Df;function tn(e,a){if(ta(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var s=Object.keys(e),l=Object.keys(a);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var n=s[l];if(!V.call(a,n)||!ta(e[n],a[n]))return!1}return!0}function Hd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gd(e,a){var s=Hd(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=a&&l>=a)return{node:s,offset:a-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Hd(s)}}function Fd(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?Fd(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function Qd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=Jn(e.document);a instanceof e.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)e=a.contentWindow;else break;a=Jn(e.document)}return a}function Gi(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var qf=Ua&&"documentMode"in document&&11>=document.documentMode,ol=null,Fi=null,an=null,Qi=!1;function Yd(e,a,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Qi||ol==null||ol!==Jn(l)||(l=ol,"selectionStart"in l&&Gi(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),an&&tn(an,l)||(an=l,l=Yr(Fi,"onSelect"),0<l.length&&(a=new tr("onSelect","select",null,a,s),e.push({event:a,listeners:l}),a.target=ol)))}function As(e,a){var s={};return s[e.toLowerCase()]=a.toLowerCase(),s["Webkit"+e]="webkit"+a,s["Moz"+e]="moz"+a,s}var dl={animationend:As("Animation","AnimationEnd"),animationiteration:As("Animation","AnimationIteration"),animationstart:As("Animation","AnimationStart"),transitionrun:As("Transition","TransitionRun"),transitionstart:As("Transition","TransitionStart"),transitioncancel:As("Transition","TransitionCancel"),transitionend:As("Transition","TransitionEnd")},Yi={},Xd={};Ua&&(Xd=document.createElement("div").style,"AnimationEvent"in window||(delete dl.animationend.animation,delete dl.animationiteration.animation,delete dl.animationstart.animation),"TransitionEvent"in window||delete dl.transitionend.transition);function Ms(e){if(Yi[e])return Yi[e];if(!dl[e])return e;var a=dl[e],s;for(s in a)if(a.hasOwnProperty(s)&&s in Xd)return Yi[e]=a[s];return e}var Zd=Ms("animationend"),Kd=Ms("animationiteration"),$d=Ms("animationstart"),Rf=Ms("transitionrun"),Uf=Ms("transitionstart"),Lf=Ms("transitioncancel"),Jd=Ms("transitionend"),Pd=new Map,Xi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xi.push("scrollEnd");function va(e,a){Pd.set(e,a),Cs(a,[e])}var lr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},xa=[],ul=0,Zi=0;function nr(){for(var e=ul,a=Zi=ul=0;a<e;){var s=xa[a];xa[a++]=null;var l=xa[a];xa[a++]=null;var n=xa[a];xa[a++]=null;var r=xa[a];if(xa[a++]=null,l!==null&&n!==null){var c=l.pending;c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n}r!==0&&Wd(s,n,r)}}function rr(e,a,s,l){xa[ul++]=e,xa[ul++]=a,xa[ul++]=s,xa[ul++]=l,Zi|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Ki(e,a,s,l){return rr(e,a,s,l),ir(e)}function Ts(e,a){return rr(e,null,null,a),ir(e)}function Wd(e,a,s){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s);for(var n=!1,r=e.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(n=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,n&&a!==null&&(n=31-Pe(s),e=r.hiddenUpdates,l=e[n],l===null?e[n]=[a]:l.push(a),a.lane=s|536870912),r):null}function ir(e){if(50<Sn)throw Sn=0,so=null,Error(d(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var xl={};function Of(e,a,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function aa(e,a,s,l){return new Of(e,a,s,l)}function $i(e){return e=e.prototype,!(!e||!e.isReactComponent)}function La(e,a){var s=e.alternate;return s===null?(s=aa(e.tag,a,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=a,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,a=e.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Id(e,a){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,a=s.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function cr(e,a,s,l,n,r){var c=0;if(l=e,typeof e=="function")$i(e)&&(c=1);else if(typeof e=="string")c=Fg(e,s,ve.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case P:return e=aa(31,s,a,n),e.elementType=P,e.lanes=r,e;case ae:return Ds(s.children,n,r,a);case Y:c=8,n|=24;break;case X:return e=aa(12,s,a,n|2),e.elementType=X,e.lanes=r,e;case me:return e=aa(13,s,a,n),e.elementType=me,e.lanes=r,e;case oe:return e=aa(19,s,a,n),e.elementType=oe,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ie:c=10;break e;case se:c=9;break e;case Z:c=11;break e;case ue:c=14;break e;case L:c=16,l=null;break e}c=29,s=Error(d(130,e===null?"null":typeof e,"")),l=null}return a=aa(c,s,a,n),a.elementType=e,a.type=l,a.lanes=r,a}function Ds(e,a,s,l){return e=aa(7,e,l,a),e.lanes=s,e}function Ji(e,a,s){return e=aa(6,e,null,a),e.lanes=s,e}function eu(e){var a=aa(18,null,null,0);return a.stateNode=e,a}function Pi(e,a,s){return a=aa(4,e.children!==null?e.children:[],e.key,a),a.lanes=s,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var tu=new WeakMap;function ma(e,a){if(typeof e=="object"&&e!==null){var s=tu.get(e);return s!==void 0?s:(a={value:e,source:a,stack:Ke(a)},tu.set(e,a),a)}return{value:e,source:a,stack:Ke(a)}}var ml=[],fl=0,or=null,sn=0,fa=[],ga=0,ts=null,za=1,ka="";function Oa(e,a){ml[fl++]=sn,ml[fl++]=or,or=e,sn=a}function au(e,a,s){fa[ga++]=za,fa[ga++]=ka,fa[ga++]=ts,ts=e;var l=za;e=ka;var n=32-Pe(l)-1;l&=~(1<<n),s+=1;var r=32-Pe(a)+n;if(30<r){var c=n-n%5;r=(l&(1<<c)-1).toString(32),l>>=c,n-=c,za=1<<32-Pe(a)+n|s<<n|l,ka=r+e}else za=1<<r|s<<n|l,ka=e}function Wi(e){e.return!==null&&(Oa(e,1),au(e,1,0))}function Ii(e){for(;e===or;)or=ml[--fl],ml[fl]=null,sn=ml[--fl],ml[fl]=null;for(;e===ts;)ts=fa[--ga],fa[ga]=null,ka=fa[--ga],fa[ga]=null,za=fa[--ga],fa[ga]=null}function su(e,a){fa[ga++]=za,fa[ga++]=ka,fa[ga++]=ts,za=a.id,ka=a.overflow,ts=e}var Ut=null,it=null,Xe=!1,as=null,ha=!1,ec=Error(d(519));function ss(e){var a=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ln(ma(a,e)),ec}function lu(e){var a=e.stateNode,s=e.type,l=e.memoizedProps;switch(a[Rt]=e,a[Xt]=l,s){case"dialog":Ve("cancel",a),Ve("close",a);break;case"iframe":case"object":case"embed":Ve("load",a);break;case"video":case"audio":for(s=0;s<kn.length;s++)Ve(kn[s],a);break;case"source":Ve("error",a);break;case"img":case"image":case"link":Ve("error",a),Ve("load",a);break;case"details":Ve("toggle",a);break;case"input":Ve("invalid",a),pd(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ve("invalid",a);break;case"textarea":Ve("invalid",a),yd(a,l.value,l.defaultValue,l.children)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||l.suppressHydrationWarning===!0||vm(a.textContent,s)?(l.popover!=null&&(Ve("beforetoggle",a),Ve("toggle",a)),l.onScroll!=null&&Ve("scroll",a),l.onScrollEnd!=null&&Ve("scrollend",a),l.onClick!=null&&(a.onclick=Ra),a=!0):a=!1,a||ss(e,!0)}function nu(e){for(Ut=e.return;Ut;)switch(Ut.tag){case 5:case 31:case 13:ha=!1;return;case 27:case 3:ha=!0;return;default:Ut=Ut.return}}function gl(e){if(e!==Ut)return!1;if(!Xe)return nu(e),Xe=!0,!1;var a=e.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||yo(e.type,e.memoizedProps)),s=!s),s&&it&&ss(e),nu(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));it=Am(e)}else if(a===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));it=Am(e)}else a===27?(a=it,ps(e.type)?(e=_o,_o=null,it=e):it=a):it=Ut?ba(e.stateNode.nextSibling):null;return!0}function qs(){it=Ut=null,Xe=!1}function tc(){var e=as;return e!==null&&(Pt===null?Pt=e:Pt.push.apply(Pt,e),as=null),e}function ln(e){as===null?as=[e]:as.push(e)}var ac=de(null),Rs=null,Ba=null;function ls(e,a,s){re(ac,a._currentValue),a._currentValue=s}function Va(e){e._currentValue=ac.current,ce(ac)}function sc(e,a,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),e===s)break;e=e.return}}function lc(e,a,s,l){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var r=n.dependencies;if(r!==null){var c=n.child;r=r.firstContext;e:for(;r!==null;){var x=r;r=n;for(var w=0;w<a.length;w++)if(x.context===a[w]){r.lanes|=s,x=r.alternate,x!==null&&(x.lanes|=s),sc(r.return,s,e),l||(c=null);break e}r=x.next}}else if(n.tag===18){if(c=n.return,c===null)throw Error(d(341));c.lanes|=s,r=c.alternate,r!==null&&(r.lanes|=s),sc(c,s,e),c=null}else c=n.child;if(c!==null)c.return=n;else for(c=n;c!==null;){if(c===e){c=null;break}if(n=c.sibling,n!==null){n.return=c.return,c=n;break}c=c.return}n=c}}function hl(e,a,s,l){e=null;for(var n=a,r=!1;n!==null;){if(!r){if((n.flags&524288)!==0)r=!0;else if((n.flags&262144)!==0)break}if(n.tag===10){var c=n.alternate;if(c===null)throw Error(d(387));if(c=c.memoizedProps,c!==null){var x=n.type;ta(n.pendingProps.value,c.value)||(e!==null?e.push(x):e=[x])}}else if(n===xe.current){if(c=n.alternate,c===null)throw Error(d(387));c.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(Tn):e=[Tn])}n=n.return}e!==null&&lc(a,e,s,l),a.flags|=262144}function dr(e){for(e=e.firstContext;e!==null;){if(!ta(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Us(e){Rs=e,Ba=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Lt(e){return ru(Rs,e)}function ur(e,a){return Rs===null&&Us(e),ru(e,a)}function ru(e,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},Ba===null){if(e===null)throw Error(d(308));Ba=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else Ba=Ba.next=a;return s}var Bf=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(s,l){e.push(l)}};this.abort=function(){a.aborted=!0,e.forEach(function(s){return s()})}},Vf=i.unstable_scheduleCallback,Hf=i.unstable_NormalPriority,yt={$$typeof:ie,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nc(){return{controller:new Bf,data:new Map,refCount:0}}function nn(e){e.refCount--,e.refCount===0&&Vf(Hf,function(){e.controller.abort()})}var rn=null,rc=0,pl=0,bl=null;function Gf(e,a){if(rn===null){var s=rn=[];rc=0,pl=oo(),bl={status:"pending",value:void 0,then:function(l){s.push(l)}}}return rc++,a.then(iu,iu),a}function iu(){if(--rc===0&&rn!==null){bl!==null&&(bl.status="fulfilled");var e=rn;rn=null,pl=0,bl=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function Ff(e,a){var s=[],l={status:"pending",value:null,reason:null,then:function(n){s.push(n)}};return e.then(function(){l.status="fulfilled",l.value=a;for(var n=0;n<s.length;n++)(0,s[n])(a)},function(n){for(l.status="rejected",l.reason=n,n=0;n<s.length;n++)(0,s[n])(void 0)}),l}var cu=j.S;j.S=function(e,a){Yx=Ee(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Gf(e,a),cu!==null&&cu(e,a)};var Ls=de(null);function ic(){var e=Ls.current;return e!==null?e:rt.pooledCache}function xr(e,a){a===null?re(Ls,Ls.current):re(Ls,a.pool)}function ou(){var e=ic();return e===null?null:{parent:yt._currentValue,pool:e}}var yl=Error(d(460)),cc=Error(d(474)),mr=Error(d(542)),fr={then:function(){}};function du(e){return e=e.status,e==="fulfilled"||e==="rejected"}function uu(e,a,s){switch(s=e[s],s===void 0?e.push(a):s!==a&&(a.then(Ra,Ra),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,mu(e),e;default:if(typeof a.status=="string")a.then(Ra,Ra);else{if(e=rt,e!==null&&100<e.shellSuspendCounter)throw Error(d(482));e=a,e.status="pending",e.then(function(l){if(a.status==="pending"){var n=a;n.status="fulfilled",n.value=l}},function(l){if(a.status==="pending"){var n=a;n.status="rejected",n.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,mu(e),e}throw Bs=a,yl}}function Os(e){try{var a=e._init;return a(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Bs=s,yl):s}}var Bs=null;function xu(){if(Bs===null)throw Error(d(459));var e=Bs;return Bs=null,e}function mu(e){if(e===yl||e===mr)throw Error(d(483))}var jl=null,cn=0;function gr(e){var a=cn;return cn+=1,jl===null&&(jl=[]),uu(jl,e,a)}function on(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function hr(e,a){throw a.$$typeof===v?Error(d(525)):(e=Object.prototype.toString.call(a),Error(d(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function fu(e){function a(M,C){if(e){var D=M.deletions;D===null?(M.deletions=[C],M.flags|=16):D.push(C)}}function s(M,C){if(!e)return null;for(;C!==null;)a(M,C),C=C.sibling;return null}function l(M){for(var C=new Map;M!==null;)M.key!==null?C.set(M.key,M):C.set(M.index,M),M=M.sibling;return C}function n(M,C){return M=La(M,C),M.index=0,M.sibling=null,M}function r(M,C,D){return M.index=D,e?(D=M.alternate,D!==null?(D=D.index,D<C?(M.flags|=67108866,C):D):(M.flags|=67108866,C)):(M.flags|=1048576,C)}function c(M){return e&&M.alternate===null&&(M.flags|=67108866),M}function x(M,C,D,J){return C===null||C.tag!==6?(C=Ji(D,M.mode,J),C.return=M,C):(C=n(C,D),C.return=M,C)}function w(M,C,D,J){var Ne=D.type;return Ne===ae?$(M,C,D.props.children,J,D.key):C!==null&&(C.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===L&&Os(Ne)===C.type)?(C=n(C,D.props),on(C,D),C.return=M,C):(C=cr(D.type,D.key,D.props,null,M.mode,J),on(C,D),C.return=M,C)}function q(M,C,D,J){return C===null||C.tag!==4||C.stateNode.containerInfo!==D.containerInfo||C.stateNode.implementation!==D.implementation?(C=Pi(D,M.mode,J),C.return=M,C):(C=n(C,D.children||[]),C.return=M,C)}function $(M,C,D,J,Ne){return C===null||C.tag!==7?(C=Ds(D,M.mode,J,Ne),C.return=M,C):(C=n(C,D),C.return=M,C)}function ee(M,C,D){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=Ji(""+C,M.mode,D),C.return=M,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case N:return D=cr(C.type,C.key,C.props,null,M.mode,D),on(D,C),D.return=M,D;case H:return C=Pi(C,M.mode,D),C.return=M,C;case L:return C=Os(C),ee(M,C,D)}if(O(C)||Q(C))return C=Ds(C,M.mode,D,null),C.return=M,C;if(typeof C.then=="function")return ee(M,gr(C),D);if(C.$$typeof===ie)return ee(M,ur(M,C),D);hr(M,C)}return null}function R(M,C,D,J){var Ne=C!==null?C.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return Ne!==null?null:x(M,C,""+D,J);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case N:return D.key===Ne?w(M,C,D,J):null;case H:return D.key===Ne?q(M,C,D,J):null;case L:return D=Os(D),R(M,C,D,J)}if(O(D)||Q(D))return Ne!==null?null:$(M,C,D,J,null);if(typeof D.then=="function")return R(M,C,gr(D),J);if(D.$$typeof===ie)return R(M,C,ur(M,D),J);hr(M,D)}return null}function G(M,C,D,J,Ne){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return M=M.get(D)||null,x(C,M,""+J,Ne);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case N:return M=M.get(J.key===null?D:J.key)||null,w(C,M,J,Ne);case H:return M=M.get(J.key===null?D:J.key)||null,q(C,M,J,Ne);case L:return J=Os(J),G(M,C,D,J,Ne)}if(O(J)||Q(J))return M=M.get(D)||null,$(C,M,J,Ne,null);if(typeof J.then=="function")return G(M,C,D,gr(J),Ne);if(J.$$typeof===ie)return G(M,C,D,ur(C,J),Ne);hr(C,J)}return null}function ye(M,C,D,J){for(var Ne=null,$e=null,je=C,Ue=C=0,Fe=null;je!==null&&Ue<D.length;Ue++){je.index>Ue?(Fe=je,je=null):Fe=je.sibling;var Je=R(M,je,D[Ue],J);if(Je===null){je===null&&(je=Fe);break}e&&je&&Je.alternate===null&&a(M,je),C=r(Je,C,Ue),$e===null?Ne=Je:$e.sibling=Je,$e=Je,je=Fe}if(Ue===D.length)return s(M,je),Xe&&Oa(M,Ue),Ne;if(je===null){for(;Ue<D.length;Ue++)je=ee(M,D[Ue],J),je!==null&&(C=r(je,C,Ue),$e===null?Ne=je:$e.sibling=je,$e=je);return Xe&&Oa(M,Ue),Ne}for(je=l(je);Ue<D.length;Ue++)Fe=G(je,M,Ue,D[Ue],J),Fe!==null&&(e&&Fe.alternate!==null&&je.delete(Fe.key===null?Ue:Fe.key),C=r(Fe,C,Ue),$e===null?Ne=Fe:$e.sibling=Fe,$e=Fe);return e&&je.forEach(function(Ns){return a(M,Ns)}),Xe&&Oa(M,Ue),Ne}function ze(M,C,D,J){if(D==null)throw Error(d(151));for(var Ne=null,$e=null,je=C,Ue=C=0,Fe=null,Je=D.next();je!==null&&!Je.done;Ue++,Je=D.next()){je.index>Ue?(Fe=je,je=null):Fe=je.sibling;var Ns=R(M,je,Je.value,J);if(Ns===null){je===null&&(je=Fe);break}e&&je&&Ns.alternate===null&&a(M,je),C=r(Ns,C,Ue),$e===null?Ne=Ns:$e.sibling=Ns,$e=Ns,je=Fe}if(Je.done)return s(M,je),Xe&&Oa(M,Ue),Ne;if(je===null){for(;!Je.done;Ue++,Je=D.next())Je=ee(M,Je.value,J),Je!==null&&(C=r(Je,C,Ue),$e===null?Ne=Je:$e.sibling=Je,$e=Je);return Xe&&Oa(M,Ue),Ne}for(je=l(je);!Je.done;Ue++,Je=D.next())Je=G(je,M,Ue,Je.value,J),Je!==null&&(e&&Je.alternate!==null&&je.delete(Je.key===null?Ue:Je.key),C=r(Je,C,Ue),$e===null?Ne=Je:$e.sibling=Je,$e=Je);return e&&je.forEach(function(eh){return a(M,eh)}),Xe&&Oa(M,Ue),Ne}function nt(M,C,D,J){if(typeof D=="object"&&D!==null&&D.type===ae&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case N:e:{for(var Ne=D.key;C!==null;){if(C.key===Ne){if(Ne=D.type,Ne===ae){if(C.tag===7){s(M,C.sibling),J=n(C,D.props.children),J.return=M,M=J;break e}}else if(C.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===L&&Os(Ne)===C.type){s(M,C.sibling),J=n(C,D.props),on(J,D),J.return=M,M=J;break e}s(M,C);break}else a(M,C);C=C.sibling}D.type===ae?(J=Ds(D.props.children,M.mode,J,D.key),J.return=M,M=J):(J=cr(D.type,D.key,D.props,null,M.mode,J),on(J,D),J.return=M,M=J)}return c(M);case H:e:{for(Ne=D.key;C!==null;){if(C.key===Ne)if(C.tag===4&&C.stateNode.containerInfo===D.containerInfo&&C.stateNode.implementation===D.implementation){s(M,C.sibling),J=n(C,D.children||[]),J.return=M,M=J;break e}else{s(M,C);break}else a(M,C);C=C.sibling}J=Pi(D,M.mode,J),J.return=M,M=J}return c(M);case L:return D=Os(D),nt(M,C,D,J)}if(O(D))return ye(M,C,D,J);if(Q(D)){if(Ne=Q(D),typeof Ne!="function")throw Error(d(150));return D=Ne.call(D),ze(M,C,D,J)}if(typeof D.then=="function")return nt(M,C,gr(D),J);if(D.$$typeof===ie)return nt(M,C,ur(M,D),J);hr(M,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,C!==null&&C.tag===6?(s(M,C.sibling),J=n(C,D),J.return=M,M=J):(s(M,C),J=Ji(D,M.mode,J),J.return=M,M=J),c(M)):s(M,C)}return function(M,C,D,J){try{cn=0;var Ne=nt(M,C,D,J);return jl=null,Ne}catch(je){if(je===yl||je===mr)throw je;var $e=aa(29,je,null,M.mode);return $e.lanes=J,$e.return=M,$e}finally{}}}var Vs=fu(!0),gu=fu(!1),ns=!1;function oc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dc(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function rs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function is(e,a,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(We&2)!==0){var n=l.pending;return n===null?a.next=a:(a.next=n.next,n.next=a),l.pending=a,a=ir(e),Wd(e,null,s),a}return rr(e,l,a,s),ir(e)}function dn(e,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var l=a.lanes;l&=e.pendingLanes,s|=l,a.lanes=s,rd(e,s)}}function uc(e,a){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var n=null,r=null;if(s=s.firstBaseUpdate,s!==null){do{var c={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};r===null?n=r=c:r=r.next=c,s=s.next}while(s!==null);r===null?n=r=a:r=r.next=a}else n=r=a;s={baseState:l.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:l.shared,callbacks:l.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=a:e.next=a,s.lastBaseUpdate=a}var xc=!1;function un(){if(xc){var e=bl;if(e!==null)throw e}}function xn(e,a,s,l){xc=!1;var n=e.updateQueue;ns=!1;var r=n.firstBaseUpdate,c=n.lastBaseUpdate,x=n.shared.pending;if(x!==null){n.shared.pending=null;var w=x,q=w.next;w.next=null,c===null?r=q:c.next=q,c=w;var $=e.alternate;$!==null&&($=$.updateQueue,x=$.lastBaseUpdate,x!==c&&(x===null?$.firstBaseUpdate=q:x.next=q,$.lastBaseUpdate=w))}if(r!==null){var ee=n.baseState;c=0,$=q=w=null,x=r;do{var R=x.lane&-536870913,G=R!==x.lane;if(G?(Ge&R)===R:(l&R)===R){R!==0&&R===pl&&(xc=!0),$!==null&&($=$.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var ye=e,ze=x;R=a;var nt=s;switch(ze.tag){case 1:if(ye=ze.payload,typeof ye=="function"){ee=ye.call(nt,ee,R);break e}ee=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=ze.payload,R=typeof ye=="function"?ye.call(nt,ee,R):ye,R==null)break e;ee=g({},ee,R);break e;case 2:ns=!0}}R=x.callback,R!==null&&(e.flags|=64,G&&(e.flags|=8192),G=n.callbacks,G===null?n.callbacks=[R]:G.push(R))}else G={lane:R,tag:x.tag,payload:x.payload,callback:x.callback,next:null},$===null?(q=$=G,w=ee):$=$.next=G,c|=R;if(x=x.next,x===null){if(x=n.shared.pending,x===null)break;G=x,x=G.next,G.next=null,n.lastBaseUpdate=G,n.shared.pending=null}}while(!0);$===null&&(w=ee),n.baseState=w,n.firstBaseUpdate=q,n.lastBaseUpdate=$,r===null&&(n.shared.lanes=0),xs|=c,e.lanes=c,e.memoizedState=ee}}function hu(e,a){if(typeof e!="function")throw Error(d(191,e));e.call(a)}function pu(e,a){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)hu(s[e],a)}var vl=de(null),pr=de(0);function bu(e,a){e=$a,re(pr,e),re(vl,a),$a=e|a.baseLanes}function mc(){re(pr,$a),re(vl,vl.current)}function fc(){$a=pr.current,ce(vl),ce(pr)}var sa=de(null),pa=null;function cs(e){var a=e.alternate;re(ht,ht.current&1),re(sa,e),pa===null&&(a===null||vl.current!==null||a.memoizedState!==null)&&(pa=e)}function gc(e){re(ht,ht.current),re(sa,e),pa===null&&(pa=e)}function yu(e){e.tag===22?(re(ht,ht.current),re(sa,e),pa===null&&(pa=e)):os()}function os(){re(ht,ht.current),re(sa,sa.current)}function la(e){ce(sa),pa===e&&(pa=null),ce(ht)}var ht=de(0);function br(e){for(var a=e;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||No(s)||wo(s)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ha=0,Re=null,st=null,jt=null,yr=!1,Nl=!1,Hs=!1,jr=0,mn=0,wl=null,Qf=0;function ft(){throw Error(d(321))}function hc(e,a){if(a===null)return!1;for(var s=0;s<a.length&&s<e.length;s++)if(!ta(e[s],a[s]))return!1;return!0}function pc(e,a,s,l,n,r){return Ha=r,Re=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,j.H=e===null||e.memoizedState===null?ax:Tc,Hs=!1,r=s(l,n),Hs=!1,Nl&&(r=vu(a,s,l,n)),ju(e),r}function ju(e){j.H=hn;var a=st!==null&&st.next!==null;if(Ha=0,jt=st=Re=null,yr=!1,mn=0,wl=null,a)throw Error(d(300));e===null||vt||(e=e.dependencies,e!==null&&dr(e)&&(vt=!0))}function vu(e,a,s,l){Re=e;var n=0;do{if(Nl&&(wl=null),mn=0,Nl=!1,25<=n)throw Error(d(301));if(n+=1,jt=st=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}j.H=sx,r=a(s,l)}while(Nl);return r}function Yf(){var e=j.H,a=e.useState()[0];return a=typeof a.then=="function"?fn(a):a,e=e.useState()[0],(st!==null?st.memoizedState:null)!==e&&(Re.flags|=1024),a}function bc(){var e=jr!==0;return jr=0,e}function yc(e,a,s){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~s}function jc(e){if(yr){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}yr=!1}Ha=0,jt=st=Re=null,Nl=!1,mn=jr=0,wl=null}function Ft(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?Re.memoizedState=jt=e:jt=jt.next=e,jt}function pt(){if(st===null){var e=Re.alternate;e=e!==null?e.memoizedState:null}else e=st.next;var a=jt===null?Re.memoizedState:jt.next;if(a!==null)jt=a,st=e;else{if(e===null)throw Re.alternate===null?Error(d(467)):Error(d(310));st=e,e={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},jt===null?Re.memoizedState=jt=e:jt=jt.next=e}return jt}function vr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fn(e){var a=mn;return mn+=1,wl===null&&(wl=[]),e=uu(wl,e,a),a=Re,(jt===null?a.memoizedState:jt.next)===null&&(a=a.alternate,j.H=a===null||a.memoizedState===null?ax:Tc),e}function Nr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return fn(e);if(e.$$typeof===ie)return Lt(e)}throw Error(d(438,String(e)))}function vc(e){var a=null,s=Re.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var l=Re.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(n){return n.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=vr(),Re.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(e),l=0;l<e;l++)s[l]=U;return a.index++,s}function Ga(e,a){return typeof a=="function"?a(e):a}function wr(e){var a=pt();return Nc(a,st,e)}function Nc(e,a,s){var l=e.queue;if(l===null)throw Error(d(311));l.lastRenderedReducer=s;var n=e.baseQueue,r=l.pending;if(r!==null){if(n!==null){var c=n.next;n.next=r.next,r.next=c}a.baseQueue=n=r,l.pending=null}if(r=e.baseState,n===null)e.memoizedState=r;else{a=n.next;var x=c=null,w=null,q=a,$=!1;do{var ee=q.lane&-536870913;if(ee!==q.lane?(Ge&ee)===ee:(Ha&ee)===ee){var R=q.revertLane;if(R===0)w!==null&&(w=w.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),ee===pl&&($=!0);else if((Ha&R)===R){q=q.next,R===pl&&($=!0);continue}else ee={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},w===null?(x=w=ee,c=r):w=w.next=ee,Re.lanes|=R,xs|=R;ee=q.action,Hs&&s(r,ee),r=q.hasEagerState?q.eagerState:s(r,ee)}else R={lane:ee,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},w===null?(x=w=R,c=r):w=w.next=R,Re.lanes|=ee,xs|=ee;q=q.next}while(q!==null&&q!==a);if(w===null?c=r:w.next=x,!ta(r,e.memoizedState)&&(vt=!0,$&&(s=bl,s!==null)))throw s;e.memoizedState=r,e.baseState=c,e.baseQueue=w,l.lastRenderedState=r}return n===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function wc(e){var a=pt(),s=a.queue;if(s===null)throw Error(d(311));s.lastRenderedReducer=e;var l=s.dispatch,n=s.pending,r=a.memoizedState;if(n!==null){s.pending=null;var c=n=n.next;do r=e(r,c.action),c=c.next;while(c!==n);ta(r,a.memoizedState)||(vt=!0),a.memoizedState=r,a.baseQueue===null&&(a.baseState=r),s.lastRenderedState=r}return[r,l]}function Nu(e,a,s){var l=Re,n=pt(),r=Xe;if(r){if(s===void 0)throw Error(d(407));s=s()}else s=a();var c=!ta((st||n).memoizedState,s);if(c&&(n.memoizedState=s,vt=!0),n=n.queue,zc(Su.bind(null,l,n,e),[e]),n.getSnapshot!==a||c||jt!==null&&jt.memoizedState.tag&1){if(l.flags|=2048,_l(9,{destroy:void 0},_u.bind(null,l,n,s,a),null),rt===null)throw Error(d(349));r||(Ha&127)!==0||wu(l,a,s)}return s}function wu(e,a,s){e.flags|=16384,e={getSnapshot:a,value:s},a=Re.updateQueue,a===null?(a=vr(),Re.updateQueue=a,a.stores=[e]):(s=a.stores,s===null?a.stores=[e]:s.push(e))}function _u(e,a,s,l){a.value=s,a.getSnapshot=l,zu(a)&&ku(e)}function Su(e,a,s){return s(function(){zu(a)&&ku(e)})}function zu(e){var a=e.getSnapshot;e=e.value;try{var s=a();return!ta(e,s)}catch{return!0}}function ku(e){var a=Ts(e,2);a!==null&&Wt(a,e,2)}function _c(e){var a=Ft();if(typeof e=="function"){var s=e;if(e=s(),Hs){Me(!0);try{s()}finally{Me(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:e},a}function Cu(e,a,s,l){return e.baseState=s,Nc(e,st,typeof l=="function"?l:Ga)}function Xf(e,a,s,l,n){if(zr(e))throw Error(d(485));if(e=a.action,e!==null){var r={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(c){r.listeners.push(c)}};j.T!==null?s(!0):r.isTransition=!1,l(r),s=a.pending,s===null?(r.next=a.pending=r,Eu(a,r)):(r.next=s.next,a.pending=s.next=r)}}function Eu(e,a){var s=a.action,l=a.payload,n=e.state;if(a.isTransition){var r=j.T,c={};j.T=c;try{var x=s(n,l),w=j.S;w!==null&&w(c,x),Au(e,a,x)}catch(q){Sc(e,a,q)}finally{r!==null&&c.types!==null&&(r.types=c.types),j.T=r}}else try{r=s(n,l),Au(e,a,r)}catch(q){Sc(e,a,q)}}function Au(e,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){Mu(e,a,l)},function(l){return Sc(e,a,l)}):Mu(e,a,s)}function Mu(e,a,s){a.status="fulfilled",a.value=s,Tu(a),e.state=s,a=e.pending,a!==null&&(s=a.next,s===a?e.pending=null:(s=s.next,a.next=s,Eu(e,s)))}function Sc(e,a,s){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=s,Tu(a),a=a.next;while(a!==l)}e.action=null}function Tu(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function Du(e,a){return a}function qu(e,a){if(Xe){var s=rt.formState;if(s!==null){e:{var l=Re;if(Xe){if(it){t:{for(var n=it,r=ha;n.nodeType!==8;){if(!r){n=null;break t}if(n=ba(n.nextSibling),n===null){n=null;break t}}r=n.data,n=r==="F!"||r==="F"?n:null}if(n){it=ba(n.nextSibling),l=n.data==="F!";break e}}ss(l)}l=!1}l&&(a=s[0])}}return s=Ft(),s.memoizedState=s.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Du,lastRenderedState:a},s.queue=l,s=Iu.bind(null,Re,l),l.dispatch=s,l=_c(!1),r=Mc.bind(null,Re,!1,l.queue),l=Ft(),n={state:a,dispatch:null,action:e,pending:null},l.queue=n,s=Xf.bind(null,Re,n,r,s),n.dispatch=s,l.memoizedState=e,[a,s,!1]}function Ru(e){var a=pt();return Uu(a,st,e)}function Uu(e,a,s){if(a=Nc(e,a,Du)[0],e=wr(Ga)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=fn(a)}catch(c){throw c===yl?mr:c}else l=a;a=pt();var n=a.queue,r=n.dispatch;return s!==a.memoizedState&&(Re.flags|=2048,_l(9,{destroy:void 0},Zf.bind(null,n,s),null)),[l,r,e]}function Zf(e,a){e.action=a}function Lu(e){var a=pt(),s=st;if(s!==null)return Uu(a,s,e);pt(),a=a.memoizedState,s=pt();var l=s.queue.dispatch;return s.memoizedState=e,[a,l,!1]}function _l(e,a,s,l){return e={tag:e,create:s,deps:l,inst:a,next:null},a=Re.updateQueue,a===null&&(a=vr(),Re.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,a.lastEffect=e),e}function Ou(){return pt().memoizedState}function _r(e,a,s,l){var n=Ft();Re.flags|=e,n.memoizedState=_l(1|a,{destroy:void 0},s,l===void 0?null:l)}function Sr(e,a,s,l){var n=pt();l=l===void 0?null:l;var r=n.memoizedState.inst;st!==null&&l!==null&&hc(l,st.memoizedState.deps)?n.memoizedState=_l(a,r,s,l):(Re.flags|=e,n.memoizedState=_l(1|a,r,s,l))}function Bu(e,a){_r(8390656,8,e,a)}function zc(e,a){Sr(2048,8,e,a)}function Kf(e){Re.flags|=4;var a=Re.updateQueue;if(a===null)a=vr(),Re.updateQueue=a,a.events=[e];else{var s=a.events;s===null?a.events=[e]:s.push(e)}}function Vu(e){var a=pt().memoizedState;return Kf({ref:a,nextImpl:e}),function(){if((We&2)!==0)throw Error(d(440));return a.impl.apply(void 0,arguments)}}function Hu(e,a){return Sr(4,2,e,a)}function Gu(e,a){return Sr(4,4,e,a)}function Fu(e,a){if(typeof a=="function"){e=e();var s=a(e);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function Qu(e,a,s){s=s!=null?s.concat([e]):null,Sr(4,4,Fu.bind(null,a,e),s)}function kc(){}function Yu(e,a){var s=pt();a=a===void 0?null:a;var l=s.memoizedState;return a!==null&&hc(a,l[1])?l[0]:(s.memoizedState=[e,a],e)}function Xu(e,a){var s=pt();a=a===void 0?null:a;var l=s.memoizedState;if(a!==null&&hc(a,l[1]))return l[0];if(l=e(),Hs){Me(!0);try{e()}finally{Me(!1)}}return s.memoizedState=[l,a],l}function Cc(e,a,s){return s===void 0||(Ha&1073741824)!==0&&(Ge&261930)===0?e.memoizedState=a:(e.memoizedState=s,e=Zx(),Re.lanes|=e,xs|=e,s)}function Zu(e,a,s,l){return ta(s,a)?s:vl.current!==null?(e=Cc(e,s,l),ta(e,a)||(vt=!0),e):(Ha&42)===0||(Ha&1073741824)!==0&&(Ge&261930)===0?(vt=!0,e.memoizedState=s):(e=Zx(),Re.lanes|=e,xs|=e,a)}function Ku(e,a,s,l,n){var r=A.p;A.p=r!==0&&8>r?r:8;var c=j.T,x={};j.T=x,Mc(e,!1,a,s);try{var w=n(),q=j.S;if(q!==null&&q(x,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var $=Ff(w,l);gn(e,a,$,ia(e))}else gn(e,a,l,ia(e))}catch(ee){gn(e,a,{then:function(){},status:"rejected",reason:ee},ia())}finally{A.p=r,c!==null&&x.types!==null&&(c.types=x.types),j.T=c}}function $f(){}function Ec(e,a,s,l){if(e.tag!==5)throw Error(d(476));var n=$u(e).queue;Ku(e,n,a,B,s===null?$f:function(){return Ju(e),s(l)})}function $u(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:B,baseState:B,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:B},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:s},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function Ju(e){var a=$u(e);a.next===null&&(a=e.alternate.memoizedState),gn(e,a.next.queue,{},ia())}function Ac(){return Lt(Tn)}function Pu(){return pt().memoizedState}function Wu(){return pt().memoizedState}function Jf(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var s=ia();e=rs(s);var l=is(a,e,s);l!==null&&(Wt(l,a,s),dn(l,a,s)),a={cache:nc()},e.payload=a;return}a=a.return}}function Pf(e,a,s){var l=ia();s={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},zr(e)?ex(a,s):(s=Ki(e,a,s,l),s!==null&&(Wt(s,e,l),tx(s,a,l)))}function Iu(e,a,s){var l=ia();gn(e,a,s,l)}function gn(e,a,s,l){var n={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(zr(e))ex(a,n);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=a.lastRenderedReducer,r!==null))try{var c=a.lastRenderedState,x=r(c,s);if(n.hasEagerState=!0,n.eagerState=x,ta(x,c))return rr(e,a,n,0),rt===null&&nr(),!1}catch{}finally{}if(s=Ki(e,a,n,l),s!==null)return Wt(s,e,l),tx(s,a,l),!0}return!1}function Mc(e,a,s,l){if(l={lane:2,revertLane:oo(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},zr(e)){if(a)throw Error(d(479))}else a=Ki(e,s,l,2),a!==null&&Wt(a,e,2)}function zr(e){var a=e.alternate;return e===Re||a!==null&&a===Re}function ex(e,a){Nl=yr=!0;var s=e.pending;s===null?a.next=a:(a.next=s.next,s.next=a),e.pending=a}function tx(e,a,s){if((s&4194048)!==0){var l=a.lanes;l&=e.pendingLanes,s|=l,a.lanes=s,rd(e,s)}}var hn={readContext:Lt,use:Nr,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useLayoutEffect:ft,useInsertionEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useSyncExternalStore:ft,useId:ft,useHostTransitionStatus:ft,useFormState:ft,useActionState:ft,useOptimistic:ft,useMemoCache:ft,useCacheRefresh:ft};hn.useEffectEvent=ft;var ax={readContext:Lt,use:Nr,useCallback:function(e,a){return Ft().memoizedState=[e,a===void 0?null:a],e},useContext:Lt,useEffect:Bu,useImperativeHandle:function(e,a,s){s=s!=null?s.concat([e]):null,_r(4194308,4,Fu.bind(null,a,e),s)},useLayoutEffect:function(e,a){return _r(4194308,4,e,a)},useInsertionEffect:function(e,a){_r(4,2,e,a)},useMemo:function(e,a){var s=Ft();a=a===void 0?null:a;var l=e();if(Hs){Me(!0);try{e()}finally{Me(!1)}}return s.memoizedState=[l,a],l},useReducer:function(e,a,s){var l=Ft();if(s!==void 0){var n=s(a);if(Hs){Me(!0);try{s(a)}finally{Me(!1)}}}else n=a;return l.memoizedState=l.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},l.queue=e,e=e.dispatch=Pf.bind(null,Re,e),[l.memoizedState,e]},useRef:function(e){var a=Ft();return e={current:e},a.memoizedState=e},useState:function(e){e=_c(e);var a=e.queue,s=Iu.bind(null,Re,a);return a.dispatch=s,[e.memoizedState,s]},useDebugValue:kc,useDeferredValue:function(e,a){var s=Ft();return Cc(s,e,a)},useTransition:function(){var e=_c(!1);return e=Ku.bind(null,Re,e.queue,!0,!1),Ft().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,s){var l=Re,n=Ft();if(Xe){if(s===void 0)throw Error(d(407));s=s()}else{if(s=a(),rt===null)throw Error(d(349));(Ge&127)!==0||wu(l,a,s)}n.memoizedState=s;var r={value:s,getSnapshot:a};return n.queue=r,Bu(Su.bind(null,l,r,e),[e]),l.flags|=2048,_l(9,{destroy:void 0},_u.bind(null,l,r,s,a),null),s},useId:function(){var e=Ft(),a=rt.identifierPrefix;if(Xe){var s=ka,l=za;s=(l&~(1<<32-Pe(l)-1)).toString(32)+s,a="_"+a+"R_"+s,s=jr++,0<s&&(a+="H"+s.toString(32)),a+="_"}else s=Qf++,a="_"+a+"r_"+s.toString(32)+"_";return e.memoizedState=a},useHostTransitionStatus:Ac,useFormState:qu,useActionState:qu,useOptimistic:function(e){var a=Ft();a.memoizedState=a.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=Mc.bind(null,Re,!0,s),s.dispatch=a,[e,a]},useMemoCache:vc,useCacheRefresh:function(){return Ft().memoizedState=Jf.bind(null,Re)},useEffectEvent:function(e){var a=Ft(),s={impl:e};return a.memoizedState=s,function(){if((We&2)!==0)throw Error(d(440));return s.impl.apply(void 0,arguments)}}},Tc={readContext:Lt,use:Nr,useCallback:Yu,useContext:Lt,useEffect:zc,useImperativeHandle:Qu,useInsertionEffect:Hu,useLayoutEffect:Gu,useMemo:Xu,useReducer:wr,useRef:Ou,useState:function(){return wr(Ga)},useDebugValue:kc,useDeferredValue:function(e,a){var s=pt();return Zu(s,st.memoizedState,e,a)},useTransition:function(){var e=wr(Ga)[0],a=pt().memoizedState;return[typeof e=="boolean"?e:fn(e),a]},useSyncExternalStore:Nu,useId:Pu,useHostTransitionStatus:Ac,useFormState:Ru,useActionState:Ru,useOptimistic:function(e,a){var s=pt();return Cu(s,st,e,a)},useMemoCache:vc,useCacheRefresh:Wu};Tc.useEffectEvent=Vu;var sx={readContext:Lt,use:Nr,useCallback:Yu,useContext:Lt,useEffect:zc,useImperativeHandle:Qu,useInsertionEffect:Hu,useLayoutEffect:Gu,useMemo:Xu,useReducer:wc,useRef:Ou,useState:function(){return wc(Ga)},useDebugValue:kc,useDeferredValue:function(e,a){var s=pt();return st===null?Cc(s,e,a):Zu(s,st.memoizedState,e,a)},useTransition:function(){var e=wc(Ga)[0],a=pt().memoizedState;return[typeof e=="boolean"?e:fn(e),a]},useSyncExternalStore:Nu,useId:Pu,useHostTransitionStatus:Ac,useFormState:Lu,useActionState:Lu,useOptimistic:function(e,a){var s=pt();return st!==null?Cu(s,st,e,a):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:vc,useCacheRefresh:Wu};sx.useEffectEvent=Vu;function Dc(e,a,s,l){a=e.memoizedState,s=s(l,a),s=s==null?a:g({},a,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var qc={enqueueSetState:function(e,a,s){e=e._reactInternals;var l=ia(),n=rs(l);n.payload=a,s!=null&&(n.callback=s),a=is(e,n,l),a!==null&&(Wt(a,e,l),dn(a,e,l))},enqueueReplaceState:function(e,a,s){e=e._reactInternals;var l=ia(),n=rs(l);n.tag=1,n.payload=a,s!=null&&(n.callback=s),a=is(e,n,l),a!==null&&(Wt(a,e,l),dn(a,e,l))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var s=ia(),l=rs(s);l.tag=2,a!=null&&(l.callback=a),a=is(e,l,s),a!==null&&(Wt(a,e,s),dn(a,e,s))}};function lx(e,a,s,l,n,r,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,r,c):a.prototype&&a.prototype.isPureReactComponent?!tn(s,l)||!tn(n,r):!0}function nx(e,a,s,l){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,l),a.state!==e&&qc.enqueueReplaceState(a,a.state,null)}function Gs(e,a){var s=a;if("ref"in a){s={};for(var l in a)l!=="ref"&&(s[l]=a[l])}if(e=e.defaultProps){s===a&&(s=g({},s));for(var n in e)s[n]===void 0&&(s[n]=e[n])}return s}function rx(e){lr(e)}function ix(e){console.error(e)}function cx(e){lr(e)}function kr(e,a){try{var s=e.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function ox(e,a,s){try{var l=e.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function Rc(e,a,s){return s=rs(s),s.tag=3,s.payload={element:null},s.callback=function(){kr(e,a)},s}function dx(e){return e=rs(e),e.tag=3,e}function ux(e,a,s,l){var n=s.type.getDerivedStateFromError;if(typeof n=="function"){var r=l.value;e.payload=function(){return n(r)},e.callback=function(){ox(a,s,l)}}var c=s.stateNode;c!==null&&typeof c.componentDidCatch=="function"&&(e.callback=function(){ox(a,s,l),typeof n!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var x=l.stack;this.componentDidCatch(l.value,{componentStack:x!==null?x:""})})}function Wf(e,a,s,l,n){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=s.alternate,a!==null&&hl(a,s,n,!0),s=sa.current,s!==null){switch(s.tag){case 31:case 13:return pa===null?Br():s.alternate===null&&gt===0&&(gt=3),s.flags&=-257,s.flags|=65536,s.lanes=n,l===fr?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([l]):a.add(l),ro(e,l,n)),!1;case 22:return s.flags|=65536,l===fr?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([l]):s.add(l)),ro(e,l,n)),!1}throw Error(d(435,s.tag))}return ro(e,l,n),Br(),!1}if(Xe)return a=sa.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=n,l!==ec&&(e=Error(d(422),{cause:l}),ln(ma(e,s)))):(l!==ec&&(a=Error(d(423),{cause:l}),ln(ma(a,s))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,l=ma(l,s),n=Rc(e.stateNode,l,n),uc(e,n),gt!==4&&(gt=2)),!1;var r=Error(d(520),{cause:l});if(r=ma(r,s),_n===null?_n=[r]:_n.push(r),gt!==4&&(gt=2),a===null)return!0;l=ma(l,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,e=n&-n,s.lanes|=e,e=Rc(s.stateNode,l,e),uc(s,e),!1;case 1:if(a=s.type,r=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(ms===null||!ms.has(r))))return s.flags|=65536,n&=-n,s.lanes|=n,n=dx(n),ux(n,e,s,l),uc(s,n),!1}s=s.return}while(s!==null);return!1}var Uc=Error(d(461)),vt=!1;function Ot(e,a,s,l){a.child=e===null?gu(a,null,s,l):Vs(a,e.child,s,l)}function xx(e,a,s,l,n){s=s.render;var r=a.ref;if("ref"in l){var c={};for(var x in l)x!=="ref"&&(c[x]=l[x])}else c=l;return Us(a),l=pc(e,a,s,c,r,n),x=bc(),e!==null&&!vt?(yc(e,a,n),Fa(e,a,n)):(Xe&&x&&Wi(a),a.flags|=1,Ot(e,a,l,n),a.child)}function mx(e,a,s,l,n){if(e===null){var r=s.type;return typeof r=="function"&&!$i(r)&&r.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=r,fx(e,a,r,l,n)):(e=cr(s.type,null,l,a,a.mode,n),e.ref=a.ref,e.return=a,a.child=e)}if(r=e.child,!Qc(e,n)){var c=r.memoizedProps;if(s=s.compare,s=s!==null?s:tn,s(c,l)&&e.ref===a.ref)return Fa(e,a,n)}return a.flags|=1,e=La(r,l),e.ref=a.ref,e.return=a,a.child=e}function fx(e,a,s,l,n){if(e!==null){var r=e.memoizedProps;if(tn(r,l)&&e.ref===a.ref)if(vt=!1,a.pendingProps=l=r,Qc(e,n))(e.flags&131072)!==0&&(vt=!0);else return a.lanes=e.lanes,Fa(e,a,n)}return Lc(e,a,s,l,n)}function gx(e,a,s,l){var n=l.children,r=e!==null?e.memoizedState:null;if(e===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((a.flags&128)!==0){if(r=r!==null?r.baseLanes|s:s,e!==null){for(l=a.child=e.child,n=0;l!==null;)n=n|l.lanes|l.childLanes,l=l.sibling;l=n&~r}else l=0,a.child=null;return hx(e,a,r,s,l)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&xr(a,r!==null?r.cachePool:null),r!==null?bu(a,r):mc(),yu(a);else return l=a.lanes=536870912,hx(e,a,r!==null?r.baseLanes|s:s,s,l)}else r!==null?(xr(a,r.cachePool),bu(a,r),os(),a.memoizedState=null):(e!==null&&xr(a,null),mc(),os());return Ot(e,a,n,s),a.child}function pn(e,a){return e!==null&&e.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function hx(e,a,s,l,n){var r=ic();return r=r===null?null:{parent:yt._currentValue,pool:r},a.memoizedState={baseLanes:s,cachePool:r},e!==null&&xr(a,null),mc(),yu(a),e!==null&&hl(e,a,l,!0),a.childLanes=n,null}function Cr(e,a){return a=Ar({mode:a.mode,children:a.children},e.mode),a.ref=e.ref,e.child=a,a.return=e,a}function px(e,a,s){return Vs(a,e.child,null,s),e=Cr(a,a.pendingProps),e.flags|=2,la(a),a.memoizedState=null,e}function If(e,a,s){var l=a.pendingProps,n=(a.flags&128)!==0;if(a.flags&=-129,e===null){if(Xe){if(l.mode==="hidden")return e=Cr(a,l),a.lanes=536870912,pn(null,e);if(gc(a),(e=it)?(e=Em(e,ha),e=e!==null&&e.data==="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:ts!==null?{id:za,overflow:ka}:null,retryLane:536870912,hydrationErrors:null},s=eu(e),s.return=a,a.child=s,Ut=a,it=null)):e=null,e===null)throw ss(a);return a.lanes=536870912,null}return Cr(a,l)}var r=e.memoizedState;if(r!==null){var c=r.dehydrated;if(gc(a),n)if(a.flags&256)a.flags&=-257,a=px(e,a,s);else if(a.memoizedState!==null)a.child=e.child,a.flags|=128,a=null;else throw Error(d(558));else if(vt||hl(e,a,s,!1),n=(s&e.childLanes)!==0,vt||n){if(l=rt,l!==null&&(c=id(l,s),c!==0&&c!==r.retryLane))throw r.retryLane=c,Ts(e,c),Wt(l,e,c),Uc;Br(),a=px(e,a,s)}else e=r.treeContext,it=ba(c.nextSibling),Ut=a,Xe=!0,as=null,ha=!1,e!==null&&su(a,e),a=Cr(a,l),a.flags|=4096;return a}return e=La(e.child,{mode:l.mode,children:l.children}),e.ref=a.ref,a.child=e,e.return=a,e}function Er(e,a){var s=a.ref;if(s===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(d(284));(e===null||e.ref!==s)&&(a.flags|=4194816)}}function Lc(e,a,s,l,n){return Us(a),s=pc(e,a,s,l,void 0,n),l=bc(),e!==null&&!vt?(yc(e,a,n),Fa(e,a,n)):(Xe&&l&&Wi(a),a.flags|=1,Ot(e,a,s,n),a.child)}function bx(e,a,s,l,n,r){return Us(a),a.updateQueue=null,s=vu(a,l,s,n),ju(e),l=bc(),e!==null&&!vt?(yc(e,a,r),Fa(e,a,r)):(Xe&&l&&Wi(a),a.flags|=1,Ot(e,a,s,r),a.child)}function yx(e,a,s,l,n){if(Us(a),a.stateNode===null){var r=xl,c=s.contextType;typeof c=="object"&&c!==null&&(r=Lt(c)),r=new s(l,r),a.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=qc,a.stateNode=r,r._reactInternals=a,r=a.stateNode,r.props=l,r.state=a.memoizedState,r.refs={},oc(a),c=s.contextType,r.context=typeof c=="object"&&c!==null?Lt(c):xl,r.state=a.memoizedState,c=s.getDerivedStateFromProps,typeof c=="function"&&(Dc(a,s,c,l),r.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(c=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),c!==r.state&&qc.enqueueReplaceState(r,r.state,null),xn(a,l,r,n),un(),r.state=a.memoizedState),typeof r.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(e===null){r=a.stateNode;var x=a.memoizedProps,w=Gs(s,x);r.props=w;var q=r.context,$=s.contextType;c=xl,typeof $=="object"&&$!==null&&(c=Lt($));var ee=s.getDerivedStateFromProps;$=typeof ee=="function"||typeof r.getSnapshotBeforeUpdate=="function",x=a.pendingProps!==x,$||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(x||q!==c)&&nx(a,r,l,c),ns=!1;var R=a.memoizedState;r.state=R,xn(a,l,r,n),un(),q=a.memoizedState,x||R!==q||ns?(typeof ee=="function"&&(Dc(a,s,ee,l),q=a.memoizedState),(w=ns||lx(a,s,w,l,R,q,c))?($||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(a.flags|=4194308)):(typeof r.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=q),r.props=l,r.state=q,r.context=c,l=w):(typeof r.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{r=a.stateNode,dc(e,a),c=a.memoizedProps,$=Gs(s,c),r.props=$,ee=a.pendingProps,R=r.context,q=s.contextType,w=xl,typeof q=="object"&&q!==null&&(w=Lt(q)),x=s.getDerivedStateFromProps,(q=typeof x=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(c!==ee||R!==w)&&nx(a,r,l,w),ns=!1,R=a.memoizedState,r.state=R,xn(a,l,r,n),un();var G=a.memoizedState;c!==ee||R!==G||ns||e!==null&&e.dependencies!==null&&dr(e.dependencies)?(typeof x=="function"&&(Dc(a,s,x,l),G=a.memoizedState),($=ns||lx(a,s,$,l,R,G,w)||e!==null&&e.dependencies!==null&&dr(e.dependencies))?(q||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(l,G,w),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(l,G,w)),typeof r.componentDidUpdate=="function"&&(a.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof r.componentDidUpdate!="function"||c===e.memoizedProps&&R===e.memoizedState||(a.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&R===e.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=G),r.props=l,r.state=G,r.context=w,l=$):(typeof r.componentDidUpdate!="function"||c===e.memoizedProps&&R===e.memoizedState||(a.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&R===e.memoizedState||(a.flags|=1024),l=!1)}return r=l,Er(e,a),l=(a.flags&128)!==0,r||l?(r=a.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:r.render(),a.flags|=1,e!==null&&l?(a.child=Vs(a,e.child,null,n),a.child=Vs(a,null,s,n)):Ot(e,a,s,n),a.memoizedState=r.state,e=a.child):e=Fa(e,a,n),e}function jx(e,a,s,l){return qs(),a.flags|=256,Ot(e,a,s,l),a.child}var Oc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bc(e){return{baseLanes:e,cachePool:ou()}}function Vc(e,a,s){return e=e!==null?e.childLanes&~s:0,a&&(e|=ra),e}function vx(e,a,s){var l=a.pendingProps,n=!1,r=(a.flags&128)!==0,c;if((c=r)||(c=e!==null&&e.memoizedState===null?!1:(ht.current&2)!==0),c&&(n=!0,a.flags&=-129),c=(a.flags&32)!==0,a.flags&=-33,e===null){if(Xe){if(n?cs(a):os(),(e=it)?(e=Em(e,ha),e=e!==null&&e.data!=="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:ts!==null?{id:za,overflow:ka}:null,retryLane:536870912,hydrationErrors:null},s=eu(e),s.return=a,a.child=s,Ut=a,it=null)):e=null,e===null)throw ss(a);return wo(e)?a.lanes=32:a.lanes=536870912,null}var x=l.children;return l=l.fallback,n?(os(),n=a.mode,x=Ar({mode:"hidden",children:x},n),l=Ds(l,n,s,null),x.return=a,l.return=a,x.sibling=l,a.child=x,l=a.child,l.memoizedState=Bc(s),l.childLanes=Vc(e,c,s),a.memoizedState=Oc,pn(null,l)):(cs(a),Hc(a,x))}var w=e.memoizedState;if(w!==null&&(x=w.dehydrated,x!==null)){if(r)a.flags&256?(cs(a),a.flags&=-257,a=Gc(e,a,s)):a.memoizedState!==null?(os(),a.child=e.child,a.flags|=128,a=null):(os(),x=l.fallback,n=a.mode,l=Ar({mode:"visible",children:l.children},n),x=Ds(x,n,s,null),x.flags|=2,l.return=a,x.return=a,l.sibling=x,a.child=l,Vs(a,e.child,null,s),l=a.child,l.memoizedState=Bc(s),l.childLanes=Vc(e,c,s),a.memoizedState=Oc,a=pn(null,l));else if(cs(a),wo(x)){if(c=x.nextSibling&&x.nextSibling.dataset,c)var q=c.dgst;c=q,l=Error(d(419)),l.stack="",l.digest=c,ln({value:l,source:null,stack:null}),a=Gc(e,a,s)}else if(vt||hl(e,a,s,!1),c=(s&e.childLanes)!==0,vt||c){if(c=rt,c!==null&&(l=id(c,s),l!==0&&l!==w.retryLane))throw w.retryLane=l,Ts(e,l),Wt(c,e,l),Uc;No(x)||Br(),a=Gc(e,a,s)}else No(x)?(a.flags|=192,a.child=e.child,a=null):(e=w.treeContext,it=ba(x.nextSibling),Ut=a,Xe=!0,as=null,ha=!1,e!==null&&su(a,e),a=Hc(a,l.children),a.flags|=4096);return a}return n?(os(),x=l.fallback,n=a.mode,w=e.child,q=w.sibling,l=La(w,{mode:"hidden",children:l.children}),l.subtreeFlags=w.subtreeFlags&65011712,q!==null?x=La(q,x):(x=Ds(x,n,s,null),x.flags|=2),x.return=a,l.return=a,l.sibling=x,a.child=l,pn(null,l),l=a.child,x=e.child.memoizedState,x===null?x=Bc(s):(n=x.cachePool,n!==null?(w=yt._currentValue,n=n.parent!==w?{parent:w,pool:w}:n):n=ou(),x={baseLanes:x.baseLanes|s,cachePool:n}),l.memoizedState=x,l.childLanes=Vc(e,c,s),a.memoizedState=Oc,pn(e.child,l)):(cs(a),s=e.child,e=s.sibling,s=La(s,{mode:"visible",children:l.children}),s.return=a,s.sibling=null,e!==null&&(c=a.deletions,c===null?(a.deletions=[e],a.flags|=16):c.push(e)),a.child=s,a.memoizedState=null,s)}function Hc(e,a){return a=Ar({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function Ar(e,a){return e=aa(22,e,null,a),e.lanes=0,e}function Gc(e,a,s){return Vs(a,e.child,null,s),e=Hc(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function Nx(e,a,s){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a),sc(e.return,a,s)}function Fc(e,a,s,l,n,r){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:n,treeForkCount:r}:(c.isBackwards=a,c.rendering=null,c.renderingStartTime=0,c.last=l,c.tail=s,c.tailMode=n,c.treeForkCount=r)}function wx(e,a,s){var l=a.pendingProps,n=l.revealOrder,r=l.tail;l=l.children;var c=ht.current,x=(c&2)!==0;if(x?(c=c&1|2,a.flags|=128):c&=1,re(ht,c),Ot(e,a,l,s),l=Xe?sn:0,!x&&e!==null&&(e.flags&128)!==0)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Nx(e,s,a);else if(e.tag===19)Nx(e,s,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(n){case"forwards":for(s=a.child,n=null;s!==null;)e=s.alternate,e!==null&&br(e)===null&&(n=s),s=s.sibling;s=n,s===null?(n=a.child,a.child=null):(n=s.sibling,s.sibling=null),Fc(a,!1,n,s,r,l);break;case"backwards":case"unstable_legacy-backwards":for(s=null,n=a.child,a.child=null;n!==null;){if(e=n.alternate,e!==null&&br(e)===null){a.child=n;break}e=n.sibling,n.sibling=s,s=n,n=e}Fc(a,!0,s,null,r,l);break;case"together":Fc(a,!1,null,null,void 0,l);break;default:a.memoizedState=null}return a.child}function Fa(e,a,s){if(e!==null&&(a.dependencies=e.dependencies),xs|=a.lanes,(s&a.childLanes)===0)if(e!==null){if(hl(e,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(d(153));if(a.child!==null){for(e=a.child,s=La(e,e.pendingProps),a.child=s,s.return=a;e.sibling!==null;)e=e.sibling,s=s.sibling=La(e,e.pendingProps),s.return=a;s.sibling=null}return a.child}function Qc(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&dr(e)))}function eg(e,a,s){switch(a.tag){case 3:te(a,a.stateNode.containerInfo),ls(a,yt,e.memoizedState.cache),qs();break;case 27:case 5:we(a);break;case 4:te(a,a.stateNode.containerInfo);break;case 10:ls(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,gc(a),null;break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(cs(a),a.flags|=128,null):(s&a.child.childLanes)!==0?vx(e,a,s):(cs(a),e=Fa(e,a,s),e!==null?e.sibling:null);cs(a);break;case 19:var n=(e.flags&128)!==0;if(l=(s&a.childLanes)!==0,l||(hl(e,a,s,!1),l=(s&a.childLanes)!==0),n){if(l)return wx(e,a,s);a.flags|=128}if(n=a.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),re(ht,ht.current),l)break;return null;case 22:return a.lanes=0,gx(e,a,s,a.pendingProps);case 24:ls(a,yt,e.memoizedState.cache)}return Fa(e,a,s)}function _x(e,a,s){if(e!==null)if(e.memoizedProps!==a.pendingProps)vt=!0;else{if(!Qc(e,s)&&(a.flags&128)===0)return vt=!1,eg(e,a,s);vt=(e.flags&131072)!==0}else vt=!1,Xe&&(a.flags&1048576)!==0&&au(a,sn,a.index);switch(a.lanes=0,a.tag){case 16:e:{var l=a.pendingProps;if(e=Os(a.elementType),a.type=e,typeof e=="function")$i(e)?(l=Gs(e,l),a.tag=1,a=yx(null,a,e,l,s)):(a.tag=0,a=Lc(null,a,e,l,s));else{if(e!=null){var n=e.$$typeof;if(n===Z){a.tag=11,a=xx(null,a,e,l,s);break e}else if(n===ue){a.tag=14,a=mx(null,a,e,l,s);break e}}throw a=S(e)||e,Error(d(306,a,""))}}return a;case 0:return Lc(e,a,a.type,a.pendingProps,s);case 1:return l=a.type,n=Gs(l,a.pendingProps),yx(e,a,l,n,s);case 3:e:{if(te(a,a.stateNode.containerInfo),e===null)throw Error(d(387));l=a.pendingProps;var r=a.memoizedState;n=r.element,dc(e,a),xn(a,l,null,s);var c=a.memoizedState;if(l=c.cache,ls(a,yt,l),l!==r.cache&&lc(a,[yt],s,!0),un(),l=c.element,r.isDehydrated)if(r={element:l,isDehydrated:!1,cache:c.cache},a.updateQueue.baseState=r,a.memoizedState=r,a.flags&256){a=jx(e,a,l,s);break e}else if(l!==n){n=ma(Error(d(424)),a),ln(n),a=jx(e,a,l,s);break e}else{switch(e=a.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(it=ba(e.firstChild),Ut=a,Xe=!0,as=null,ha=!0,s=gu(a,null,l,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(qs(),l===n){a=Fa(e,a,s);break e}Ot(e,a,l,s)}a=a.child}return a;case 26:return Er(e,a),e===null?(s=Rm(a.type,null,a.pendingProps,null))?a.memoizedState=s:Xe||(s=a.type,e=a.pendingProps,l=Xr(E.current).createElement(s),l[Rt]=a,l[Xt]=e,Bt(l,s,e),Ct(l),a.stateNode=l):a.memoizedState=Rm(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return we(a),e===null&&Xe&&(l=a.stateNode=Tm(a.type,a.pendingProps,E.current),Ut=a,ha=!0,n=it,ps(a.type)?(_o=n,it=ba(l.firstChild)):it=n),Ot(e,a,a.pendingProps.children,s),Er(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&Xe&&((n=l=it)&&(l=Ag(l,a.type,a.pendingProps,ha),l!==null?(a.stateNode=l,Ut=a,it=ba(l.firstChild),ha=!1,n=!0):n=!1),n||ss(a)),we(a),n=a.type,r=a.pendingProps,c=e!==null?e.memoizedProps:null,l=r.children,yo(n,r)?l=null:c!==null&&yo(n,c)&&(a.flags|=32),a.memoizedState!==null&&(n=pc(e,a,Yf,null,null,s),Tn._currentValue=n),Er(e,a),Ot(e,a,l,s),a.child;case 6:return e===null&&Xe&&((e=s=it)&&(s=Mg(s,a.pendingProps,ha),s!==null?(a.stateNode=s,Ut=a,it=null,e=!0):e=!1),e||ss(a)),null;case 13:return vx(e,a,s);case 4:return te(a,a.stateNode.containerInfo),l=a.pendingProps,e===null?a.child=Vs(a,null,l,s):Ot(e,a,l,s),a.child;case 11:return xx(e,a,a.type,a.pendingProps,s);case 7:return Ot(e,a,a.pendingProps,s),a.child;case 8:return Ot(e,a,a.pendingProps.children,s),a.child;case 12:return Ot(e,a,a.pendingProps.children,s),a.child;case 10:return l=a.pendingProps,ls(a,a.type,l.value),Ot(e,a,l.children,s),a.child;case 9:return n=a.type._context,l=a.pendingProps.children,Us(a),n=Lt(n),l=l(n),a.flags|=1,Ot(e,a,l,s),a.child;case 14:return mx(e,a,a.type,a.pendingProps,s);case 15:return fx(e,a,a.type,a.pendingProps,s);case 19:return wx(e,a,s);case 31:return If(e,a,s);case 22:return gx(e,a,s,a.pendingProps);case 24:return Us(a),l=Lt(yt),e===null?(n=ic(),n===null&&(n=rt,r=nc(),n.pooledCache=r,r.refCount++,r!==null&&(n.pooledCacheLanes|=s),n=r),a.memoizedState={parent:l,cache:n},oc(a),ls(a,yt,n)):((e.lanes&s)!==0&&(dc(e,a),xn(a,null,null,s),un()),n=e.memoizedState,r=a.memoizedState,n.parent!==l?(n={parent:l,cache:l},a.memoizedState=n,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=n),ls(a,yt,l)):(l=r.cache,ls(a,yt,l),l!==n.cache&&lc(a,[yt],s,!0))),Ot(e,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(d(156,a.tag))}function Qa(e){e.flags|=4}function Yc(e,a,s,l,n){if((a=(e.mode&32)!==0)&&(a=!1),a){if(e.flags|=16777216,(n&335544128)===n)if(e.stateNode.complete)e.flags|=8192;else if(Px())e.flags|=8192;else throw Bs=fr,cc}else e.flags&=-16777217}function Sx(e,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Vm(a))if(Px())e.flags|=8192;else throw Bs=fr,cc}function Mr(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?ld():536870912,e.lanes|=a,Cl|=a)}function bn(e,a){if(!Xe)switch(e.tailMode){case"hidden":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function ct(e){var a=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(a)for(var n=e.child;n!==null;)s|=n.lanes|n.childLanes,l|=n.subtreeFlags&65011712,l|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)s|=n.lanes|n.childLanes,l|=n.subtreeFlags,l|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=l,e.childLanes=s,a}function tg(e,a,s){var l=a.pendingProps;switch(Ii(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(a),null;case 1:return ct(a),null;case 3:return s=a.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Va(yt),he(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(gl(a)?Qa(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,tc())),ct(a),null;case 26:var n=a.type,r=a.memoizedState;return e===null?(Qa(a),r!==null?(ct(a),Sx(a,r)):(ct(a),Yc(a,n,null,l,s))):r?r!==e.memoizedState?(Qa(a),ct(a),Sx(a,r)):(ct(a),a.flags&=-16777217):(e=e.memoizedProps,e!==l&&Qa(a),ct(a),Yc(a,n,e,l,s)),null;case 27:if(_e(a),s=E.current,n=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==l&&Qa(a);else{if(!l){if(a.stateNode===null)throw Error(d(166));return ct(a),null}e=ve.current,gl(a)?lu(a):(e=Tm(n,l,s),a.stateNode=e,Qa(a))}return ct(a),null;case 5:if(_e(a),n=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==l&&Qa(a);else{if(!l){if(a.stateNode===null)throw Error(d(166));return ct(a),null}if(r=ve.current,gl(a))lu(a);else{var c=Xr(E.current);switch(r){case 1:r=c.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:r=c.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":r=c.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":r=c.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":r=c.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof l.is=="string"?c.createElement("select",{is:l.is}):c.createElement("select"),l.multiple?r.multiple=!0:l.size&&(r.size=l.size);break;default:r=typeof l.is=="string"?c.createElement(n,{is:l.is}):c.createElement(n)}}r[Rt]=a,r[Xt]=l;e:for(c=a.child;c!==null;){if(c.tag===5||c.tag===6)r.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}a.stateNode=r;e:switch(Bt(r,n,l),n){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Qa(a)}}return ct(a),Yc(a,a.type,e===null?null:e.memoizedProps,a.pendingProps,s),null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==l&&Qa(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(d(166));if(e=E.current,gl(a)){if(e=a.stateNode,s=a.memoizedProps,l=null,n=Ut,n!==null)switch(n.tag){case 27:case 5:l=n.memoizedProps}e[Rt]=a,e=!!(e.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||vm(e.nodeValue,s)),e||ss(a,!0)}else e=Xr(e).createTextNode(l),e[Rt]=a,a.stateNode=e}return ct(a),null;case 31:if(s=a.memoizedState,e===null||e.memoizedState!==null){if(l=gl(a),s!==null){if(e===null){if(!l)throw Error(d(318));if(e=a.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(557));e[Rt]=a}else qs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ct(a),e=!1}else s=tc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return a.flags&256?(la(a),a):(la(a),null);if((a.flags&128)!==0)throw Error(d(558))}return ct(a),null;case 13:if(l=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=gl(a),l!==null&&l.dehydrated!==null){if(e===null){if(!n)throw Error(d(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(d(317));n[Rt]=a}else qs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ct(a),n=!1}else n=tc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return a.flags&256?(la(a),a):(la(a),null)}return la(a),(a.flags&128)!==0?(a.lanes=s,a):(s=l!==null,e=e!==null&&e.memoizedState!==null,s&&(l=a.child,n=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(n=l.alternate.memoizedState.cachePool.pool),r=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==n&&(l.flags|=2048)),s!==e&&s&&(a.child.flags|=8192),Mr(a,a.updateQueue),ct(a),null);case 4:return he(),e===null&&fo(a.stateNode.containerInfo),ct(a),null;case 10:return Va(a.type),ct(a),null;case 19:if(ce(ht),l=a.memoizedState,l===null)return ct(a),null;if(n=(a.flags&128)!==0,r=l.rendering,r===null)if(n)bn(l,!1);else{if(gt!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(r=br(e),r!==null){for(a.flags|=128,bn(l,!1),e=r.updateQueue,a.updateQueue=e,Mr(a,e),a.subtreeFlags=0,e=s,s=a.child;s!==null;)Id(s,e),s=s.sibling;return re(ht,ht.current&1|2),Xe&&Oa(a,l.treeForkCount),a.child}e=e.sibling}l.tail!==null&&Ee()>Ur&&(a.flags|=128,n=!0,bn(l,!1),a.lanes=4194304)}else{if(!n)if(e=br(r),e!==null){if(a.flags|=128,n=!0,e=e.updateQueue,a.updateQueue=e,Mr(a,e),bn(l,!0),l.tail===null&&l.tailMode==="hidden"&&!r.alternate&&!Xe)return ct(a),null}else 2*Ee()-l.renderingStartTime>Ur&&s!==536870912&&(a.flags|=128,n=!0,bn(l,!1),a.lanes=4194304);l.isBackwards?(r.sibling=a.child,a.child=r):(e=l.last,e!==null?e.sibling=r:a.child=r,l.last=r)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Ee(),e.sibling=null,s=ht.current,re(ht,n?s&1|2:s&1),Xe&&Oa(a,l.treeForkCount),e):(ct(a),null);case 22:case 23:return la(a),fc(),l=a.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(s&536870912)!==0&&(a.flags&128)===0&&(ct(a),a.subtreeFlags&6&&(a.flags|=8192)):ct(a),s=a.updateQueue,s!==null&&Mr(a,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==s&&(a.flags|=2048),e!==null&&ce(Ls),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),Va(yt),ct(a),null;case 25:return null;case 30:return null}throw Error(d(156,a.tag))}function ag(e,a){switch(Ii(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return Va(yt),he(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return _e(a),null;case 31:if(a.memoizedState!==null){if(la(a),a.alternate===null)throw Error(d(340));qs()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 13:if(la(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(d(340));qs()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return ce(ht),null;case 4:return he(),null;case 10:return Va(a.type),null;case 22:case 23:return la(a),fc(),e!==null&&ce(Ls),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return Va(yt),null;case 25:return null;default:return null}}function zx(e,a){switch(Ii(a),a.tag){case 3:Va(yt),he();break;case 26:case 27:case 5:_e(a);break;case 4:he();break;case 31:a.memoizedState!==null&&la(a);break;case 13:la(a);break;case 19:ce(ht);break;case 10:Va(a.type);break;case 22:case 23:la(a),fc(),e!==null&&ce(Ls);break;case 24:Va(yt)}}function yn(e,a){try{var s=a.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var n=l.next;s=n;do{if((s.tag&e)===e){l=void 0;var r=s.create,c=s.inst;l=r(),c.destroy=l}s=s.next}while(s!==n)}}catch(x){et(a,a.return,x)}}function ds(e,a,s){try{var l=a.updateQueue,n=l!==null?l.lastEffect:null;if(n!==null){var r=n.next;l=r;do{if((l.tag&e)===e){var c=l.inst,x=c.destroy;if(x!==void 0){c.destroy=void 0,n=a;var w=s,q=x;try{q()}catch($){et(n,w,$)}}}l=l.next}while(l!==r)}}catch($){et(a,a.return,$)}}function kx(e){var a=e.updateQueue;if(a!==null){var s=e.stateNode;try{pu(a,s)}catch(l){et(e,e.return,l)}}}function Cx(e,a,s){s.props=Gs(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(l){et(e,a,l)}}function jn(e,a){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof s=="function"?e.refCleanup=s(l):s.current=l}}catch(n){et(e,a,n)}}function Ca(e,a){var s=e.ref,l=e.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(n){et(e,a,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(n){et(e,a,n)}else s.current=null}function Ex(e){var a=e.type,s=e.memoizedProps,l=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(n){et(e,e.return,n)}}function Xc(e,a,s){try{var l=e.stateNode;_g(l,e.type,s,a),l[Xt]=a}catch(n){et(e,e.return,n)}}function Ax(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ps(e.type)||e.tag===4}function Zc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ax(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ps(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Kc(e,a,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(e),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=Ra));else if(l!==4&&(l===27&&ps(e.type)&&(s=e.stateNode,a=null),e=e.child,e!==null))for(Kc(e,a,s),e=e.sibling;e!==null;)Kc(e,a,s),e=e.sibling}function Tr(e,a,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,a?s.insertBefore(e,a):s.appendChild(e);else if(l!==4&&(l===27&&ps(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Tr(e,a,s),e=e.sibling;e!==null;)Tr(e,a,s),e=e.sibling}function Mx(e){var a=e.stateNode,s=e.memoizedProps;try{for(var l=e.type,n=a.attributes;n.length;)a.removeAttributeNode(n[0]);Bt(a,l,s),a[Rt]=e,a[Xt]=s}catch(r){et(e,e.return,r)}}var Ya=!1,Nt=!1,$c=!1,Tx=typeof WeakSet=="function"?WeakSet:Set,Et=null;function sg(e,a){if(e=e.containerInfo,po=Ir,e=Qd(e),Gi(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var n=l.anchorOffset,r=l.focusNode;l=l.focusOffset;try{s.nodeType,r.nodeType}catch{s=null;break e}var c=0,x=-1,w=-1,q=0,$=0,ee=e,R=null;t:for(;;){for(var G;ee!==s||n!==0&&ee.nodeType!==3||(x=c+n),ee!==r||l!==0&&ee.nodeType!==3||(w=c+l),ee.nodeType===3&&(c+=ee.nodeValue.length),(G=ee.firstChild)!==null;)R=ee,ee=G;for(;;){if(ee===e)break t;if(R===s&&++q===n&&(x=c),R===r&&++$===l&&(w=c),(G=ee.nextSibling)!==null)break;ee=R,R=ee.parentNode}ee=G}s=x===-1||w===-1?null:{start:x,end:w}}else s=null}s=s||{start:0,end:0}}else s=null;for(bo={focusedElem:e,selectionRange:s},Ir=!1,Et=a;Et!==null;)if(a=Et,e=a.child,(a.subtreeFlags&1028)!==0&&e!==null)e.return=a,Et=e;else for(;Et!==null;){switch(a=Et,r=a.alternate,e=a.flags,a.tag){case 0:if((e&4)!==0&&(e=a.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)n=e[s],n.ref.impl=n.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,s=a,n=r.memoizedProps,r=r.memoizedState,l=s.stateNode;try{var ye=Gs(s.type,n);e=l.getSnapshotBeforeUpdate(ye,r),l.__reactInternalSnapshotBeforeUpdate=e}catch(ze){et(s,s.return,ze)}}break;case 3:if((e&1024)!==0){if(e=a.stateNode.containerInfo,s=e.nodeType,s===9)vo(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":vo(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(d(163))}if(e=a.sibling,e!==null){e.return=a.return,Et=e;break}Et=a.return}}function Dx(e,a,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:Za(e,s),l&4&&yn(5,s);break;case 1:if(Za(e,s),l&4)if(e=s.stateNode,a===null)try{e.componentDidMount()}catch(c){et(s,s.return,c)}else{var n=Gs(s.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(n,a,e.__reactInternalSnapshotBeforeUpdate)}catch(c){et(s,s.return,c)}}l&64&&kx(s),l&512&&jn(s,s.return);break;case 3:if(Za(e,s),l&64&&(e=s.updateQueue,e!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{pu(e,a)}catch(c){et(s,s.return,c)}}break;case 27:a===null&&l&4&&Mx(s);case 26:case 5:Za(e,s),a===null&&l&4&&Ex(s),l&512&&jn(s,s.return);break;case 12:Za(e,s);break;case 31:Za(e,s),l&4&&Ux(e,s);break;case 13:Za(e,s),l&4&&Lx(e,s),l&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=xg.bind(null,s),Tg(e,s))));break;case 22:if(l=s.memoizedState!==null||Ya,!l){a=a!==null&&a.memoizedState!==null||Nt,n=Ya;var r=Nt;Ya=l,(Nt=a)&&!r?Ka(e,s,(s.subtreeFlags&8772)!==0):Za(e,s),Ya=n,Nt=r}break;case 30:break;default:Za(e,s)}}function qx(e){var a=e.alternate;a!==null&&(e.alternate=null,qx(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&Si(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var dt=null,Kt=!1;function Xa(e,a,s){for(s=s.child;s!==null;)Rx(e,a,s),s=s.sibling}function Rx(e,a,s){if(ke&&typeof ke.onCommitFiberUnmount=="function")try{ke.onCommitFiberUnmount(qe,s)}catch{}switch(s.tag){case 26:Nt||Ca(s,a),Xa(e,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Nt||Ca(s,a);var l=dt,n=Kt;ps(s.type)&&(dt=s.stateNode,Kt=!1),Xa(e,a,s),En(s.stateNode),dt=l,Kt=n;break;case 5:Nt||Ca(s,a);case 6:if(l=dt,n=Kt,dt=null,Xa(e,a,s),dt=l,Kt=n,dt!==null)if(Kt)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(s.stateNode)}catch(r){et(s,a,r)}else try{dt.removeChild(s.stateNode)}catch(r){et(s,a,r)}break;case 18:dt!==null&&(Kt?(e=dt,km(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),Ul(e)):km(dt,s.stateNode));break;case 4:l=dt,n=Kt,dt=s.stateNode.containerInfo,Kt=!0,Xa(e,a,s),dt=l,Kt=n;break;case 0:case 11:case 14:case 15:ds(2,s,a),Nt||ds(4,s,a),Xa(e,a,s);break;case 1:Nt||(Ca(s,a),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Cx(s,a,l)),Xa(e,a,s);break;case 21:Xa(e,a,s);break;case 22:Nt=(l=Nt)||s.memoizedState!==null,Xa(e,a,s),Nt=l;break;default:Xa(e,a,s)}}function Ux(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ul(e)}catch(s){et(a,a.return,s)}}}function Lx(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ul(e)}catch(s){et(a,a.return,s)}}function lg(e){switch(e.tag){case 31:case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new Tx),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new Tx),a;default:throw Error(d(435,e.tag))}}function Dr(e,a){var s=lg(e);a.forEach(function(l){if(!s.has(l)){s.add(l);var n=mg.bind(null,e,l);l.then(n,n)}})}function $t(e,a){var s=a.deletions;if(s!==null)for(var l=0;l<s.length;l++){var n=s[l],r=e,c=a,x=c;e:for(;x!==null;){switch(x.tag){case 27:if(ps(x.type)){dt=x.stateNode,Kt=!1;break e}break;case 5:dt=x.stateNode,Kt=!1;break e;case 3:case 4:dt=x.stateNode.containerInfo,Kt=!0;break e}x=x.return}if(dt===null)throw Error(d(160));Rx(r,c,n),dt=null,Kt=!1,r=n.alternate,r!==null&&(r.return=null),n.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Ox(a,e),a=a.sibling}var Na=null;function Ox(e,a){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:$t(a,e),Jt(e),l&4&&(ds(3,e,e.return),yn(3,e),ds(5,e,e.return));break;case 1:$t(a,e),Jt(e),l&512&&(Nt||s===null||Ca(s,s.return)),l&64&&Ya&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var n=Na;if($t(a,e),Jt(e),l&512&&(Nt||s===null||Ca(s,s.return)),l&4){var r=s!==null?s.memoizedState:null;if(l=e.memoizedState,s===null)if(l===null)if(e.stateNode===null){e:{l=e.type,s=e.memoizedProps,n=n.ownerDocument||n;t:switch(l){case"title":r=n.getElementsByTagName("title")[0],(!r||r[Xl]||r[Rt]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=n.createElement(l),n.head.insertBefore(r,n.querySelector("head > title"))),Bt(r,l,s),r[Rt]=e,Ct(r),l=r;break e;case"link":var c=Om("link","href",n).get(l+(s.href||""));if(c){for(var x=0;x<c.length;x++)if(r=c[x],r.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&r.getAttribute("rel")===(s.rel==null?null:s.rel)&&r.getAttribute("title")===(s.title==null?null:s.title)&&r.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){c.splice(x,1);break t}}r=n.createElement(l),Bt(r,l,s),n.head.appendChild(r);break;case"meta":if(c=Om("meta","content",n).get(l+(s.content||""))){for(x=0;x<c.length;x++)if(r=c[x],r.getAttribute("content")===(s.content==null?null:""+s.content)&&r.getAttribute("name")===(s.name==null?null:s.name)&&r.getAttribute("property")===(s.property==null?null:s.property)&&r.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&r.getAttribute("charset")===(s.charSet==null?null:s.charSet)){c.splice(x,1);break t}}r=n.createElement(l),Bt(r,l,s),n.head.appendChild(r);break;default:throw Error(d(468,l))}r[Rt]=e,Ct(r),l=r}e.stateNode=l}else Bm(n,e.type,e.stateNode);else e.stateNode=Lm(n,l,e.memoizedProps);else r!==l?(r===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):r.count--,l===null?Bm(n,e.type,e.stateNode):Lm(n,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Xc(e,e.memoizedProps,s.memoizedProps)}break;case 27:$t(a,e),Jt(e),l&512&&(Nt||s===null||Ca(s,s.return)),s!==null&&l&4&&Xc(e,e.memoizedProps,s.memoizedProps);break;case 5:if($t(a,e),Jt(e),l&512&&(Nt||s===null||Ca(s,s.return)),e.flags&32){n=e.stateNode;try{nl(n,"")}catch(ye){et(e,e.return,ye)}}l&4&&e.stateNode!=null&&(n=e.memoizedProps,Xc(e,n,s!==null?s.memoizedProps:n)),l&1024&&($c=!0);break;case 6:if($t(a,e),Jt(e),l&4){if(e.stateNode===null)throw Error(d(162));l=e.memoizedProps,s=e.stateNode;try{s.nodeValue=l}catch(ye){et(e,e.return,ye)}}break;case 3:if($r=null,n=Na,Na=Zr(a.containerInfo),$t(a,e),Na=n,Jt(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{Ul(a.containerInfo)}catch(ye){et(e,e.return,ye)}$c&&($c=!1,Bx(e));break;case 4:l=Na,Na=Zr(e.stateNode.containerInfo),$t(a,e),Jt(e),Na=l;break;case 12:$t(a,e),Jt(e);break;case 31:$t(a,e),Jt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Dr(e,l)));break;case 13:$t(a,e),Jt(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Rr=Ee()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Dr(e,l)));break;case 22:n=e.memoizedState!==null;var w=s!==null&&s.memoizedState!==null,q=Ya,$=Nt;if(Ya=q||n,Nt=$||w,$t(a,e),Nt=$,Ya=q,Jt(e),l&8192)e:for(a=e.stateNode,a._visibility=n?a._visibility&-2:a._visibility|1,n&&(s===null||w||Ya||Nt||Fs(e)),s=null,a=e;;){if(a.tag===5||a.tag===26){if(s===null){w=s=a;try{if(r=w.stateNode,n)c=r.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none";else{x=w.stateNode;var ee=w.memoizedProps.style,R=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;x.style.display=R==null||typeof R=="boolean"?"":(""+R).trim()}}catch(ye){et(w,w.return,ye)}}}else if(a.tag===6){if(s===null){w=a;try{w.stateNode.nodeValue=n?"":w.memoizedProps}catch(ye){et(w,w.return,ye)}}}else if(a.tag===18){if(s===null){w=a;try{var G=w.stateNode;n?Cm(G,!0):Cm(w.stateNode,!1)}catch(ye){et(w,w.return,ye)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=e.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Dr(e,s))));break;case 19:$t(a,e),Jt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Dr(e,l)));break;case 30:break;case 21:break;default:$t(a,e),Jt(e)}}function Jt(e){var a=e.flags;if(a&2){try{for(var s,l=e.return;l!==null;){if(Ax(l)){s=l;break}l=l.return}if(s==null)throw Error(d(160));switch(s.tag){case 27:var n=s.stateNode,r=Zc(e);Tr(e,r,n);break;case 5:var c=s.stateNode;s.flags&32&&(nl(c,""),s.flags&=-33);var x=Zc(e);Tr(e,x,c);break;case 3:case 4:var w=s.stateNode.containerInfo,q=Zc(e);Kc(e,q,w);break;default:throw Error(d(161))}}catch($){et(e,e.return,$)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function Bx(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;Bx(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function Za(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Dx(e,a.alternate,a),a=a.sibling}function Fs(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:ds(4,a,a.return),Fs(a);break;case 1:Ca(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&Cx(a,a.return,s),Fs(a);break;case 27:En(a.stateNode);case 26:case 5:Ca(a,a.return),Fs(a);break;case 22:a.memoizedState===null&&Fs(a);break;case 30:Fs(a);break;default:Fs(a)}e=e.sibling}}function Ka(e,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,n=e,r=a,c=r.flags;switch(r.tag){case 0:case 11:case 15:Ka(n,r,s),yn(4,r);break;case 1:if(Ka(n,r,s),l=r,n=l.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(q){et(l,l.return,q)}if(l=r,n=l.updateQueue,n!==null){var x=l.stateNode;try{var w=n.shared.hiddenCallbacks;if(w!==null)for(n.shared.hiddenCallbacks=null,n=0;n<w.length;n++)hu(w[n],x)}catch(q){et(l,l.return,q)}}s&&c&64&&kx(r),jn(r,r.return);break;case 27:Mx(r);case 26:case 5:Ka(n,r,s),s&&l===null&&c&4&&Ex(r),jn(r,r.return);break;case 12:Ka(n,r,s);break;case 31:Ka(n,r,s),s&&c&4&&Ux(n,r);break;case 13:Ka(n,r,s),s&&c&4&&Lx(n,r);break;case 22:r.memoizedState===null&&Ka(n,r,s),jn(r,r.return);break;case 30:break;default:Ka(n,r,s)}a=a.sibling}}function Jc(e,a){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&nn(s))}function Pc(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&nn(e))}function wa(e,a,s,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Vx(e,a,s,l),a=a.sibling}function Vx(e,a,s,l){var n=a.flags;switch(a.tag){case 0:case 11:case 15:wa(e,a,s,l),n&2048&&yn(9,a);break;case 1:wa(e,a,s,l);break;case 3:wa(e,a,s,l),n&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&nn(e)));break;case 12:if(n&2048){wa(e,a,s,l),e=a.stateNode;try{var r=a.memoizedProps,c=r.id,x=r.onPostCommit;typeof x=="function"&&x(c,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(w){et(a,a.return,w)}}else wa(e,a,s,l);break;case 31:wa(e,a,s,l);break;case 13:wa(e,a,s,l);break;case 23:break;case 22:r=a.stateNode,c=a.alternate,a.memoizedState!==null?r._visibility&2?wa(e,a,s,l):vn(e,a):r._visibility&2?wa(e,a,s,l):(r._visibility|=2,Sl(e,a,s,l,(a.subtreeFlags&10256)!==0||!1)),n&2048&&Jc(c,a);break;case 24:wa(e,a,s,l),n&2048&&Pc(a.alternate,a);break;default:wa(e,a,s,l)}}function Sl(e,a,s,l,n){for(n=n&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var r=e,c=a,x=s,w=l,q=c.flags;switch(c.tag){case 0:case 11:case 15:Sl(r,c,x,w,n),yn(8,c);break;case 23:break;case 22:var $=c.stateNode;c.memoizedState!==null?$._visibility&2?Sl(r,c,x,w,n):vn(r,c):($._visibility|=2,Sl(r,c,x,w,n)),n&&q&2048&&Jc(c.alternate,c);break;case 24:Sl(r,c,x,w,n),n&&q&2048&&Pc(c.alternate,c);break;default:Sl(r,c,x,w,n)}a=a.sibling}}function vn(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=e,l=a,n=l.flags;switch(l.tag){case 22:vn(s,l),n&2048&&Jc(l.alternate,l);break;case 24:vn(s,l),n&2048&&Pc(l.alternate,l);break;default:vn(s,l)}a=a.sibling}}var Nn=8192;function zl(e,a,s){if(e.subtreeFlags&Nn)for(e=e.child;e!==null;)Hx(e,a,s),e=e.sibling}function Hx(e,a,s){switch(e.tag){case 26:zl(e,a,s),e.flags&Nn&&e.memoizedState!==null&&Qg(s,Na,e.memoizedState,e.memoizedProps);break;case 5:zl(e,a,s);break;case 3:case 4:var l=Na;Na=Zr(e.stateNode.containerInfo),zl(e,a,s),Na=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Nn,Nn=16777216,zl(e,a,s),Nn=l):zl(e,a,s));break;default:zl(e,a,s)}}function Gx(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function wn(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];Et=l,Qx(l,e)}Gx(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Fx(e),e=e.sibling}function Fx(e){switch(e.tag){case 0:case 11:case 15:wn(e),e.flags&2048&&ds(9,e,e.return);break;case 3:wn(e);break;case 12:wn(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,qr(e)):wn(e);break;default:wn(e)}}function qr(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];Et=l,Qx(l,e)}Gx(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:ds(8,a,a.return),qr(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,qr(a));break;default:qr(a)}e=e.sibling}}function Qx(e,a){for(;Et!==null;){var s=Et;switch(s.tag){case 0:case 11:case 15:ds(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:nn(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,Et=l;else e:for(s=e;Et!==null;){l=Et;var n=l.sibling,r=l.return;if(qx(l),l===s){Et=null;break e}if(n!==null){n.return=r,Et=n;break e}Et=r}}}var ng={getCacheForType:function(e){var a=Lt(yt),s=a.data.get(e);return s===void 0&&(s=e(),a.data.set(e,s)),s},cacheSignal:function(){return Lt(yt).controller.signal}},rg=typeof WeakMap=="function"?WeakMap:Map,We=0,rt=null,Be=null,Ge=0,Ie=0,na=null,us=!1,kl=!1,Wc=!1,$a=0,gt=0,xs=0,Qs=0,Ic=0,ra=0,Cl=0,_n=null,Pt=null,eo=!1,Rr=0,Yx=0,Ur=1/0,Lr=null,ms=null,_t=0,fs=null,El=null,Ja=0,to=0,ao=null,Xx=null,Sn=0,so=null;function ia(){return(We&2)!==0&&Ge!==0?Ge&-Ge:j.T!==null?oo():cd()}function Zx(){if(ra===0)if((Ge&536870912)===0||Xe){var e=Yt;Yt<<=1,(Yt&3932160)===0&&(Yt=262144),ra=e}else ra=536870912;return e=sa.current,e!==null&&(e.flags|=32),ra}function Wt(e,a,s){(e===rt&&(Ie===2||Ie===9)||e.cancelPendingCommit!==null)&&(Al(e,0),gs(e,Ge,ra,!1)),Yl(e,s),((We&2)===0||e!==rt)&&(e===rt&&((We&2)===0&&(Qs|=s),gt===4&&gs(e,Ge,ra,!1)),Ea(e))}function Kx(e,a,s){if((We&6)!==0)throw Error(d(327));var l=!s&&(a&127)===0&&(a&e.expiredLanes)===0||ks(e,a),n=l?og(e,a):no(e,a,!0),r=l;do{if(n===0){kl&&!l&&gs(e,a,0,!1);break}else{if(s=e.current.alternate,r&&!ig(s)){n=no(e,a,!1),r=!1;continue}if(n===2){if(r=a,e.errorRecoveryDisabledLanes&r)var c=0;else c=e.pendingLanes&-536870913,c=c!==0?c:c&536870912?536870912:0;if(c!==0){a=c;e:{var x=e;n=_n;var w=x.current.memoizedState.isDehydrated;if(w&&(Al(x,c).flags|=256),c=no(x,c,!1),c!==2){if(Wc&&!w){x.errorRecoveryDisabledLanes|=r,Qs|=r,n=4;break e}r=Pt,Pt=n,r!==null&&(Pt===null?Pt=r:Pt.push.apply(Pt,r))}n=c}if(r=!1,n!==2)continue}}if(n===1){Al(e,0),gs(e,a,0,!0);break}e:{switch(l=e,r=n,r){case 0:case 1:throw Error(d(345));case 4:if((a&4194048)!==a)break;case 6:gs(l,a,ra,!us);break e;case 2:Pt=null;break;case 3:case 5:break;default:throw Error(d(329))}if((a&62914560)===a&&(n=Rr+300-Ee(),10<n)){if(gs(l,a,ra,!us),zs(l,0,!0)!==0)break e;Ja=a,l.timeoutHandle=Sm($x.bind(null,l,s,Pt,Lr,eo,a,ra,Qs,Cl,us,r,"Throttled",-0,0),n);break e}$x(l,s,Pt,Lr,eo,a,ra,Qs,Cl,us,r,null,-0,0)}}break}while(!0);Ea(e)}function $x(e,a,s,l,n,r,c,x,w,q,$,ee,R,G){if(e.timeoutHandle=-1,ee=a.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ra},Hx(a,r,ee);var ye=(r&62914560)===r?Rr-Ee():(r&4194048)===r?Yx-Ee():0;if(ye=Yg(ee,ye),ye!==null){Ja=r,e.cancelPendingCommit=ye(sm.bind(null,e,a,r,s,l,n,c,x,w,$,ee,null,R,G)),gs(e,r,c,!q);return}}sm(e,a,r,s,l,n,c,x,w)}function ig(e){for(var a=e;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var n=s[l],r=n.getSnapshot;n=n.value;try{if(!ta(r(),n))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function gs(e,a,s,l){a&=~Ic,a&=~Qs,e.suspendedLanes|=a,e.pingedLanes&=~a,l&&(e.warmLanes|=a),l=e.expirationTimes;for(var n=a;0<n;){var r=31-Pe(n),c=1<<r;l[r]=-1,n&=~c}s!==0&&nd(e,s,a)}function Or(){return(We&6)===0?(zn(0),!1):!0}function lo(){if(Be!==null){if(Ie===0)var e=Be.return;else e=Be,Ba=Rs=null,jc(e),jl=null,cn=0,e=Be;for(;e!==null;)zx(e.alternate,e),e=e.return;Be=null}}function Al(e,a){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,kg(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Ja=0,lo(),rt=e,Be=s=La(e.current,null),Ge=a,Ie=0,na=null,us=!1,kl=ks(e,a),Wc=!1,Cl=ra=Ic=Qs=xs=gt=0,Pt=_n=null,eo=!1,(a&8)!==0&&(a|=a&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=a;0<l;){var n=31-Pe(l),r=1<<n;a|=e[n],l&=~r}return $a=a,nr(),s}function Jx(e,a){Re=null,j.H=hn,a===yl||a===mr?(a=xu(),Ie=3):a===cc?(a=xu(),Ie=4):Ie=a===Uc?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,na=a,Be===null&&(gt=1,kr(e,ma(a,e.current)))}function Px(){var e=sa.current;return e===null?!0:(Ge&4194048)===Ge?pa===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?e===pa:!1}function Wx(){var e=j.H;return j.H=hn,e===null?hn:e}function Ix(){var e=j.A;return j.A=ng,e}function Br(){gt=4,us||(Ge&4194048)!==Ge&&sa.current!==null||(kl=!0),(xs&134217727)===0&&(Qs&134217727)===0||rt===null||gs(rt,Ge,ra,!1)}function no(e,a,s){var l=We;We|=2;var n=Wx(),r=Ix();(rt!==e||Ge!==a)&&(Lr=null,Al(e,a)),a=!1;var c=gt;e:do try{if(Ie!==0&&Be!==null){var x=Be,w=na;switch(Ie){case 8:lo(),c=6;break e;case 3:case 2:case 9:case 6:sa.current===null&&(a=!0);var q=Ie;if(Ie=0,na=null,Ml(e,x,w,q),s&&kl){c=0;break e}break;default:q=Ie,Ie=0,na=null,Ml(e,x,w,q)}}cg(),c=gt;break}catch($){Jx(e,$)}while(!0);return a&&e.shellSuspendCounter++,Ba=Rs=null,We=l,j.H=n,j.A=r,Be===null&&(rt=null,Ge=0,nr()),c}function cg(){for(;Be!==null;)em(Be)}function og(e,a){var s=We;We|=2;var l=Wx(),n=Ix();rt!==e||Ge!==a?(Lr=null,Ur=Ee()+500,Al(e,a)):kl=ks(e,a);e:do try{if(Ie!==0&&Be!==null){a=Be;var r=na;t:switch(Ie){case 1:Ie=0,na=null,Ml(e,a,r,1);break;case 2:case 9:if(du(r)){Ie=0,na=null,tm(a);break}a=function(){Ie!==2&&Ie!==9||rt!==e||(Ie=7),Ea(e)},r.then(a,a);break e;case 3:Ie=7;break e;case 4:Ie=5;break e;case 7:du(r)?(Ie=0,na=null,tm(a)):(Ie=0,na=null,Ml(e,a,r,7));break;case 5:var c=null;switch(Be.tag){case 26:c=Be.memoizedState;case 5:case 27:var x=Be;if(c?Vm(c):x.stateNode.complete){Ie=0,na=null;var w=x.sibling;if(w!==null)Be=w;else{var q=x.return;q!==null?(Be=q,Vr(q)):Be=null}break t}}Ie=0,na=null,Ml(e,a,r,5);break;case 6:Ie=0,na=null,Ml(e,a,r,6);break;case 8:lo(),gt=6;break e;default:throw Error(d(462))}}dg();break}catch($){Jx(e,$)}while(!0);return Ba=Rs=null,j.H=l,j.A=n,We=s,Be!==null?0:(rt=null,Ge=0,nr(),gt)}function dg(){for(;Be!==null&&!Ae();)em(Be)}function em(e){var a=_x(e.alternate,e,$a);e.memoizedProps=e.pendingProps,a===null?Vr(e):Be=a}function tm(e){var a=e,s=a.alternate;switch(a.tag){case 15:case 0:a=bx(s,a,a.pendingProps,a.type,void 0,Ge);break;case 11:a=bx(s,a,a.pendingProps,a.type.render,a.ref,Ge);break;case 5:jc(a);default:zx(s,a),a=Be=Id(a,$a),a=_x(s,a,$a)}e.memoizedProps=e.pendingProps,a===null?Vr(e):Be=a}function Ml(e,a,s,l){Ba=Rs=null,jc(a),jl=null,cn=0;var n=a.return;try{if(Wf(e,n,a,s,Ge)){gt=1,kr(e,ma(s,e.current)),Be=null;return}}catch(r){if(n!==null)throw Be=n,r;gt=1,kr(e,ma(s,e.current)),Be=null;return}a.flags&32768?(Xe||l===1?e=!0:kl||(Ge&536870912)!==0?e=!1:(us=e=!0,(l===2||l===9||l===3||l===6)&&(l=sa.current,l!==null&&l.tag===13&&(l.flags|=16384))),am(a,e)):Vr(a)}function Vr(e){var a=e;do{if((a.flags&32768)!==0){am(a,us);return}e=a.return;var s=tg(a.alternate,a,$a);if(s!==null){Be=s;return}if(a=a.sibling,a!==null){Be=a;return}Be=a=e}while(a!==null);gt===0&&(gt=5)}function am(e,a){do{var s=ag(e.alternate,e);if(s!==null){s.flags&=32767,Be=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(e=e.sibling,e!==null)){Be=e;return}Be=e=s}while(e!==null);gt=6,Be=null}function sm(e,a,s,l,n,r,c,x,w){e.cancelPendingCommit=null;do Hr();while(_t!==0);if((We&6)!==0)throw Error(d(327));if(a!==null){if(a===e.current)throw Error(d(177));if(r=a.lanes|a.childLanes,r|=Zi,G0(e,s,r,c,x,w),e===rt&&(Be=rt=null,Ge=0),El=a,fs=e,Ja=s,to=r,ao=n,Xx=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,fg(Ye,function(){return cm(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=j.T,j.T=null,n=A.p,A.p=2,c=We,We|=4;try{sg(e,a,s)}finally{We=c,A.p=n,j.T=l}}_t=1,lm(),nm(),rm()}}function lm(){if(_t===1){_t=0;var e=fs,a=El,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=j.T,j.T=null;var l=A.p;A.p=2;var n=We;We|=4;try{Ox(a,e);var r=bo,c=Qd(e.containerInfo),x=r.focusedElem,w=r.selectionRange;if(c!==x&&x&&x.ownerDocument&&Fd(x.ownerDocument.documentElement,x)){if(w!==null&&Gi(x)){var q=w.start,$=w.end;if($===void 0&&($=q),"selectionStart"in x)x.selectionStart=q,x.selectionEnd=Math.min($,x.value.length);else{var ee=x.ownerDocument||document,R=ee&&ee.defaultView||window;if(R.getSelection){var G=R.getSelection(),ye=x.textContent.length,ze=Math.min(w.start,ye),nt=w.end===void 0?ze:Math.min(w.end,ye);!G.extend&&ze>nt&&(c=nt,nt=ze,ze=c);var M=Gd(x,ze),C=Gd(x,nt);if(M&&C&&(G.rangeCount!==1||G.anchorNode!==M.node||G.anchorOffset!==M.offset||G.focusNode!==C.node||G.focusOffset!==C.offset)){var D=ee.createRange();D.setStart(M.node,M.offset),G.removeAllRanges(),ze>nt?(G.addRange(D),G.extend(C.node,C.offset)):(D.setEnd(C.node,C.offset),G.addRange(D))}}}}for(ee=[],G=x;G=G.parentNode;)G.nodeType===1&&ee.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<ee.length;x++){var J=ee[x];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Ir=!!po,bo=po=null}finally{We=n,A.p=l,j.T=s}}e.current=a,_t=2}}function nm(){if(_t===2){_t=0;var e=fs,a=El,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=j.T,j.T=null;var l=A.p;A.p=2;var n=We;We|=4;try{Dx(e,a.alternate,a)}finally{We=n,A.p=l,j.T=s}}_t=3}}function rm(){if(_t===4||_t===3){_t=0,I();var e=fs,a=El,s=Ja,l=Xx;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?_t=5:(_t=0,El=fs=null,im(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(ms=null),wi(s),a=a.stateNode,ke&&typeof ke.onCommitFiberRoot=="function")try{ke.onCommitFiberRoot(qe,a,void 0,(a.current.flags&128)===128)}catch{}if(l!==null){a=j.T,n=A.p,A.p=2,j.T=null;try{for(var r=e.onRecoverableError,c=0;c<l.length;c++){var x=l[c];r(x.value,{componentStack:x.stack})}}finally{j.T=a,A.p=n}}(Ja&3)!==0&&Hr(),Ea(e),n=e.pendingLanes,(s&261930)!==0&&(n&42)!==0?e===so?Sn++:(Sn=0,so=e):Sn=0,zn(0)}}function im(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,nn(a)))}function Hr(){return lm(),nm(),rm(),cm()}function cm(){if(_t!==5)return!1;var e=fs,a=to;to=0;var s=wi(Ja),l=j.T,n=A.p;try{A.p=32>s?32:s,j.T=null,s=ao,ao=null;var r=fs,c=Ja;if(_t=0,El=fs=null,Ja=0,(We&6)!==0)throw Error(d(331));var x=We;if(We|=4,Fx(r.current),Vx(r,r.current,c,s),We=x,zn(0,!1),ke&&typeof ke.onPostCommitFiberRoot=="function")try{ke.onPostCommitFiberRoot(qe,r)}catch{}return!0}finally{A.p=n,j.T=l,im(e,a)}}function om(e,a,s){a=ma(s,a),a=Rc(e.stateNode,a,2),e=is(e,a,2),e!==null&&(Yl(e,2),Ea(e))}function et(e,a,s){if(e.tag===3)om(e,e,s);else for(;a!==null;){if(a.tag===3){om(a,e,s);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ms===null||!ms.has(l))){e=ma(s,e),s=dx(2),l=is(a,s,2),l!==null&&(ux(s,l,a,e),Yl(l,2),Ea(l));break}}a=a.return}}function ro(e,a,s){var l=e.pingCache;if(l===null){l=e.pingCache=new rg;var n=new Set;l.set(a,n)}else n=l.get(a),n===void 0&&(n=new Set,l.set(a,n));n.has(s)||(Wc=!0,n.add(s),e=ug.bind(null,e,a,s),a.then(e,e))}function ug(e,a,s){var l=e.pingCache;l!==null&&l.delete(a),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,rt===e&&(Ge&s)===s&&(gt===4||gt===3&&(Ge&62914560)===Ge&&300>Ee()-Rr?(We&2)===0&&Al(e,0):Ic|=s,Cl===Ge&&(Cl=0)),Ea(e)}function dm(e,a){a===0&&(a=ld()),e=Ts(e,a),e!==null&&(Yl(e,a),Ea(e))}function xg(e){var a=e.memoizedState,s=0;a!==null&&(s=a.retryLane),dm(e,s)}function mg(e,a){var s=0;switch(e.tag){case 31:case 13:var l=e.stateNode,n=e.memoizedState;n!==null&&(s=n.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(d(314))}l!==null&&l.delete(a),dm(e,s)}function fg(e,a){return fe(e,a)}var Gr=null,Tl=null,io=!1,Fr=!1,co=!1,hs=0;function Ea(e){e!==Tl&&e.next===null&&(Tl===null?Gr=Tl=e:Tl=Tl.next=e),Fr=!0,io||(io=!0,hg())}function zn(e,a){if(!co&&Fr){co=!0;do for(var s=!1,l=Gr;l!==null;){if(e!==0){var n=l.pendingLanes;if(n===0)var r=0;else{var c=l.suspendedLanes,x=l.pingedLanes;r=(1<<31-Pe(42|e)+1)-1,r&=n&~(c&~x),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(s=!0,fm(l,r))}else r=Ge,r=zs(l,l===rt?r:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(r&3)===0||ks(l,r)||(s=!0,fm(l,r));l=l.next}while(s);co=!1}}function gg(){um()}function um(){Fr=io=!1;var e=0;hs!==0&&zg()&&(e=hs);for(var a=Ee(),s=null,l=Gr;l!==null;){var n=l.next,r=xm(l,a);r===0?(l.next=null,s===null?Gr=n:s.next=n,n===null&&(Tl=s)):(s=l,(e!==0||(r&3)!==0)&&(Fr=!0)),l=n}_t!==0&&_t!==5||zn(e),hs!==0&&(hs=0)}function xm(e,a){for(var s=e.suspendedLanes,l=e.pingedLanes,n=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var c=31-Pe(r),x=1<<c,w=n[c];w===-1?((x&s)===0||(x&l)!==0)&&(n[c]=Ws(x,a)):w<=a&&(e.expiredLanes|=x),r&=~x}if(a=rt,s=Ge,s=zs(e,e===a?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,s===0||e===a&&(Ie===2||Ie===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&pe(l),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||ks(e,s)){if(a=s&-s,a===e.callbackPriority)return a;switch(l!==null&&pe(l),wi(s)){case 2:case 8:s=De;break;case 32:s=Ye;break;case 268435456:s=Dt;break;default:s=Ye}return l=mm.bind(null,e),s=fe(s,l),e.callbackPriority=a,e.callbackNode=s,a}return l!==null&&l!==null&&pe(l),e.callbackPriority=2,e.callbackNode=null,2}function mm(e,a){if(_t!==0&&_t!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Hr()&&e.callbackNode!==s)return null;var l=Ge;return l=zs(e,e===rt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Kx(e,l,a),xm(e,Ee()),e.callbackNode!=null&&e.callbackNode===s?mm.bind(null,e):null)}function fm(e,a){if(Hr())return null;Kx(e,a,!0)}function hg(){Cg(function(){(We&6)!==0?fe(Le,gg):um()})}function oo(){if(hs===0){var e=pl;e===0&&(e=Te,Te<<=1,(Te&261888)===0&&(Te=256)),hs=e}return hs}function gm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Pn(""+e)}function hm(e,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,e.id&&s.setAttribute("form",e.id),a.parentNode.insertBefore(s,a),e=new FormData(e),s.parentNode.removeChild(s),e}function pg(e,a,s,l,n){if(a==="submit"&&s&&s.stateNode===n){var r=gm((n[Xt]||null).action),c=l.submitter;c&&(a=(a=c[Xt]||null)?gm(a.formAction):c.getAttribute("formAction"),a!==null&&(r=a,c=null));var x=new tr("action","action",null,l,n);e.push({event:x,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(hs!==0){var w=c?hm(n,c):new FormData(n);Ec(s,{pending:!0,data:w,method:n.method,action:r},null,w)}}else typeof r=="function"&&(x.preventDefault(),w=c?hm(n,c):new FormData(n),Ec(s,{pending:!0,data:w,method:n.method,action:r},r,w))},currentTarget:n}]})}}for(var uo=0;uo<Xi.length;uo++){var xo=Xi[uo],bg=xo.toLowerCase(),yg=xo[0].toUpperCase()+xo.slice(1);va(bg,"on"+yg)}va(Zd,"onAnimationEnd"),va(Kd,"onAnimationIteration"),va($d,"onAnimationStart"),va("dblclick","onDoubleClick"),va("focusin","onFocus"),va("focusout","onBlur"),va(Rf,"onTransitionRun"),va(Uf,"onTransitionStart"),va(Lf,"onTransitionCancel"),va(Jd,"onTransitionEnd"),sl("onMouseEnter",["mouseout","mouseover"]),sl("onMouseLeave",["mouseout","mouseover"]),sl("onPointerEnter",["pointerout","pointerover"]),sl("onPointerLeave",["pointerout","pointerover"]),Cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Cs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kn));function pm(e,a){a=(a&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],n=l.event;l=l.listeners;e:{var r=void 0;if(a)for(var c=l.length-1;0<=c;c--){var x=l[c],w=x.instance,q=x.currentTarget;if(x=x.listener,w!==r&&n.isPropagationStopped())break e;r=x,n.currentTarget=q;try{r(n)}catch($){lr($)}n.currentTarget=null,r=w}else for(c=0;c<l.length;c++){if(x=l[c],w=x.instance,q=x.currentTarget,x=x.listener,w!==r&&n.isPropagationStopped())break e;r=x,n.currentTarget=q;try{r(n)}catch($){lr($)}n.currentTarget=null,r=w}}}}function Ve(e,a){var s=a[_i];s===void 0&&(s=a[_i]=new Set);var l=e+"__bubble";s.has(l)||(bm(a,e,2,!1),s.add(l))}function mo(e,a,s){var l=0;a&&(l|=4),bm(s,e,l,a)}var Qr="_reactListening"+Math.random().toString(36).slice(2);function fo(e){if(!e[Qr]){e[Qr]=!0,ud.forEach(function(s){s!=="selectionchange"&&(jg.has(s)||mo(s,!1,e),mo(s,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[Qr]||(a[Qr]=!0,mo("selectionchange",!1,a))}}function bm(e,a,s,l){switch(Zm(a)){case 2:var n=Kg;break;case 8:n=$g;break;default:n=Eo}s=n.bind(null,a,s,e),n=void 0,!Di||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(n=!0),l?n!==void 0?e.addEventListener(a,s,{capture:!0,passive:n}):e.addEventListener(a,s,!0):n!==void 0?e.addEventListener(a,s,{passive:n}):e.addEventListener(a,s,!1)}function go(e,a,s,l,n){var r=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var c=l.tag;if(c===3||c===4){var x=l.stateNode.containerInfo;if(x===n)break;if(c===4)for(c=l.return;c!==null;){var w=c.tag;if((w===3||w===4)&&c.stateNode.containerInfo===n)return;c=c.return}for(;x!==null;){if(c=el(x),c===null)return;if(w=c.tag,w===5||w===6||w===26||w===27){l=r=c;continue e}x=x.parentNode}}l=l.return}wd(function(){var q=r,$=Mi(s),ee=[];e:{var R=Pd.get(e);if(R!==void 0){var G=tr,ye=e;switch(e){case"keypress":if(In(s)===0)break e;case"keydown":case"keyup":G=mf;break;case"focusin":ye="focus",G=Li;break;case"focusout":ye="blur",G=Li;break;case"beforeblur":case"afterblur":G=Li;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=zd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=ef;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=hf;break;case Zd:case Kd:case $d:G=sf;break;case Jd:G=bf;break;case"scroll":case"scrollend":G=W0;break;case"wheel":G=jf;break;case"copy":case"cut":case"paste":G=nf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Cd;break;case"toggle":case"beforetoggle":G=Nf}var ze=(a&4)!==0,nt=!ze&&(e==="scroll"||e==="scrollend"),M=ze?R!==null?R+"Capture":null:R;ze=[];for(var C=q,D;C!==null;){var J=C;if(D=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||D===null||M===null||(J=Kl(C,M),J!=null&&ze.push(Cn(C,J,D))),nt)break;C=C.return}0<ze.length&&(R=new G(R,ye,null,s,$),ee.push({event:R,listeners:ze}))}}if((a&7)===0){e:{if(R=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",R&&s!==Ai&&(ye=s.relatedTarget||s.fromElement)&&(el(ye)||ye[Is]))break e;if((G||R)&&(R=$.window===$?$:(R=$.ownerDocument)?R.defaultView||R.parentWindow:window,G?(ye=s.relatedTarget||s.toElement,G=q,ye=ye?el(ye):null,ye!==null&&(nt=_(ye),ze=ye.tag,ye!==nt||ze!==5&&ze!==27&&ze!==6)&&(ye=null)):(G=null,ye=q),G!==ye)){if(ze=zd,J="onMouseLeave",M="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(ze=Cd,J="onPointerLeave",M="onPointerEnter",C="pointer"),nt=G==null?R:Zl(G),D=ye==null?R:Zl(ye),R=new ze(J,C+"leave",G,s,$),R.target=nt,R.relatedTarget=D,J=null,el($)===q&&(ze=new ze(M,C+"enter",ye,s,$),ze.target=D,ze.relatedTarget=nt,J=ze),nt=J,G&&ye)t:{for(ze=vg,M=G,C=ye,D=0,J=M;J;J=ze(J))D++;J=0;for(var Ne=C;Ne;Ne=ze(Ne))J++;for(;0<D-J;)M=ze(M),D--;for(;0<J-D;)C=ze(C),J--;for(;D--;){if(M===C||C!==null&&M===C.alternate){ze=M;break t}M=ze(M),C=ze(C)}ze=null}else ze=null;G!==null&&ym(ee,R,G,ze,!1),ye!==null&&nt!==null&&ym(ee,nt,ye,ze,!0)}}e:{if(R=q?Zl(q):window,G=R.nodeName&&R.nodeName.toLowerCase(),G==="select"||G==="input"&&R.type==="file")var $e=Ud;else if(qd(R))if(Ld)$e=Tf;else{$e=Af;var je=Ef}else G=R.nodeName,!G||G.toLowerCase()!=="input"||R.type!=="checkbox"&&R.type!=="radio"?q&&Ei(q.elementType)&&($e=Ud):$e=Mf;if($e&&($e=$e(e,q))){Rd(ee,$e,s,$);break e}je&&je(e,R,q),e==="focusout"&&q&&R.type==="number"&&q.memoizedProps.value!=null&&Ci(R,"number",R.value)}switch(je=q?Zl(q):window,e){case"focusin":(qd(je)||je.contentEditable==="true")&&(ol=je,Fi=q,an=null);break;case"focusout":an=Fi=ol=null;break;case"mousedown":Qi=!0;break;case"contextmenu":case"mouseup":case"dragend":Qi=!1,Yd(ee,s,$);break;case"selectionchange":if(qf)break;case"keydown":case"keyup":Yd(ee,s,$)}var Ue;if(Bi)e:{switch(e){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else cl?Td(e,s)&&(Fe="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Fe="onCompositionStart");Fe&&(Ed&&s.locale!=="ko"&&(cl||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&cl&&(Ue=_d()):(es=$,qi="value"in es?es.value:es.textContent,cl=!0)),je=Yr(q,Fe),0<je.length&&(Fe=new kd(Fe,e,null,s,$),ee.push({event:Fe,listeners:je}),Ue?Fe.data=Ue:(Ue=Dd(s),Ue!==null&&(Fe.data=Ue)))),(Ue=_f?Sf(e,s):zf(e,s))&&(Fe=Yr(q,"onBeforeInput"),0<Fe.length&&(je=new kd("onBeforeInput","beforeinput",null,s,$),ee.push({event:je,listeners:Fe}),je.data=Ue)),pg(ee,e,q,s,$)}pm(ee,a)})}function Cn(e,a,s){return{instance:e,listener:a,currentTarget:s}}function Yr(e,a){for(var s=a+"Capture",l=[];e!==null;){var n=e,r=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||r===null||(n=Kl(e,s),n!=null&&l.unshift(Cn(e,n,r)),n=Kl(e,a),n!=null&&l.push(Cn(e,n,r))),e.tag===3)return l;e=e.return}return[]}function vg(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ym(e,a,s,l,n){for(var r=a._reactName,c=[];s!==null&&s!==l;){var x=s,w=x.alternate,q=x.stateNode;if(x=x.tag,w!==null&&w===l)break;x!==5&&x!==26&&x!==27||q===null||(w=q,n?(q=Kl(s,r),q!=null&&c.unshift(Cn(s,q,w))):n||(q=Kl(s,r),q!=null&&c.push(Cn(s,q,w)))),s=s.return}c.length!==0&&e.push({event:a,listeners:c})}var Ng=/\r\n?/g,wg=/\u0000|\uFFFD/g;function jm(e){return(typeof e=="string"?e:""+e).replace(Ng,`
`).replace(wg,"")}function vm(e,a){return a=jm(a),jm(e)===a}function lt(e,a,s,l,n,r){switch(s){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||nl(e,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&nl(e,""+l);break;case"className":$n(e,"class",l);break;case"tabIndex":$n(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":$n(e,s,l);break;case"style":vd(e,l,r);break;case"data":if(a!=="object"){$n(e,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||s!=="href")){e.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Pn(""+l),e.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(s==="formAction"?(a!=="input"&&lt(e,a,"name",n.name,n,null),lt(e,a,"formEncType",n.formEncType,n,null),lt(e,a,"formMethod",n.formMethod,n,null),lt(e,a,"formTarget",n.formTarget,n,null)):(lt(e,a,"encType",n.encType,n,null),lt(e,a,"method",n.method,n,null),lt(e,a,"target",n.target,n,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Pn(""+l),e.setAttribute(s,l);break;case"onClick":l!=null&&(e.onclick=Ra);break;case"onScroll":l!=null&&Ve("scroll",e);break;case"onScrollEnd":l!=null&&Ve("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(s=l.__html,s!=null){if(n.children!=null)throw Error(d(60));e.innerHTML=s}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}s=Pn(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""+l):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":l===!0?e.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,l):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(s,l):e.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(s):e.setAttribute(s,l);break;case"popover":Ve("beforetoggle",e),Ve("toggle",e),Kn(e,"popover",l);break;case"xlinkActuate":qa(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":qa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":qa(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":qa(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":qa(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":qa(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":qa(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":qa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":qa(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Kn(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=J0.get(s)||s,Kn(e,s,l))}}function ho(e,a,s,l,n,r){switch(s){case"style":vd(e,l,r);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(s=l.__html,s!=null){if(n.children!=null)throw Error(d(60));e.innerHTML=s}}break;case"children":typeof l=="string"?nl(e,l):(typeof l=="number"||typeof l=="bigint")&&nl(e,""+l);break;case"onScroll":l!=null&&Ve("scroll",e);break;case"onScrollEnd":l!=null&&Ve("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Ra);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xd.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(n=s.endsWith("Capture"),a=s.slice(2,n?s.length-7:void 0),r=e[Xt]||null,r=r!=null?r[s]:null,typeof r=="function"&&e.removeEventListener(a,r,n),typeof l=="function")){typeof r!="function"&&r!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(a,l,n);break e}s in e?e[s]=l:l===!0?e.setAttribute(s,""):Kn(e,s,l)}}}function Bt(e,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",e),Ve("load",e);var l=!1,n=!1,r;for(r in s)if(s.hasOwnProperty(r)){var c=s[r];if(c!=null)switch(r){case"src":l=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,a));default:lt(e,a,r,c,s,null)}}n&&lt(e,a,"srcSet",s.srcSet,s,null),l&&lt(e,a,"src",s.src,s,null);return;case"input":Ve("invalid",e);var x=r=c=n=null,w=null,q=null;for(l in s)if(s.hasOwnProperty(l)){var $=s[l];if($!=null)switch(l){case"name":n=$;break;case"type":c=$;break;case"checked":w=$;break;case"defaultChecked":q=$;break;case"value":r=$;break;case"defaultValue":x=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(d(137,a));break;default:lt(e,a,l,$,s,null)}}pd(e,r,x,w,q,c,n,!1);return;case"select":Ve("invalid",e),l=c=r=null;for(n in s)if(s.hasOwnProperty(n)&&(x=s[n],x!=null))switch(n){case"value":r=x;break;case"defaultValue":c=x;break;case"multiple":l=x;default:lt(e,a,n,x,s,null)}a=r,s=c,e.multiple=!!l,a!=null?ll(e,!!l,a,!1):s!=null&&ll(e,!!l,s,!0);return;case"textarea":Ve("invalid",e),r=n=l=null;for(c in s)if(s.hasOwnProperty(c)&&(x=s[c],x!=null))switch(c){case"value":l=x;break;case"defaultValue":n=x;break;case"children":r=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(d(91));break;default:lt(e,a,c,x,s,null)}yd(e,l,n,r);return;case"option":for(w in s)if(s.hasOwnProperty(w)&&(l=s[w],l!=null))switch(w){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:lt(e,a,w,l,s,null)}return;case"dialog":Ve("beforetoggle",e),Ve("toggle",e),Ve("cancel",e),Ve("close",e);break;case"iframe":case"object":Ve("load",e);break;case"video":case"audio":for(l=0;l<kn.length;l++)Ve(kn[l],e);break;case"image":Ve("error",e),Ve("load",e);break;case"details":Ve("toggle",e);break;case"embed":case"source":case"link":Ve("error",e),Ve("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in s)if(s.hasOwnProperty(q)&&(l=s[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,a));default:lt(e,a,q,l,s,null)}return;default:if(Ei(a)){for($ in s)s.hasOwnProperty($)&&(l=s[$],l!==void 0&&ho(e,a,$,l,s,void 0));return}}for(x in s)s.hasOwnProperty(x)&&(l=s[x],l!=null&&lt(e,a,x,l,s,null))}function _g(e,a,s,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,r=null,c=null,x=null,w=null,q=null,$=null;for(G in s){var ee=s[G];if(s.hasOwnProperty(G)&&ee!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":w=ee;default:l.hasOwnProperty(G)||lt(e,a,G,null,l,ee)}}for(var R in l){var G=l[R];if(ee=s[R],l.hasOwnProperty(R)&&(G!=null||ee!=null))switch(R){case"type":r=G;break;case"name":n=G;break;case"checked":q=G;break;case"defaultChecked":$=G;break;case"value":c=G;break;case"defaultValue":x=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(d(137,a));break;default:G!==ee&&lt(e,a,R,G,l,ee)}}ki(e,c,x,w,q,$,r,n);return;case"select":G=c=x=R=null;for(r in s)if(w=s[r],s.hasOwnProperty(r)&&w!=null)switch(r){case"value":break;case"multiple":G=w;default:l.hasOwnProperty(r)||lt(e,a,r,null,l,w)}for(n in l)if(r=l[n],w=s[n],l.hasOwnProperty(n)&&(r!=null||w!=null))switch(n){case"value":R=r;break;case"defaultValue":x=r;break;case"multiple":c=r;default:r!==w&&lt(e,a,n,r,l,w)}a=x,s=c,l=G,R!=null?ll(e,!!s,R,!1):!!l!=!!s&&(a!=null?ll(e,!!s,a,!0):ll(e,!!s,s?[]:"",!1));return;case"textarea":G=R=null;for(x in s)if(n=s[x],s.hasOwnProperty(x)&&n!=null&&!l.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:lt(e,a,x,null,l,n)}for(c in l)if(n=l[c],r=s[c],l.hasOwnProperty(c)&&(n!=null||r!=null))switch(c){case"value":R=n;break;case"defaultValue":G=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(d(91));break;default:n!==r&&lt(e,a,c,n,l,r)}bd(e,R,G);return;case"option":for(var ye in s)if(R=s[ye],s.hasOwnProperty(ye)&&R!=null&&!l.hasOwnProperty(ye))switch(ye){case"selected":e.selected=!1;break;default:lt(e,a,ye,null,l,R)}for(w in l)if(R=l[w],G=s[w],l.hasOwnProperty(w)&&R!==G&&(R!=null||G!=null))switch(w){case"selected":e.selected=R&&typeof R!="function"&&typeof R!="symbol";break;default:lt(e,a,w,R,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in s)R=s[ze],s.hasOwnProperty(ze)&&R!=null&&!l.hasOwnProperty(ze)&&lt(e,a,ze,null,l,R);for(q in l)if(R=l[q],G=s[q],l.hasOwnProperty(q)&&R!==G&&(R!=null||G!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(d(137,a));break;default:lt(e,a,q,R,l,G)}return;default:if(Ei(a)){for(var nt in s)R=s[nt],s.hasOwnProperty(nt)&&R!==void 0&&!l.hasOwnProperty(nt)&&ho(e,a,nt,void 0,l,R);for($ in l)R=l[$],G=s[$],!l.hasOwnProperty($)||R===G||R===void 0&&G===void 0||ho(e,a,$,R,l,G);return}}for(var M in s)R=s[M],s.hasOwnProperty(M)&&R!=null&&!l.hasOwnProperty(M)&&lt(e,a,M,null,l,R);for(ee in l)R=l[ee],G=s[ee],!l.hasOwnProperty(ee)||R===G||R==null&&G==null||lt(e,a,ee,R,l,G)}function Nm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Sg(){if(typeof performance.getEntriesByType=="function"){for(var e=0,a=0,s=performance.getEntriesByType("resource"),l=0;l<s.length;l++){var n=s[l],r=n.transferSize,c=n.initiatorType,x=n.duration;if(r&&x&&Nm(c)){for(c=0,x=n.responseEnd,l+=1;l<s.length;l++){var w=s[l],q=w.startTime;if(q>x)break;var $=w.transferSize,ee=w.initiatorType;$&&Nm(ee)&&(w=w.responseEnd,c+=$*(w<x?1:(x-q)/(w-q)))}if(--l,a+=8*(r+c)/(n.duration/1e3),e++,10<e)break}}if(0<e)return a/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var po=null,bo=null;function Xr(e){return e.nodeType===9?e:e.ownerDocument}function wm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _m(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function yo(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var jo=null;function zg(){var e=window.event;return e&&e.type==="popstate"?e===jo?!1:(jo=e,!0):(jo=null,!1)}var Sm=typeof setTimeout=="function"?setTimeout:void 0,kg=typeof clearTimeout=="function"?clearTimeout:void 0,zm=typeof Promise=="function"?Promise:void 0,Cg=typeof queueMicrotask=="function"?queueMicrotask:typeof zm<"u"?function(e){return zm.resolve(null).then(e).catch(Eg)}:Sm;function Eg(e){setTimeout(function(){throw e})}function ps(e){return e==="head"}function km(e,a){var s=a,l=0;do{var n=s.nextSibling;if(e.removeChild(s),n&&n.nodeType===8)if(s=n.data,s==="/$"||s==="/&"){if(l===0){e.removeChild(n),Ul(a);return}l--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")l++;else if(s==="html")En(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,En(s);for(var r=s.firstChild;r;){var c=r.nextSibling,x=r.nodeName;r[Xl]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&r.rel.toLowerCase()==="stylesheet"||s.removeChild(r),r=c}}else s==="body"&&En(e.ownerDocument.body);s=n}while(s);Ul(a)}function Cm(e,a){var s=e;e=0;do{var l=s.nextSibling;if(s.nodeType===1?a?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(a?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=l}while(s)}function vo(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":vo(s),Si(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function Ag(e,a,s,l){for(;e.nodeType===1;){var n=s;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Xl])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var r=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=ba(e.nextSibling),e===null)break}return null}function Mg(e,a,s){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=ba(e.nextSibling),e===null))return null;return e}function Em(e,a){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ba(e.nextSibling),e===null))return null;return e}function No(e){return e.data==="$?"||e.data==="$~"}function wo(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Tg(e,a){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=a;else if(e.data!=="$?"||s.readyState!=="loading")a();else{var l=function(){a(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function ba(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return e}var _o=null;function Am(e){e=e.nextSibling;for(var a=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(a===0)return ba(e.nextSibling);a--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||a++}e=e.nextSibling}return null}function Mm(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(a===0)return e;a--}else s!=="/$"&&s!=="/&"||a++}e=e.previousSibling}return null}function Tm(e,a,s){switch(a=Xr(s),e){case"html":if(e=a.documentElement,!e)throw Error(d(452));return e;case"head":if(e=a.head,!e)throw Error(d(453));return e;case"body":if(e=a.body,!e)throw Error(d(454));return e;default:throw Error(d(451))}}function En(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);Si(e)}var ya=new Map,Dm=new Set;function Zr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Pa=A.d;A.d={f:Dg,r:qg,D:Rg,C:Ug,L:Lg,m:Og,X:Vg,S:Bg,M:Hg};function Dg(){var e=Pa.f(),a=Or();return e||a}function qg(e){var a=tl(e);a!==null&&a.tag===5&&a.type==="form"?Ju(a):Pa.r(e)}var Dl=typeof document>"u"?null:document;function qm(e,a,s){var l=Dl;if(l&&typeof a=="string"&&a){var n=ua(a);n='link[rel="'+e+'"][href="'+n+'"]',typeof s=="string"&&(n+='[crossorigin="'+s+'"]'),Dm.has(n)||(Dm.add(n),e={rel:e,crossOrigin:s,href:a},l.querySelector(n)===null&&(a=l.createElement("link"),Bt(a,"link",e),Ct(a),l.head.appendChild(a)))}}function Rg(e){Pa.D(e),qm("dns-prefetch",e,null)}function Ug(e,a){Pa.C(e,a),qm("preconnect",e,a)}function Lg(e,a,s){Pa.L(e,a,s);var l=Dl;if(l&&e&&a){var n='link[rel="preload"][as="'+ua(a)+'"]';a==="image"&&s&&s.imageSrcSet?(n+='[imagesrcset="'+ua(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(n+='[imagesizes="'+ua(s.imageSizes)+'"]')):n+='[href="'+ua(e)+'"]';var r=n;switch(a){case"style":r=ql(e);break;case"script":r=Rl(e)}ya.has(r)||(e=g({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:e,as:a},s),ya.set(r,e),l.querySelector(n)!==null||a==="style"&&l.querySelector(An(r))||a==="script"&&l.querySelector(Mn(r))||(a=l.createElement("link"),Bt(a,"link",e),Ct(a),l.head.appendChild(a)))}}function Og(e,a){Pa.m(e,a);var s=Dl;if(s&&e){var l=a&&typeof a.as=="string"?a.as:"script",n='link[rel="modulepreload"][as="'+ua(l)+'"][href="'+ua(e)+'"]',r=n;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Rl(e)}if(!ya.has(r)&&(e=g({rel:"modulepreload",href:e},a),ya.set(r,e),s.querySelector(n)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Mn(r)))return}l=s.createElement("link"),Bt(l,"link",e),Ct(l),s.head.appendChild(l)}}}function Bg(e,a,s){Pa.S(e,a,s);var l=Dl;if(l&&e){var n=al(l).hoistableStyles,r=ql(e);a=a||"default";var c=n.get(r);if(!c){var x={loading:0,preload:null};if(c=l.querySelector(An(r)))x.loading=5;else{e=g({rel:"stylesheet",href:e,"data-precedence":a},s),(s=ya.get(r))&&So(e,s);var w=c=l.createElement("link");Ct(w),Bt(w,"link",e),w._p=new Promise(function(q,$){w.onload=q,w.onerror=$}),w.addEventListener("load",function(){x.loading|=1}),w.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Kr(c,a,l)}c={type:"stylesheet",instance:c,count:1,state:x},n.set(r,c)}}}function Vg(e,a){Pa.X(e,a);var s=Dl;if(s&&e){var l=al(s).hoistableScripts,n=Rl(e),r=l.get(n);r||(r=s.querySelector(Mn(n)),r||(e=g({src:e,async:!0},a),(a=ya.get(n))&&zo(e,a),r=s.createElement("script"),Ct(r),Bt(r,"link",e),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(n,r))}}function Hg(e,a){Pa.M(e,a);var s=Dl;if(s&&e){var l=al(s).hoistableScripts,n=Rl(e),r=l.get(n);r||(r=s.querySelector(Mn(n)),r||(e=g({src:e,async:!0,type:"module"},a),(a=ya.get(n))&&zo(e,a),r=s.createElement("script"),Ct(r),Bt(r,"link",e),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(n,r))}}function Rm(e,a,s,l){var n=(n=E.current)?Zr(n):null;if(!n)throw Error(d(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=ql(s.href),s=al(n).hoistableStyles,l=s.get(a),l||(l={type:"style",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=ql(s.href);var r=al(n).hoistableStyles,c=r.get(e);if(c||(n=n.ownerDocument||n,c={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,c),(r=n.querySelector(An(e)))&&!r._p&&(c.instance=r,c.state.loading=5),ya.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},ya.set(e,s),r||Gg(n,e,s,c.state))),a&&l===null)throw Error(d(528,""));return c}if(a&&l!==null)throw Error(d(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Rl(s),s=al(n).hoistableScripts,l=s.get(a),l||(l={type:"script",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,e))}}function ql(e){return'href="'+ua(e)+'"'}function An(e){return'link[rel="stylesheet"]['+e+"]"}function Um(e){return g({},e,{"data-precedence":e.precedence,precedence:null})}function Gg(e,a,s,l){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=e.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),Bt(a,"link",s),Ct(a),e.head.appendChild(a))}function Rl(e){return'[src="'+ua(e)+'"]'}function Mn(e){return"script[async]"+e}function Lm(e,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var l=e.querySelector('style[data-href~="'+ua(s.href)+'"]');if(l)return a.instance=l,Ct(l),l;var n=g({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Ct(l),Bt(l,"style",n),Kr(l,s.precedence,e),a.instance=l;case"stylesheet":n=ql(s.href);var r=e.querySelector(An(n));if(r)return a.state.loading|=4,a.instance=r,Ct(r),r;l=Um(s),(n=ya.get(n))&&So(l,n),r=(e.ownerDocument||e).createElement("link"),Ct(r);var c=r;return c._p=new Promise(function(x,w){c.onload=x,c.onerror=w}),Bt(r,"link",l),a.state.loading|=4,Kr(r,s.precedence,e),a.instance=r;case"script":return r=Rl(s.src),(n=e.querySelector(Mn(r)))?(a.instance=n,Ct(n),n):(l=s,(n=ya.get(r))&&(l=g({},s),zo(l,n)),e=e.ownerDocument||e,n=e.createElement("script"),Ct(n),Bt(n,"link",l),e.head.appendChild(n),a.instance=n);case"void":return null;default:throw Error(d(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,Kr(l,s.precedence,e));return a.instance}function Kr(e,a,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=l.length?l[l.length-1]:null,r=n,c=0;c<l.length;c++){var x=l[c];if(x.dataset.precedence===a)r=x;else if(r!==n)break}r?r.parentNode.insertBefore(e,r.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(e,a.firstChild))}function So(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function zo(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var $r=null;function Om(e,a,s){if($r===null){var l=new Map,n=$r=new Map;n.set(s,l)}else n=$r,l=n.get(s),l||(l=new Map,n.set(s,l));if(l.has(e))return l;for(l.set(e,null),s=s.getElementsByTagName(e),n=0;n<s.length;n++){var r=s[n];if(!(r[Xl]||r[Rt]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var c=r.getAttribute(a)||"";c=e+c;var x=l.get(c);x?x.push(r):l.set(c,[r])}}return l}function Bm(e,a,s){e=e.ownerDocument||e,e.head.insertBefore(s,a==="title"?e.querySelector("head > title"):null)}function Fg(e,a,s){if(s===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return e=a.disabled,typeof a.precedence=="string"&&e==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Vm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Qg(e,a,s,l){if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var n=ql(l.href),r=a.querySelector(An(n));if(r){a=r._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(e.count++,e=Jr.bind(e),a.then(e,e)),s.state.loading|=4,s.instance=r,Ct(r);return}r=a.ownerDocument||a,l=Um(l),(n=ya.get(n))&&So(l,n),r=r.createElement("link"),Ct(r);var c=r;c._p=new Promise(function(x,w){c.onload=x,c.onerror=w}),Bt(r,"link",l),s.instance=r}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Jr.bind(e),a.addEventListener("load",s),a.addEventListener("error",s))}}var ko=0;function Yg(e,a){return e.stylesheets&&e.count===0&&Wr(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var l=setTimeout(function(){if(e.stylesheets&&Wr(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4+a);0<e.imgBytes&&ko===0&&(ko=62500*Sg());var n=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Wr(e,e.stylesheets),e.unsuspend)){var r=e.unsuspend;e.unsuspend=null,r()}},(e.imgBytes>ko?50:800)+a);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(n)}}:null}function Jr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Pr=null;function Wr(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Pr=new Map,a.forEach(Xg,e),Pr=null,Jr.call(e))}function Xg(e,a){if(!(a.state.loading&4)){var s=Pr.get(e);if(s)var l=s.get(null);else{s=new Map,Pr.set(e,s);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<n.length;r++){var c=n[r];(c.nodeName==="LINK"||c.getAttribute("media")!=="not all")&&(s.set(c.dataset.precedence,c),l=c)}l&&s.set(null,l)}n=a.instance,c=n.getAttribute("data-precedence"),r=s.get(c)||l,r===l&&s.set(null,n),s.set(c,n),this.count++,l=Jr.bind(this),n.addEventListener("load",l),n.addEventListener("error",l),r?r.parentNode.insertBefore(n,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),a.state.loading|=4}}var Tn={$$typeof:ie,Provider:null,Consumer:null,_currentValue:B,_currentValue2:B,_threadCount:0};function Zg(e,a,s,l,n,r,c,x,w){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vi(0),this.hiddenUpdates=vi(null),this.identifierPrefix=l,this.onUncaughtError=n,this.onCaughtError=r,this.onRecoverableError=c,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function Hm(e,a,s,l,n,r,c,x,w,q,$,ee){return e=new Zg(e,a,s,c,w,q,$,ee,x),a=1,r===!0&&(a|=24),r=aa(3,null,null,a),e.current=r,r.stateNode=e,a=nc(),a.refCount++,e.pooledCache=a,a.refCount++,r.memoizedState={element:l,isDehydrated:s,cache:a},oc(r),e}function Gm(e){return e?(e=xl,e):xl}function Fm(e,a,s,l,n,r){n=Gm(n),l.context===null?l.context=n:l.pendingContext=n,l=rs(a),l.payload={element:s},r=r===void 0?null:r,r!==null&&(l.callback=r),s=is(e,l,a),s!==null&&(Wt(s,e,a),dn(s,e,a))}function Qm(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<a?s:a}}function Co(e,a){Qm(e,a),(e=e.alternate)&&Qm(e,a)}function Ym(e){if(e.tag===13||e.tag===31){var a=Ts(e,67108864);a!==null&&Wt(a,e,67108864),Co(e,67108864)}}function Xm(e){if(e.tag===13||e.tag===31){var a=ia();a=Ni(a);var s=Ts(e,a);s!==null&&Wt(s,e,a),Co(e,a)}}var Ir=!0;function Kg(e,a,s,l){var n=j.T;j.T=null;var r=A.p;try{A.p=2,Eo(e,a,s,l)}finally{A.p=r,j.T=n}}function $g(e,a,s,l){var n=j.T;j.T=null;var r=A.p;try{A.p=8,Eo(e,a,s,l)}finally{A.p=r,j.T=n}}function Eo(e,a,s,l){if(Ir){var n=Ao(l);if(n===null)go(e,a,l,ei,s),Km(e,l);else if(Pg(n,e,a,s,l))l.stopPropagation();else if(Km(e,l),a&4&&-1<Jg.indexOf(e)){for(;n!==null;){var r=tl(n);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var c=ja(r.pendingLanes);if(c!==0){var x=r;for(x.pendingLanes|=2,x.entangledLanes|=2;c;){var w=1<<31-Pe(c);x.entanglements[1]|=w,c&=~w}Ea(r),(We&6)===0&&(Ur=Ee()+500,zn(0))}}break;case 31:case 13:x=Ts(r,2),x!==null&&Wt(x,r,2),Or(),Co(r,2)}if(r=Ao(l),r===null&&go(e,a,l,ei,s),r===n)break;n=r}n!==null&&l.stopPropagation()}else go(e,a,l,null,s)}}function Ao(e){return e=Mi(e),Mo(e)}var ei=null;function Mo(e){if(ei=null,e=el(e),e!==null){var a=_(e);if(a===null)e=null;else{var s=a.tag;if(s===13){if(e=b(a),e!==null)return e;e=null}else if(s===31){if(e=z(a),e!==null)return e;e=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return ei=e,null}function Zm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qe()){case Le:return 2;case De:return 8;case Ye:case Ht:return 32;case Dt:return 268435456;default:return 32}default:return 32}}var To=!1,bs=null,ys=null,js=null,Dn=new Map,qn=new Map,vs=[],Jg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Km(e,a){switch(e){case"focusin":case"focusout":bs=null;break;case"dragenter":case"dragleave":ys=null;break;case"mouseover":case"mouseout":js=null;break;case"pointerover":case"pointerout":Dn.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":qn.delete(a.pointerId)}}function Rn(e,a,s,l,n,r){return e===null||e.nativeEvent!==r?(e={blockedOn:a,domEventName:s,eventSystemFlags:l,nativeEvent:r,targetContainers:[n]},a!==null&&(a=tl(a),a!==null&&Ym(a)),e):(e.eventSystemFlags|=l,a=e.targetContainers,n!==null&&a.indexOf(n)===-1&&a.push(n),e)}function Pg(e,a,s,l,n){switch(a){case"focusin":return bs=Rn(bs,e,a,s,l,n),!0;case"dragenter":return ys=Rn(ys,e,a,s,l,n),!0;case"mouseover":return js=Rn(js,e,a,s,l,n),!0;case"pointerover":var r=n.pointerId;return Dn.set(r,Rn(Dn.get(r)||null,e,a,s,l,n)),!0;case"gotpointercapture":return r=n.pointerId,qn.set(r,Rn(qn.get(r)||null,e,a,s,l,n)),!0}return!1}function $m(e){var a=el(e.target);if(a!==null){var s=_(a);if(s!==null){if(a=s.tag,a===13){if(a=b(s),a!==null){e.blockedOn=a,od(e.priority,function(){Xm(s)});return}}else if(a===31){if(a=z(s),a!==null){e.blockedOn=a,od(e.priority,function(){Xm(s)});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ti(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var s=Ao(e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);Ai=l,s.target.dispatchEvent(l),Ai=null}else return a=tl(s),a!==null&&Ym(a),e.blockedOn=s,!1;a.shift()}return!0}function Jm(e,a,s){ti(e)&&s.delete(a)}function Wg(){To=!1,bs!==null&&ti(bs)&&(bs=null),ys!==null&&ti(ys)&&(ys=null),js!==null&&ti(js)&&(js=null),Dn.forEach(Jm),qn.forEach(Jm)}function ai(e,a){e.blockedOn===a&&(e.blockedOn=null,To||(To=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Wg)))}var si=null;function Pm(e){si!==e&&(si=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){si===e&&(si=null);for(var a=0;a<e.length;a+=3){var s=e[a],l=e[a+1],n=e[a+2];if(typeof l!="function"){if(Mo(l||s)===null)continue;break}var r=tl(s);r!==null&&(e.splice(a,3),a-=3,Ec(r,{pending:!0,data:n,method:s.method,action:l},l,n))}}))}function Ul(e){function a(w){return ai(w,e)}bs!==null&&ai(bs,e),ys!==null&&ai(ys,e),js!==null&&ai(js,e),Dn.forEach(a),qn.forEach(a);for(var s=0;s<vs.length;s++){var l=vs[s];l.blockedOn===e&&(l.blockedOn=null)}for(;0<vs.length&&(s=vs[0],s.blockedOn===null);)$m(s),s.blockedOn===null&&vs.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var n=s[l],r=s[l+1],c=n[Xt]||null;if(typeof r=="function")c||Pm(s);else if(c){var x=null;if(r&&r.hasAttribute("formAction")){if(n=r,c=r[Xt]||null)x=c.formAction;else if(Mo(n)!==null)continue}else x=c.action;typeof x=="function"?s[l+1]=x:(s.splice(l,3),l-=3),Pm(s)}}}function Wm(){function e(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(c){return n=c})},focusReset:"manual",scroll:"manual"})}function a(){n!==null&&(n(),n=null),l||setTimeout(s,20)}function s(){if(!l&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,n=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(s,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),n!==null&&(n(),n=null)}}}function Do(e){this._internalRoot=e}li.prototype.render=Do.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(d(409));var s=a.current,l=ia();Fm(s,l,e,a,null,null)},li.prototype.unmount=Do.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;Fm(e.current,2,null,e,null,null),Or(),a[Is]=null}};function li(e){this._internalRoot=e}li.prototype.unstable_scheduleHydration=function(e){if(e){var a=cd();e={blockedOn:null,target:e,priority:a};for(var s=0;s<vs.length&&a!==0&&a<vs[s].priority;s++);vs.splice(s,0,e),s===0&&$m(e)}};var Im=u.version;if(Im!=="19.2.3")throw Error(d(527,Im,"19.2.3"));A.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(d(188)):(e=Object.keys(e).join(","),Error(d(268,e)));return e=m(a),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var Ig={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ni=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ni.isDisabled&&ni.supportsFiber)try{qe=ni.inject(Ig),ke=ni}catch{}}return Ln.createRoot=function(e,a){if(!h(e))throw Error(d(299));var s=!1,l="",n=rx,r=ix,c=cx;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(n=a.onUncaughtError),a.onCaughtError!==void 0&&(r=a.onCaughtError),a.onRecoverableError!==void 0&&(c=a.onRecoverableError)),a=Hm(e,1,!1,null,null,s,l,null,n,r,c,Wm),e[Is]=a.current,fo(e),new Do(a)},Ln.hydrateRoot=function(e,a,s){if(!h(e))throw Error(d(299));var l=!1,n="",r=rx,c=ix,x=cx,w=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onUncaughtError!==void 0&&(r=s.onUncaughtError),s.onCaughtError!==void 0&&(c=s.onCaughtError),s.onRecoverableError!==void 0&&(x=s.onRecoverableError),s.formState!==void 0&&(w=s.formState)),a=Hm(e,1,!0,a,s??null,l,n,w,r,c,x,Wm),a.context=Gm(null),s=a.current,l=ia(),l=Ni(l),n=rs(l),n.callback=null,is(s,n,l),s=l,a.current.lanes=s,Yl(a,s),Ea(a),e[Is]=a.current,fo(e),new li(a)},Ln.version="19.2.3",Ln}var n0;function mh(){if(n0)return Ro.exports;n0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(u){console.error(u)}}return i(),Ro.exports=xh(),Ro.exports}var fh=mh();const v0=o.createContext(void 0);function gh({children:i}){const[u,f]=o.useState([]),d=o.useCallback((m,y="info",g)=>{const v=`toast-${Date.now()}-${Math.random()}`,N={id:v,message:m,type:y,duration:g};return f(H=>[...H,N]),v},[]),h=o.useCallback(m=>{f(y=>y.filter(g=>g.id!==m))},[]),_=o.useCallback((m,y)=>d(m,"success",y),[d]),b=o.useCallback((m,y)=>d(m,"error",y),[d]),z=o.useCallback((m,y)=>d(m,"warning",y),[d]),p=o.useCallback((m,y)=>d(m,"info",y),[d]);return t.jsx(v0.Provider,{value:{showToast:d,success:_,error:b,warning:z,info:p,toasts:u,removeToast:h},children:i})}function Da(){const i=o.useContext(v0);if(!i)throw new Error("useToastContext must be used within a ToastProvider");return i}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),N0=(...i)=>i.filter((u,f,d)=>!!u&&u.trim()!==""&&d.indexOf(u)===f).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ph={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=o.forwardRef(({color:i="currentColor",size:u=24,strokeWidth:f=2,absoluteStrokeWidth:d,className:h="",children:_,iconNode:b,...z},p)=>o.createElement("svg",{ref:p,...ph,width:u,height:u,stroke:i,strokeWidth:d?Number(f)*24/Number(u):f,className:N0("lucide",h),...z},[...b.map(([m,y])=>o.createElement(m,y)),...Array.isArray(_)?_:[_]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=(i,u)=>{const f=o.forwardRef(({className:d,...h},_)=>o.createElement(bh,{ref:_,iconNode:u,className:N0(`lucide-${hh(i)}`,d),...h}));return f.displayName=`${i}`,f};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=ne("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=ne("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=ne("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=ne("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=ne("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=ne("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=ne("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=ne("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=ne("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=ne("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=ne("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=ne("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=ne("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=ne("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=ne("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=ne("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=ne("ChefHat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=ne("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=ne("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=ne("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=ne("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=ne("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=ne("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=ne("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=ne("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=ne("CloudLightning",[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=ne("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=ne("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=ne("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=ne("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=ne("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=ne("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=ne("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=ne("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=ne("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=ne("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=ne("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=ne("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=ne("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=ne("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=ne("HardHat",[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=ne("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=ne("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=ne("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=ne("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=ne("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=ne("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=ne("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=ne("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=ne("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=ne("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=ne("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=ne("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=ne("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=ne("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=ne("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=ne("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=ne("PaintBucket",[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=ne("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=ne("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=ne("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=ne("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=ne("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=ne("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=ne("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=ne("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=ne("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=ne("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=ne("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=ne("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=ne("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=ne("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=ne("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=ne("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=ne("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=ne("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=ne("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=ne("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=ne("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=ne("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=ne("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=ne("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=ne("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=ne("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=ne("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=ne("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=ne("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=ne("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=ne("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=ne("Wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=ne("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=ne("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function tp({toast:i,onRemove:u}){const[f,d]=o.useState(!1),[h,_]=o.useState(!1);o.useEffect(()=>{setTimeout(()=>d(!0),10);const p=i.duration||5e3,m=setTimeout(()=>{_(!0),setTimeout(()=>u(i.id),300)},p);return()=>clearTimeout(m)},[i,u]);const b={success:t.jsx(Oe,{size:20,className:"text-green-500"}),error:t.jsx(hi,{size:20,className:"text-red-500"}),warning:t.jsx(Tt,{size:20,className:"text-yellow-500"}),info:t.jsx(Vn,{size:20,className:"text-blue-500"})},z={success:"bg-green-50 border-green-200 text-green-800",error:"bg-red-50 border-red-200 text-red-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",info:"bg-blue-50 border-blue-200 text-blue-800"};return t.jsxs("div",{className:`
        relative flex items-start gap-3 px-4 py-3 rounded-xl border shadow-lg
        transition-all duration-300 ease-out
        ${z[i.type]}
        ${f&&!h?"opacity-100 translate-x-0":"opacity-0 translate-x-full"}
        ${h?"opacity-0 scale-95":""}
        max-w-sm
      `,role:"alert","aria-live":"polite",children:[t.jsx("div",{className:"flex-shrink-0 mt-0.5",children:b[i.type]}),t.jsx("p",{className:"flex-1 text-sm font-medium leading-relaxed",children:i.message}),t.jsx("button",{onClick:()=>{_(!0),setTimeout(()=>u(i.id),300)},className:"flex-shrink-0 p-1 rounded-lg hover:bg-black/5 transition-colors","aria-label":"Fermer la notification",children:t.jsx(at,{size:16})})]})}function ap({toasts:i,onRemove:u}){return t.jsx("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-2 pointer-events-none","aria-live":"polite","aria-atomic":"true",children:i.map(f=>t.jsx("div",{className:"pointer-events-auto",children:t.jsx(tp,{toast:f,onRemove:u})},f.id))})}function sp(){const[i,u]=o.useState(navigator.onLine),[f,d]=o.useState(!1);return o.useEffect(()=>{const h=()=>{u(!0),d(!1)},_=()=>{u(!1),d(!0)};return window.addEventListener("online",h),window.addEventListener("offline",_),navigator.onLine||d(!0),()=>{window.removeEventListener("online",h),window.removeEventListener("offline",_)}},[]),i&&!f?null:i&&f?t.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-green-500 text-white px-4 py-3 shadow-lg animate-in slide-in-from-top duration-300",children:t.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3",children:[t.jsx(Ih,{size:20}),t.jsx("span",{className:"font-medium",children:"Connexion rtablie !"})]})}):t.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-red-500 text-white px-4 py-3 shadow-lg",children:t.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-3",children:[t.jsx(Wh,{size:20}),t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"font-medium",children:"Vous tes hors ligne"}),t.jsx("span",{className:"ml-2 text-sm opacity-90",children:"Vrifiez votre connexion internet et ressayez."})]}),t.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-1 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-medium transition-colors",children:"Ressayer"})]})})}function lp(){const{pathname:i}=Ko();return o.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"}),document.documentElement.scrollTop=0,document.body.scrollTop=0,"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[i]),null}const np="https://snhoxuqaskgoownshvgr.supabase.co",rp="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNuaG94dXFhc2tnb293bnNodmdyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY4NDgzOTMsImV4cCI6MjA4MjQyNDM5M30.W1JqBhoIQfYMJ72KdcJnM2MFu7a2-iZThWKQ1xOVnPE",k=ih(np,rp,{auth:{persistSession:!0,storage:localStorage,autoRefreshToken:!0,detectSessionInUrl:!0,storageKey:"mbourake-auth"}});function ut(){const[i,u]=o.useState({user:null,session:null,loading:!0});o.useEffect(()=>{let b=!0;k.auth.getSession().then(({data:p})=>{var m;b&&u({user:((m=p.session)==null?void 0:m.user)??null,session:p.session??null,loading:!1})}).catch(p=>{b&&(console.warn("Erreur lors du chargement de la session:",p),u({user:null,session:null,loading:!1}))});const{data:z}=k.auth.onAuthStateChange((p,m)=>{var y,g;p!=="INITIAL_SESSION"&&console.log("[useAuth] Auth state changed:",{event:p,hasUser:!!(m!=null&&m.user),userId:(y=m==null?void 0:m.user)==null?void 0:y.id,email:(g=m==null?void 0:m.user)==null?void 0:g.email}),u(v=>{var ae,Y;const N=(m==null?void 0:m.user)??null,H=m??null;return((ae=v.user)==null?void 0:ae.id)===(N==null?void 0:N.id)&&((Y=v.session)==null?void 0:Y.access_token)===(H==null?void 0:H.access_token)?v:{user:N,session:H,loading:!1}})});return()=>{b=!1,z.subscription.unsubscribe()}},[]);const f=o.useCallback(async(b="signup",z)=>{var y,g,v;console.log("[useAuth] signInWithGoogle appel avec mode:",b,"role:",z),console.log("[useAuth] URL actuelle:",window.location.href),console.log("[useAuth] Origin:",window.location.origin);const p=new URLSearchParams({mode:b});z&&p.set("role",z);const m=`${window.location.origin}/onboard?${p.toString()}`;console.log("[useAuth] Google OAuth redirectTo configur:",m);try{console.log("[useAuth] Tentative de connexion Google OAuth avec redirectTo:",m);const{data:N,error:H}=await k.auth.signInWithOAuth({provider:"google",options:{redirectTo:m,queryParams:{access_type:"offline",prompt:"select_account"}}});if(H)throw console.error("[useAuth] Erreur Google OAuth:",H),console.error("[useAuth] Dtails erreur:",{message:H.message,status:H.status,name:H.name}),(y=H.message)!=null&&y.includes("redirect")||(g=H.message)!=null&&g.includes("URL")||(v=H.message)!=null&&v.includes("mismatch")?new Error("Erreur de configuration OAuth. Vrifiez que l'URL de redirection est configure dans Supabase Dashboard: Settings  Authentication  URL Configuration  Redirect URLs. Ajoutez: "+m+" Si le problme persiste, vrifiez aussi Google Cloud Console."):H;if(console.log("[useAuth] Google OAuth initi avec succs"),console.log("[useAuth] Data retourne:",N),console.log("[useAuth] URL de redirection Google:",N==null?void 0:N.url),N!=null&&N.url)console.log("[useAuth] Redirection automatique vers Google OAuth dans 100ms..."),setTimeout(()=>{window.location.href=N.url},100);else throw console.warn("[useAuth] Pas d'URL de redirection retourne par Supabase"),new Error("Aucune URL de redirection retourne par Supabase. Vrifiez la configuration OAuth.")}catch(N){throw console.error("[useAuth] Exception lors de l'initiation OAuth:",N),N}},[]),d=o.useCallback(async(b,z)=>{const{error:p}=await k.auth.signInWithPassword({email:b,password:z});if(p)throw p},[]),h=o.useCallback(async(b,z)=>{const{error:p}=await k.auth.signUp({email:b,password:z});if(p)throw p},[]),_=o.useCallback(async()=>{const{error:b}=await k.auth.signOut();if(b)throw b},[]);return o.useMemo(()=>({user:i.user,session:i.session,loading:i.loading,signInWithGoogle:(b,z)=>f(b,z),signInWithPassword:d,signUpWithPassword:h,signOut:_}),[i.user,i.session,i.loading,f,d,h,_])}function _a({children:i}){const u=ut();if(u.loading)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-brand-500 border-t-transparent rounded-full animate-spin"}),t.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Chargement..."})]})});if(!u.user){const f=window.location.pathname+window.location.search;return t.jsx(Yo,{to:`/onboard?mode=login&redirect=${encodeURIComponent(f)}`,replace:!0})}return t.jsx(t.Fragment,{children:i})}function Vt(){const i=ut(),[u,f]=o.useState({profile:null,loading:!0});o.useEffect(()=>{let h=!0;return(async()=>{var m,y,g,v,N;if(!i.user){if(!h)return;f({profile:null,loading:!1});return}if(!h)return;f(H=>({...H,loading:!0}));const{data:b,error:z}=await k.from("profiles").select(`
          *,
          artisans!artisans_id_fkey(category_id)
        `).eq("id",i.user.id).maybeSingle();if(!h)return;if(z){((m=z.message)==null?void 0:m.toLowerCase().includes("failed to fetch"))||((y=z.message)==null?void 0:y.toLowerCase().includes("network"))||((g=z.message)==null?void 0:g.toLowerCase().includes("connection"))||((v=z.message)==null?void 0:v.toLowerCase().includes("timeout"))||console.error("Erreur lors du chargement du profil:",z),f({profile:null,loading:!1});return}const p=b?{...b,category_id:((N=b.artisans)==null?void 0:N.category_id)??b.category_id??null}:null;f({profile:p,loading:!1})})(),()=>{h=!1}},[i.user]);const d=o.useCallback(async h=>{var y,g,v;if(!i.user)throw new Error("Not authenticated");const _=((y=i.user.user_metadata)==null?void 0:y.avatar_url)||((g=i.user.user_metadata)==null?void 0:g.picture)||null,{error:b}=await k.from("profiles").upsert({id:i.user.id,email:i.user.email??null,full_name:h.full_name,role:h.role,avatar_url:_,phone:h.phone??null,location:h.location??null,updated_at:new Date().toISOString()});if(b)throw b;if(h.role==="artisan"){const{error:N}=await k.from("artisans").upsert({id:i.user.id,user_id:i.user.id,category_id:h.category_id??null,bio:h.bio??null,specialty:h.specialty??null,portfolio_urls:h.portfolio_urls??[],updated_at:new Date().toISOString()});if(N)throw N}const{data:z,error:p}=await k.from("profiles").select(`
          *,
          artisans!artisans_id_fkey(category_id)
        `).eq("id",i.user.id).single();if(p)throw p;const m=z?{...z,category_id:((v=z.artisans)==null?void 0:v.category_id)??z.category_id??null}:null;f({profile:m,loading:!1})},[i.user]);return o.useMemo(()=>({profile:u.profile,loading:u.loading,upsertProfile:d}),[u.profile,u.loading,d])}function Ll({children:i}){const{user:u,loading:f}=ut(),{profile:d,loading:h}=Vt();if(f||h)return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-brand-500 border-t-transparent rounded-full animate-spin"}),t.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Vrification des permissions..."})]})});if(!u){const _=window.location.pathname+window.location.search;return t.jsx(Yo,{to:`/login?redirect=${encodeURIComponent(_)}`,replace:!0})}return(d==null?void 0:d.role)!=="admin"?t.jsx(Yo,{to:"/dashboard",replace:!0}):t.jsx(t.Fragment,{children:i})}const o0=[{id:1,name:"Maonnerie Gnrale",icon_name:"hard-hat",slug:"maconnerie-gen"},{id:2,name:"Maonnerie de Finition",icon_name:"hard-hat",slug:"maconnerie-fin"},{id:3,name:"Ferraillage",icon_name:"grid",slug:"ferraillage"},{id:4,name:"Coffrage Btiment",icon_name:"grid",slug:"coffrage"},{id:5,name:"Charpente Mtallique",icon_name:"wrench",slug:"charpente-met"},{id:6,name:"Charpente Bois",icon_name:"hammer",slug:"charpente-bois"},{id:7,name:"Plomberie Sanitaire",icon_name:"droplets",slug:"plomberie-san"},{id:8,name:"Plomberie Industrielle",icon_name:"droplets",slug:"plomberie-ind"},{id:9,name:"Installation Pompe  eau",icon_name:"droplets",slug:"pompe-eau"},{id:10,name:"lectricit Btiment",icon_name:"zap",slug:"elec-bat"},{id:11,name:"lectricit Industrielle",icon_name:"zap",slug:"elec-ind"},{id:12,name:"lectricit Solaire",icon_name:"sun",slug:"elec-sol"},{id:13,name:"Installation Paratonnerre",icon_name:"cloud-lightning",slug:"paratonnerre"},{id:14,name:"Peinture Intrieure",icon_name:"paint-bucket",slug:"peinture-int"},{id:15,name:"Peinture Extrieure",icon_name:"paint-bucket",slug:"peinture-ext"},{id:16,name:"Peinture Industrielle",icon_name:"paint-bucket",slug:"peinture-ind"},{id:17,name:"Carrelage & Dallage",icon_name:"layout-grid",slug:"carrelage"},{id:18,name:"Pose de Marbre",icon_name:"layout-grid",slug:"marbre"},{id:19,name:"tanchit Terrasse",icon_name:"umbrella",slug:"etancheite-ter"},{id:20,name:"tanchit Toiture",icon_name:"umbrella",slug:"etancheite-toit"},{id:21,name:"Menuiserie Bois Massif",icon_name:"hammer",slug:"menuiserie-bois-massif"},{id:22,name:"Menuiserie Aluminium",icon_name:"grid",slug:"menuiserie-alu"},{id:23,name:"Menuiserie PVC",icon_name:"grid",slug:"menuiserie-pvc"},{id:24,name:"Vranda & Pergola",icon_name:"home",slug:"veranda"},{id:25,name:"Pltrerie & Staff",icon_name:"layout",slug:"platrerie"},{id:26,name:"Vitrerie & Miroiterie",icon_name:"square",slug:"vitrerie"},{id:27,name:"Soudure  l'arc",icon_name:"wrench",slug:"soudure-arc"},{id:28,name:"Soudure Argon",icon_name:"wrench",slug:"soudure-argon"},{id:29,name:"Ferronnerie d'Art",icon_name:"anvil",slug:"ferronnerie"},{id:30,name:"Climatisation Rsidentielle",icon_name:"cloud-lightning",slug:"clim-res"},{id:31,name:"Climatisation Centralise",icon_name:"cloud-lightning",slug:"clim-cent"},{id:32,name:"Froid Commercial",icon_name:"thermometer-snowflake",slug:"froid-comm"},{id:33,name:"Ascenseur & Escalier Mca",icon_name:"arrow-up-down",slug:"ascenseur"},{id:34,name:"Domotique & Smart Home",icon_name:"home",slug:"domotique"},{id:35,name:"Piscine & Jacuzzi",icon_name:"droplets",slug:"piscine"},{id:36,name:"Installation Gaz Cuisine",icon_name:"flame",slug:"gaz-cuisine"},{id:37,name:"chafaudage Pro",icon_name:"layers",slug:"echafaudage"},{id:38,name:"Isolation Thermique",icon_name:"shield",slug:"isolation-therm"},{id:39,name:"Ponage Parquet",icon_name:"sparkles",slug:"poncage-parquet"},{id:40,name:"Ponage Marbre",icon_name:"sparkles",slug:"poncage-marbre"},{id:41,name:"Stores & Volets Roulants",icon_name:"panel-top",slug:"stores"},{id:42,name:"Signaltique Enseignes",icon_name:"info",slug:"signaletique"},{id:43,name:"Forage & Puits",icon_name:"droplets",slug:"forage"},{id:44,name:"Mcanique Essence",icon_name:"car",slug:"meca-essence"},{id:45,name:"Mcanique Diesel",icon_name:"car",slug:"meca-diesel"},{id:46,name:"lectricit Automobile",icon_name:"zap",slug:"elec-auto"},{id:47,name:"Tlerie & Carrosserie",icon_name:"car",slug:"tolerie"},{id:48,name:"Peinture Automobile",icon_name:"paint-bucket",slug:"peinture-auto"},{id:49,name:"Vulcanisation & Pneus",icon_name:"circle-dot",slug:"vulcanisation"},{id:50,name:"Mcanique Moto",icon_name:"bike",slug:"meca-moto"},{id:51,name:"Mcanique Poids Lourds",icon_name:"truck",slug:"meca-camion"},{id:52,name:"Mcanique Engins BTP",icon_name:"truck",slug:"meca-engins"},{id:53,name:"Diagnostic lectronique",icon_name:"cpu",slug:"diag-auto"},{id:54,name:"Lavage & Lustrage",icon_name:"waves",slug:"lavage-auto"},{id:55,name:"Tapisserie Automobile",icon_name:"armchair",slug:"tapisserie-auto"},{id:56,name:"Location Vhicule Priv",icon_name:"key",slug:"location-auto"},{id:57,name:"Chauffeur Priv",icon_name:"user",slug:"chauffeur-prive"},{id:58,name:"Livreur Urbain (Moto)",icon_name:"package",slug:"livreur-moto"},{id:59,name:"Livreur Urbain (Vlo)",icon_name:"bike",slug:"livreur-velo"},{id:60,name:"Dmnagement Camion",icon_name:"truck",slug:"demenagement-camion"},{id:61,name:"Transport de Marchandises",icon_name:"truck",slug:"transport-marchandises"},{id:62,name:"Coursier Express",icon_name:"package",slug:"coursier"},{id:63,name:"Rparation Vlo",icon_name:"bike",slug:"rep-velo"},{id:64,name:"Couture Homme Traditionnelle",icon_name:"scissors",slug:"couture-homme-trad"},{id:65,name:"Couture Femme Traditionnelle",icon_name:"scissors",slug:"couture-femme-trad"},{id:66,name:"Couture Prt--porter",icon_name:"scissors",slug:"couture-pap"},{id:67,name:"Stylisme & Modlisme",icon_name:"palette",slug:"stylisme"},{id:68,name:"Bijouterie Or & Argent",icon_name:"gem",slug:"bijouterie"},{id:69,name:"Maroquinerie Sacs",icon_name:"briefcase",slug:"maroquinerie-sacs"},{id:70,name:"Maroquinerie Chaussures",icon_name:"briefcase",slug:"maroquinerie-chaussures"},{id:71,name:"Cordonnerie & Rparation",icon_name:"footprints",slug:"cordonnerie"},{id:72,name:"Tissage de Perruques",icon_name:"sparkles",slug:"tissage"},{id:73,name:"Coiffure Homme (Barbier)",icon_name:"user",slug:"coiffure-homme"},{id:74,name:"Coiffure Femme (Tresses)",icon_name:"user-round",slug:"coiffure-femme-tresses"},{id:75,name:"Coiffure Femme (Chignons)",icon_name:"user-round",slug:"coiffure-femme-chignons"},{id:76,name:"Esthtique & Maquillage",icon_name:"flower2",slug:"esthetique"},{id:77,name:"Soins du Visage",icon_name:"flower2",slug:"soins-visage"},{id:78,name:"Teinture Textile (Thioup)",icon_name:"palette",slug:"teinture-thioup"},{id:79,name:"Batik & Artisanat",icon_name:"brush",slug:"batik"},{id:80,name:"Poterie & Cramique",icon_name:"flower",slug:"poterie"},{id:81,name:"Vannerie & Paniers",icon_name:"shopping-basket",slug:"vannerie"},{id:82,name:"Sculpture Bois Dcor",icon_name:"hammer",slug:"sculpture-bois"},{id:83,name:"Sculpture Pierre",icon_name:"hammer",slug:"sculpture-pierre"},{id:84,name:"Tapisserie Ameublement",icon_name:"armchair",slug:"tapisserie-ameublement"},{id:85,name:"Rideaux & Dco Textile",icon_name:"palette",slug:"rideaux"},{id:86,name:"Blanchisserie & Pressing",icon_name:"waves",slug:"blanchisserie"},{id:87,name:"Nettoyage  Sec",icon_name:"waves",slug:"nettoyage-sec"},{id:88,name:"Horlogerie & Montres",icon_name:"watch",slug:"horlogerie"},{id:89,name:"Tatouage & Henn",icon_name:"pen-tool",slug:"tatouage-henne"},{id:90,name:"Manucure & Pdicure",icon_name:"sparkles",slug:"manucure"},{id:91,name:"Boulangerie Traditionnelle",icon_name:"utensils-crossed",slug:"boulangerie-trad"},{id:92,name:"Boulangerie Moderne",icon_name:"utensils-crossed",slug:"boulangerie-mod"},{id:93,name:"Ptisserie Fine",icon_name:"cake-slice",slug:"patisserie-fine"},{id:94,name:"Traiteur vnementiel",icon_name:"chef-hat",slug:"traiteur-event"},{id:95,name:"Traiteur Entreprise",icon_name:"chef-hat",slug:"traiteur-pro"},{id:96,name:"Cuisine Locale (Dibiterie)",icon_name:"utensils",slug:"dibiterie"},{id:97,name:"Cuisine Locale (Thieb)",icon_name:"utensils",slug:"thieb"},{id:98,name:"Transformation Fruits",icon_name:"leaf",slug:"transfo-fruits"},{id:99,name:"Transformation Crales",icon_name:"wheat",slug:"transfo-cereales"},{id:100,name:"Transformation Halieutique",icon_name:"fish",slug:"transfo-poisson"},{id:101,name:"Torrfaction Caf",icon_name:"coffee",slug:"torrefaction-cafe"},{id:102,name:"Apiculture & Miel",icon_name:"beaker",slug:"apiculture"},{id:103,name:"Aviculture (Poulets)",icon_name:"bird",slug:"aviculture"},{id:104,name:"Marachage Urbain",icon_name:"leaf",slug:"maraichage"},{id:105,name:"Livraison Repas Domicile",icon_name:"bike",slug:"livraison-repas"},{id:106,name:"Jus Locaux & Boissons",icon_name:"cup-soda",slug:"jus-locaux"},{id:107,name:"Boucherie & Dcoupe",icon_name:"shrub",slug:"boucherie"},{id:108,name:"Glacier & Sorbet",icon_name:"ice-cream",slug:"glacier"},{id:109,name:"Rparation Smartphone",icon_name:"smartphone",slug:"rep-phone"},{id:110,name:"Rparation Tablette",icon_name:"tablet",slug:"rep-tablet"},{id:111,name:"Rparation Laptop",icon_name:"monitor",slug:"rep-laptop"},{id:112,name:"Rparation Console Jeux",icon_name:"gamepad-2",slug:"rep-console"},{id:113,name:"Installation Rseau Wifi",icon_name:"wifi",slug:"reseau-wifi"},{id:114,name:"Maintenance Imprimante",icon_name:"printer",slug:"maintenance-imprimante"},{id:115,name:"Installation CCTV/Vido",icon_name:"video",slug:"cctv"},{id:116,name:"Vente Matriel Info",icon_name:"hard-drive",slug:"vente-informatique"},{id:117,name:"Dveloppement Web",icon_name:"code",slug:"dev-web"},{id:118,name:"Dveloppement Mobile",icon_name:"code-2",slug:"dev-mobile"},{id:119,name:"Infographie & Design Logo",icon_name:"layout",slug:"infographie"},{id:120,name:"Community Management",icon_name:"message-square",slug:"community-manager"},{id:121,name:"Photographie Mariage",icon_name:"camera",slug:"photo-mariage"},{id:122,name:"Photographie Studio",icon_name:"camera",slug:"photo-studio"},{id:123,name:"Montage Vido Youtube",icon_name:"video",slug:"montage-video"},{id:124,name:"Sonorisation Mariage/Event",icon_name:"music",slug:"sonorisation"},{id:125,name:"Installation Antenne TV",icon_name:"tv",slug:"antenne-tv"},{id:126,name:"Maintenance olienne",icon_name:"fan",slug:"eolien"},{id:127,name:"nergie Biomasse",icon_name:"flame",slug:"biomasse"},{id:128,name:"Rparation lectromnager",icon_name:"tv",slug:"rep-electro"},{id:129,name:"Nettoyage Bureaux",icon_name:"sparkles",slug:"nettoyage-bureaux"},{id:130,name:"Nettoyage Domicile",icon_name:"sparkles",slug:"nettoyage-domicile"},{id:131,name:"Dsinfection Nuisibles",icon_name:"shield-alert",slug:"desinfection"},{id:132,name:"Jardinage Rsidentiel",icon_name:"wind",slug:"jardinage-res"},{id:133,name:"Paysagisme & Design Jardin",icon_name:"leaf",slug:"paysagisme"},{id:134,name:"Recyclage Plastique",icon_name:"recycle",slug:"recyclage-plastique"},{id:135,name:"Recyclage Mtaux",icon_name:"recycle",slug:"recyclage-metaux"},{id:136,name:"Recyclage lectronique",icon_name:"recycle",slug:"recyclage-electronique"},{id:137,name:"ducation & Rptition",icon_name:"graduation-cap",slug:"repetition"},{id:138,name:"Cours de Langues (Wolof)",icon_name:"languages",slug:"cours-wolof"},{id:139,name:"Formation Informatique",icon_name:"book-open",slug:"formation-info"},{id:140,name:"Assistance Administrative",icon_name:"file-text",slug:"assistanat"},{id:141,name:"Conseil en Marketing",icon_name:"bar-chart-3",slug:"conseil-mkt"},{id:142,name:"Traducteur Franais/Wolof",icon_name:"languages",slug:"traducteur-wo"},{id:143,name:"Agent de Scurit Priv",icon_name:"shield",slug:"securite-privee"},{id:144,name:"Gardiennage Rsidence",icon_name:"eye",slug:"gardiennage"},{id:145,name:"Conciergerie Luxe",icon_name:"bell",slug:"conciergerie"},{id:146,name:"Vente en Ligne (WhatsApp)",icon_name:"shopping-cart",slug:"ecommerce-wa"},{id:147,name:"Gestion de Stock",icon_name:"boxes",slug:"gestion-stock"},{id:148,name:"Organisation Voyage",icon_name:"plane",slug:"voyage"}];function Zn(){const[i,u]=o.useState([]),[f,d]=o.useState(!1);return o.useEffect(()=>{(async()=>{d(!0);try{const{data:b,error:z}=await k.from("categories").select("*").order("name");!z&&b&&b.length>0?u(b):(console.warn("Using fallback categories - API error:",z),u(o0))}catch(b){console.warn("Using fallback categories - Exception:",b),u(o0)}d(!1)})()},[]),{categories:i,loading:f,searchArtisans:async(_,b)=>{d(!0);let z=k.from("artisans").select("*, profiles(*)");b&&(z=z.eq("category_id",b)),_&&(z=z.or(`specialty.ilike.%${_}%,bio.ilike.%${_}%,profiles.full_name.ilike.%${_}%`));const{data:p,error:m}=await z;return d(!1),p||[]}}}const Bo="mbourake_language",d0="fr",Vo=[{code:"fr",label:"Franais",flag:""},{code:"wo",label:"Wolof",flag:""},{code:"en",label:"English",flag:""}];function R0(){const i=ut(),{profile:u}=Vt(),[f,d]=o.useState(d0),[h,_]=o.useState(!1);o.useEffect(()=>{const p=localStorage.getItem(Bo)||d0;d(p)},[]),o.useEffect(()=>{if(u!=null&&u.preferred_language){const p=u.preferred_language;d(p),localStorage.setItem(Bo,p)}},[u==null?void 0:u.preferred_language]);const b=async p=>{if(d(p),localStorage.setItem(Bo,p),_(!1),i.user)try{await k.from("profiles").update({preferred_language:p}).eq("id",i.user.id)}catch(m){console.error("Erreur lors de la sauvegarde de la langue:",m)}},z=Vo.find(p=>p.code===f)||Vo[0];return t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>_(!h),className:"flex items-center gap-2 px-3 py-2 rounded-xl border border-gray-200 hover:border-brand-300 hover:bg-brand-50 transition-all text-sm font-medium text-gray-700","aria-label":"Slectionner la langue",children:[t.jsx(On,{size:16,className:"text-gray-500"}),t.jsx("span",{className:"text-base",children:z.flag}),t.jsx(Yn,{size:14,className:`text-gray-400 transition-transform ${h?"rotate-180":""}`})]}),h?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>_(!1),"aria-hidden":"true"}),t.jsx("div",{className:"absolute right-0 top-full mt-2 bg-white rounded-xl border-2 border-gray-100 shadow-2xl overflow-hidden z-50 min-w-[180px]",children:Vo.map(p=>t.jsxs("button",{onClick:()=>b(p.code),className:`w-full px-4 py-3 text-left flex items-center gap-3 hover:bg-brand-50 transition-colors ${f===p.code?"bg-brand-50 text-brand-600":"text-gray-700"}`,children:[t.jsx("span",{className:"text-xl",children:p.flag}),t.jsx("span",{className:"font-medium",children:p.label}),f===p.code&&t.jsx("div",{className:"ml-auto w-2 h-2 bg-brand-500 rounded-full"})]},p.code))})]}):null]})}function ip(){const i=bt(),u=ut(),{profile:f,loading:d}=Vt(),{categories:h,loading:_}=Zn(),[b,z]=o.useState("");!u.loading&&!d&&u.user;const p={hammer:t.jsx(i0,{size:24}),wrench:t.jsx($s,{size:24}),"paint-bucket":t.jsx(Lh,{size:24}),droplets:t.jsx(Eh,{size:24}),zap:t.jsx(q0,{size:24}),"hard-hat":t.jsx(Mh,{size:24}),"cloud-lightning":t.jsx(kh,{size:24}),wind:t.jsx(ep,{size:24}),car:t.jsx(Nh,{size:24}),scissors:t.jsx(Gh,{size:24}),"chef-hat":t.jsx(_h,{size:24}),truck:t.jsx(T0,{size:24}),lightbulb:t.jsx(z0,{size:24}),sparkles:t.jsx(ed,{size:24}),bike:t.jsx(jh,{size:24})},m=o.useMemo(()=>h.slice(0,8),[h]),y=o.useMemo(()=>b.trim()?h.filter(v=>v.name.toLowerCase().includes(b.toLowerCase())):m,[m,h,b]),g=v=>{v.preventDefault(),b.trim()?i(`/artisans?search=${encodeURIComponent(b)}`):i("/artisans")};return u.loading||d?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-brand-500 border-t-transparent rounded-full animate-spin"}),t.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Chargement..."})]})}):t.jsxs("div",{className:"min-h-screen bg-[#F8F9FA] overflow-x-hidden selection:bg-brand-100 font-sans",children:[t.jsxs("nav",{className:"bg-white/95 backdrop-blur-md px-4 md:px-8 lg:px-20 py-3 md:py-4 flex items-center justify-between border-b border-gray-100/50 shadow-sm sticky top-0 z-50",children:[t.jsxs("button",{onClick:()=>i("/"),className:"flex items-center gap-2.5 group transition-all",children:[t.jsxs("span",{className:"text-xl md:text-2xl font-black text-gray-900 tracking-tighter italic group-hover:text-brand-500 transition-colors",children:["Mboura",t.jsx("span",{className:"text-brand-500",children:"k"})]}),t.jsx("div",{className:"w-4 h-4 md:w-5 md:h-5 rounded-full border border-gray-200 group-hover:border-brand-300 flex items-center justify-center text-[9px] md:text-[10px] text-gray-400 group-hover:text-brand-500 font-bold transition-colors",children:"i"})]}),t.jsxs("div",{className:"flex items-center gap-2 md:gap-3 lg:gap-5",children:[t.jsxs("button",{onClick:()=>i("/about"),className:"hidden lg:block text-gray-600 hover:text-brand-500 font-semibold text-sm transition-all duration-200 relative group",children:[" propos",t.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-brand-500 group-hover:w-full transition-all duration-200"})]}),t.jsx("div",{className:"flex items-center",children:t.jsx(R0,{})}),t.jsx("div",{className:"hidden md:block w-px h-6 bg-gray-200"}),t.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[t.jsx("button",{onClick:()=>i("/onboard?mode=signup"),className:"px-4 md:px-5 py-2 md:py-2.5 bg-white text-gray-700 border border-gray-200 rounded-xl font-bold text-[10px] md:text-xs uppercase tracking-wider hover:border-brand-400 hover:text-brand-600 hover:bg-brand-50 active:scale-[0.97] transition-all duration-200 shadow-sm hover:shadow-md",children:"S'inscrire"}),t.jsx("button",{onClick:()=>i("/onboard?mode=login"),className:"px-4 md:px-5 py-2 md:py-2.5 bg-brand-500 text-white rounded-xl font-black text-[10px] md:text-xs uppercase tracking-wider shadow-md shadow-brand-200/50 hover:bg-brand-600 hover:shadow-lg hover:shadow-brand-300/50 active:scale-[0.97] transition-all duration-200",children:"Connexion"})]})]})]}),t.jsxs("section",{className:"relative h-[650px] flex flex-col items-center justify-center text-center px-6 overflow-hidden",style:{backgroundImage:'url("https://images.unsplash.com/photo-1547471080-7cc2caa01a7e?auto=format&fit=crop&q=80")',backgroundSize:"cover",backgroundPosition:"center"},children:[t.jsx("div",{className:"absolute inset-0 bg-black/55 backdrop-blur-[1px]"}),t.jsxs("div",{className:"relative z-10 w-full max-w-4xl animate-in fade-in zoom-in duration-700",children:[t.jsxs("h1",{className:"text-4xl md:text-7xl font-black text-white mb-10 tracking-tighter leading-[1.1]",children:["Trouvez les meilleurs ",t.jsx("br",{}),t.jsx("span",{className:"text-brand-500",children:"artisans"})," du Sngal."]}),t.jsxs("form",{onSubmit:g,className:"flex w-full max-w-2xl mx-auto bg-white rounded-2xl overflow-hidden shadow-2xl p-1.5 border-4 border-white/20 backdrop-blur-md transition-all focus-within:ring-4 ring-brand-500/30",children:[t.jsxs("div",{className:"flex-1 flex items-center px-4 gap-3 text-gray-400",children:[t.jsx(It,{size:24,className:"text-brand-500"}),t.jsx("input",{type:"text",value:b,onChange:v=>z(v.target.value),placeholder:"Quel artisan cherchez-vous ? (ex: Maon, Tailleur...)",className:"w-full py-4 outline-none text-gray-700 font-bold text-lg placeholder:font-medium"})]}),t.jsx("button",{type:"submit",className:"bg-brand-500 text-white px-10 py-4 font-black rounded-xl hover:bg-brand-600 transition-all uppercase tracking-widest text-xs shadow-lg shadow-brand-100 active:scale-95",children:"Rechercher"})]}),t.jsx("div",{className:"mt-10 flex flex-wrap justify-center gap-3",children:["Maonnerie","Plomberie","Couture","Solaire","Mcanique"].map(v=>t.jsx("button",{onClick:()=>z(v),className:"px-4 py-1.5 bg-white/10 backdrop-blur-md border border-white/20 rounded-full text-white text-[10px] font-black uppercase tracking-widest hover:bg-brand-500 transition-all",children:v},v))})]})]}),t.jsxs("section",{id:"categories-section",className:"py-24 px-6 md:px-20 bg-white scroll-mt-24",children:[t.jsxs("div",{className:"flex flex-col items-center mb-20 text-center",children:[t.jsx("h2",{className:"text-3xl md:text-5xl font-black text-gray-900 tracking-tight mb-4",children:"Corps de mtiers populaires"}),t.jsx("p",{className:"text-gray-500 max-w-xl mb-8 font-medium leading-relaxed italic",children:'"Le mlange parfait entre professionnels qualifis et clients exigeants, ancr dans la culture sngalaise."'}),t.jsx("div",{className:"h-1.5 w-24 bg-brand-500 rounded-full"})]}),_?t.jsx("div",{className:"flex justify-center p-20",children:t.jsx("div",{className:"w-12 h-12 border-4 border-brand-500 border-t-transparent rounded-full animate-spin"})}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8 max-w-5xl mx-auto mb-12",children:y.length>0?y.map((v,N)=>t.jsxs("button",{onClick:()=>i(`/category/${v.slug||v.id}`),className:"flex flex-col items-center group animate-in fade-in slide-in-from-bottom-4 duration-500",style:{animationDelay:`${N*5}ms`},children:[t.jsx("div",{className:"w-20 h-20 bg-orange-50/50 rounded-[2rem] flex items-center justify-center text-brand-500 mb-5 transition-all duration-500 group-hover:bg-brand-500 group-hover:text-white shadow-sm border border-orange-100 group-hover:rotate-6 group-hover:scale-110",children:p[v.icon_name||"wrench"]||t.jsx($s,{size:24})}),t.jsx("span",{className:"text-[9px] font-black text-gray-800 text-center uppercase tracking-[0.12em] leading-tight px-2 transition-colors group-hover:text-brand-600 h-10 flex items-center justify-center",children:v.name})]},v.id)):t.jsxs("div",{className:"col-span-full py-20 text-center",children:[t.jsxs("p",{className:"text-gray-400 font-bold uppercase tracking-widest text-sm",children:['Aucun mtier ne correspond  votre recherche "',b,'"']}),t.jsx("button",{onClick:()=>z(""),className:"mt-4 text-brand-500 font-black uppercase text-xs hover:underline underline-offset-4",children:"Voir tous les mtiers"})]})}),!b&&t.jsx("div",{className:"flex justify-center mt-8",children:t.jsxs("button",{onClick:()=>i("/artisans"),className:"px-8 py-4 bg-brand-500 text-white font-black rounded-2xl hover:bg-brand-600 active:scale-[0.98] transition-all uppercase tracking-widest text-xs shadow-lg shadow-brand-200 flex items-center gap-2",children:[t.jsx(w0,{size:18}),"Voir toutes les catgories"]})})]})]}),t.jsxs("section",{className:"py-32 px-6 bg-orange-50/20 flex flex-col items-center text-center",children:[t.jsx("div",{className:"w-20 h-20 bg-brand-500 rounded-3xl flex items-center justify-center text-white mb-10 rotate-6 shadow-2xl shadow-brand-100/50",children:t.jsx(i0,{size:36,strokeWidth:2.5,className:"-rotate-6"})}),t.jsx("h2",{className:"text-4xl font-black text-gray-900 mb-6 tracking-tight",children:"Prt  commencer ?"}),t.jsx("p",{className:"text-gray-500 max-w-xl mb-12 leading-relaxed font-medium",children:"Rejoignez la plateforme et connectez-vous avec les meilleurs artisans du Sngal."}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsx("button",{onClick:()=>i("/onboard?mode=signup"),className:"bg-gray-900 text-white px-16 py-5 rounded-2xl font-black text-xs uppercase tracking-[0.25em] shadow-2xl hover:bg-brand-500 transition-all active:scale-95",children:"S'inscrire"}),t.jsx("button",{onClick:()=>i("/onboard?mode=login"),className:"bg-white text-gray-700 border-2 border-gray-200 px-16 py-5 rounded-2xl font-black text-xs uppercase tracking-[0.25em] shadow-xl hover:border-brand-500 hover:text-brand-600 transition-all active:scale-95",children:"Se connecter"})]})]}),t.jsxs("footer",{className:"bg-white border-t py-20 px-6 text-center",children:[t.jsx("div",{className:"mb-10",children:t.jsxs("span",{className:"text-3xl font-black text-gray-900 tracking-tighter italic",children:["Mboura ",t.jsx("span",{className:"text-brand-500",children:"k"})]})}),t.jsxs("div",{className:"flex flex-wrap justify-center gap-6 mb-10",children:[t.jsx("button",{onClick:()=>i("/about"),className:"text-gray-600 hover:text-brand-500 font-bold text-sm transition-colors",children:" propos"}),t.jsx("button",{onClick:()=>i("/artisans"),className:"text-gray-600 hover:text-brand-500 font-bold text-sm transition-colors",children:"Artisans"}),t.jsx("button",{onClick:()=>i("/onboard?mode=signup"),className:"text-gray-600 hover:text-brand-500 font-bold text-sm transition-colors",children:"S'inscrire"})]}),t.jsx("p",{className:"text-gray-400 text-[9px] font-black uppercase tracking-[0.4em] mb-10 opacity-60",children:" 2026 Mbourake - L'alliance de l'excellence artisanale."}),t.jsx("div",{className:"h-px w-20 bg-orange-100 mx-auto"})]})]})}const cp=()=>t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:[t.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),t.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),t.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),t.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),op=3,dp=5;function up({categories:i,value:u,onChange:f}){const[d,h]=o.useState(!1),[_,b]=o.useState(""),z=i.filter(m=>m.name.toLowerCase().includes(_.toLowerCase())),p=i.find(m=>m.id===u);return t.jsxs("div",{className:"relative",children:[t.jsxs("button",{type:"button",onClick:()=>h(!d),className:`w-full rounded-2xl border-2 px-5 py-4 text-left flex items-center justify-between transition-all bg-white ${d?"border-brand-500 ring-4 ring-brand-100":"border-gray-100 hover:border-gray-200"}`,children:[t.jsx("span",{className:`text-lg font-medium ${p?"text-gray-900":"text-gray-400"}`,children:p?p.name:"Rechercher un mtier..."}),t.jsx(Yn,{size:22,className:`text-gray-400 transition-transform ${d?"rotate-180":""}`})]}),d&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white rounded-2xl border-2 border-gray-100 shadow-2xl overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[t.jsx("div",{className:"p-3 border-b border-gray-100",children:t.jsxs("div",{className:"relative",children:[t.jsx(It,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),t.jsx("input",{type:"text",value:_,onChange:m=>b(m.target.value),placeholder:"Tapez pour rechercher...",className:"w-full pl-10 pr-4 py-3 bg-gray-50 rounded-xl text-base focus:outline-none focus:bg-gray-100 transition-colors text-gray-900",autoFocus:!0})]})}),t.jsx("div",{className:"max-h-64 overflow-auto",children:z.length===0?t.jsxs("div",{className:"px-5 py-8 text-center text-gray-400",children:[t.jsx(It,{size:32,className:"mx-auto mb-2 opacity-50"}),t.jsx("p",{className:"font-medium",children:"Aucun mtier trouv"})]}):z.map(m=>t.jsxs("button",{type:"button",onClick:()=>{f(m.id),h(!1),b("")},className:`w-full px-5 py-3 text-left flex items-center gap-3 hover:bg-brand-50 transition-colors ${u===m.id?"bg-brand-50 text-brand-600":"text-gray-700"}`,children:[u===m.id&&t.jsx(Oe,{size:18,className:"text-brand-500"}),t.jsx("span",{className:`font-medium ${u===m.id?"text-brand-600":""}`,children:m.name})]},m.id))})]}),t.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>{h(!1),b("")}})]})]})}function xp(){var ke,Me,Pe,mt,oa;const i=ut(),{profile:u,loading:f,upsertProfile:d}=Vt(),{categories:h}=Zn(),_=bt(),[b,z]=Fn(),p=b.get("mode"),m=p==="login"||p==="signup"?p:"signup",y=b.get("step"),[g,v]=o.useState(()=>y==="profile"?"profile":m==="signup"?"role":"auth"),[N,H]=o.useState(1),[ae,Y]=o.useState(""),[X,se]=o.useState(""),[ie,Z]=o.useState(""),[me,oe]=o.useState(!1),[ue,L]=o.useState(!1),[P,U]=o.useState(null),[F,Q]=o.useState(""),[T,S]=o.useState(""),[O,j]=o.useState(""),[A,B]=o.useState(""),[K,ge]=o.useState(""),[de,ce]=o.useState(""),[re,ve]=o.useState(),[W,E]=o.useState(""),[xe,te]=o.useState(""),[he,we]=o.useState([]),[_e,Se]=o.useState(!1),[Ze,Ce]=o.useState(null),[He,xt]=o.useState(!1),be=o.useRef(!1),Ke={Dakar:{Dakar:["Dakar Plateau","Mdina","Fann","Point E","Mermoz","Ouakam","Ngor","Yoff","Grand Dakar","Parcelles Assainies","Libert","Gueule Tape","Colobane","HLM"],Pikine:["Pikine","Gudiawaye","Thiaroye","Yeumbeul","Keur Massar"],Rufisque:["Rufisque","Bargny","Sbikotane","Diamniadio"]},This:{This:["This","Khombole","Notto","Tivaouane"],Mbour:["Mbour","Nianing","Saly","Somone","Warang"],Tivaouane:["Tivaouane","Mouane","Pire","Ngandiouf"]},"Saint-Louis":{"Saint-Louis":["Saint-Louis","Goxu Mbacc","Guet Ndar","Sor"],Dagana:["Dagana","Richard Toll","Rosso"],Podor:["Podor","Mboumba","Cas-Cas"]},Diourbel:{Diourbel:["Diourbel","Bambey","Ndindy"],Bambey:["Bambey","Lingure","Baba Garage"],Mback:["Mback","Touba","Dahra"]},Kaolack:{Kaolack:["Kaolack","Kaffrine","Koungheul"],"Nioro du Rip":["Nioro du Rip","Paoskoto","Porokhane"],Guinguino:["Guinguino","Kbmer","Ngukhokh"]},Ziguinchor:{Ziguinchor:["Ziguinchor","Cap Skirring","Kafountine"],Oussouye:["Oussouye","Cabrousse","Mlomp"],Bignona:["Bignona","Tendouck","Thionck Essyl"]},Louga:{Louga:["Louga","Kbmer","Ngukhokh"],Kbmer:["Kbmer","Daga","Sagata"],Lingure:["Lingure","Barkdji","Sagata"]},Fatick:{Fatick:["Fatick","Diakhao","Tattaguine"],Foundiougne:["Foundiougne","Passy","Niakhar"],Gossas:["Gossas","Diouroup","Tattaguine"]},Kolda:{Kolda:["Kolda","Dabo","Sar Bidji"],Vlingara:["Vlingara","Pakour","Kounkan"],"Mdina Yoro Foulah":["Mdina Yoro Foulah","Dabo","Kounkan"]},Matam:{Matam:["Matam","Agnam Civol","Orkadir"],Kanel:["Kanel","Thilogne","Orkadir"],"Ranrou Ferlo":["Ranrou Ferlo","Ourossogui","Agnam Civol"]},Kaffrine:{Kaffrine:["Kaffrine","Nganda","Koungheul"],Birkilane:["Birkilane","Malem Hodar","Passy"],"Malem Hodar":["Malem Hodar","Nganda","Koungheul"]},Kdougou:{Kdougou:["Kdougou","Bandafassi","Salmata"],Salmata:["Salmata","Dindflo","Bandafassi"],Saraya:["Saraya","Fongolimbi","Bembou"]},Sdhiou:{Sdhiou:["Sdhiou","Goudomp","Djibanar"],Goudomp:["Goudomp","Tanaff","Diattacounda"],Bounkiling:["Bounkiling","Nma Bah","Sindian"]},Tambacounda:{Tambacounda:["Tambacounda","Bakel","Kidira"],Bakel:["Bakel","Goudiry","Koumpentoum"],Koumpentoum:["Koumpentoum","Niani","Koumpentoum"]}},V=Object.keys(Ke),fe=le=>!le||!Ke[le]?[]:Object.keys(Ke[le]),pe=(le,Te)=>!le||!Te||!Ke[le]||!Ke[le][Te]?[]:Ke[le][Te];o.useEffect(()=>{const le=[];O&&le.push(O),A&&le.push(A),K&&le.push(K),ce(le.join(", "))},[O,A,K]),o.useEffect(()=>{m==="login"&&(u!=null&&u.role)&&U(u.role)},[m,u]),o.useEffect(()=>{const le=b.get("role");le&&["client","artisan"].includes(le)&&U(le)},[b]);const Ae=P==="artisan"?dp:op,I=o.useMemo(()=>N===1?"Enchant ! ":N===2?"Votre identit":N===3?"Votre localisation":N===4&&P==="artisan"?"Votre expertise":N===5&&P==="artisan"?"Votre portfolio":"Compltez votre profil",[N,P]),Ee=o.useCallback(le=>!(!le||!["role","full_name","location"].every(qt=>le[qt]&&le[qt].toString().trim().length>0)||le.role==="artisan"&&!le.category_id),[]);o.useEffect(()=>{if(!be.current&&!i.loading&&!ue){if(f){const le=setTimeout(()=>{},1500);return()=>clearTimeout(le)}if(!i.user){if(be.current)return;be.current=!0,o.startTransition(()=>{v(Te=>Te==="profile"?m==="signup"?"role":"auth":Te==="role"||Te==="auth"?Te:m==="signup"?"role":"auth")});const le=setTimeout(()=>{be.current=!1},200);return()=>{clearTimeout(le),be.current=!1}}if(u&&Ee(u)){He||(xt(!0),_("/dashboard",{replace:!0}));return}if(m==="signup"&&!P&&g!=="role"){if(be.current)return;be.current=!0,o.startTransition(()=>{v("role")});const le=setTimeout(()=>{be.current=!1},200);return()=>{clearTimeout(le),be.current=!1}}if(P&&m==="signup"&&g!=="profile"){if(be.current)return;be.current=!0,o.startTransition(()=>{v("profile"),H(2)});const le=setTimeout(()=>{be.current=!1},200);return()=>{clearTimeout(le),be.current=!1}}if(m==="login"&&g==="auth"){if(be.current)return;be.current=!0,o.startTransition(()=>{v("profile"),H(1)});const le=setTimeout(()=>{be.current=!1},200);return()=>{clearTimeout(le),be.current=!1}}}},[(ke=i.user)==null?void 0:ke.id,i.loading,u==null?void 0:u.id,f,ue,m,P??"",He,g,_,Ee]),o.useEffect(()=>{if(!be.current&&g==="profile"&&P&&N===1&&m==="signup"){be.current=!0,o.startTransition(()=>{H(2)});const le=setTimeout(()=>{be.current=!1},100);return()=>{clearTimeout(le),be.current=!1}}},[g,P,N,m]),o.useEffect(()=>{var le,Te,Yt;if((le=i.user)!=null&&le.id&&!F.trim()){const qt=((Te=i.user.user_metadata)==null?void 0:Te.full_name)||((Yt=i.user.user_metadata)==null?void 0:Yt.name)||"";qt&&Q(qt)}},[(Me=i.user)==null?void 0:Me.id]),o.useEffect(()=>{if(be.current)return;if(i.user&&m==="signup"&&!i.loading&&(!u||!Ee(u))){if(!P&&g!=="role"){be.current=!0,o.startTransition(()=>{v("role"),L(!1),Se(!1)});const Te=setTimeout(()=>{be.current=!1},300);return()=>{clearTimeout(Te),be.current=!1}}if(P&&g!=="profile"){be.current=!0,o.startTransition(()=>{v("profile"),H(2),L(!1),Se(!1)});const Te=setTimeout(()=>{be.current=!1},300);return()=>{clearTimeout(Te),be.current=!1}}if(ue){const Te=setTimeout(()=>{L(!1),Se(!1)},500);return()=>clearTimeout(Te)}}},[(Pe=i.user)==null?void 0:Pe.id,i.loading,ue,P,m,g,u,Ee]),o.useEffect(()=>{if(i.user&&ue&&!i.loading){const le=setTimeout(()=>{L(!1),Se(!1)},1500);return()=>clearTimeout(le)}},[(mt=i.user)==null?void 0:mt.id,i.loading,ue]),o.useEffect(()=>{var le;y==="profile"&&((le=i.user)!=null&&le.id)&&!Ee(u||{})&&v("profile")},[y,(oa=i.user)==null?void 0:oa.id,u==null?void 0:u.id,Ee]);const Qe=async()=>{Se(!0),Ce(null),L(!0);try{await i.signInWithGoogle(m,P||void 0)}catch(le){Ce((le==null?void 0:le.message)??"Erreur lors de la connexion avec Google"),Se(!1),L(!1)}},Le=async le=>{le.preventDefault(),Se(!0),Ce(null);try{if(m==="signup"){if(X!==ie){Ce("Les mots de passe ne correspondent pas"),Se(!1);return}if(X.length<6){Ce("Le mot de passe doit contenir au moins 6 caractres"),Se(!1);return}await i.signUpWithPassword(ae,X)}else await i.signInWithPassword(ae,X)}catch(Te){Ce((Te==null?void 0:Te.message)??`Erreur lors de l'${m==="signup"?"inscription":"authentification"}`),Se(!1)}},De=le=>{U(le),z(Te=>(Te.set("role",le),Te)),v("auth")},Ye=async le=>{const Te=le.target.files;if(!(!Te||Te.length===0||!i.user)){Se(!0);try{const Yt=[];for(const qt of Array.from(Te)){if(!qt.type.startsWith("image/"))continue;const ja=qt.name.split(".").pop(),zs=`${i.user.id}/portfolio/${Date.now()}-${Math.random().toString(36).substr(2,9)}.${ja}`,{error:ks}=await k.storage.from("photos").upload(zs,qt);if(ks)continue;const{data:Ws}=k.storage.from("photos").getPublicUrl(zs);Ws!=null&&Ws.publicUrl&&Yt.push(Ws.publicUrl)}we(qt=>[...qt,...Yt])}catch{Ce("Erreur lors de l'upload")}Se(!1),le.target.value=""}},Ht=()=>{switch(N){case 1:return!!P;case 2:return F.trim().length>0&&T.trim().length>0;case 3:return O.length>0&&A.length>0&&K.length>0;case 4:return P==="client"||re!==void 0;case 5:return!0;default:return!1}},Dt=()=>{N<Ae&&o.startTransition(()=>{H(N+1)})},kt=()=>{N>1&&o.startTransition(()=>{H(N-1)})},ea=async()=>{if(P){Se(!0),Ce(null);try{await d({role:P,full_name:F.trim(),phone:T.trim()||null,location:de.trim()||null,category_id:P==="artisan"?re:void 0,bio:P==="artisan"?W.trim():void 0,specialty:P==="artisan"?xe.trim():void 0,portfolio_urls:P==="artisan"?he:void 0}),_("/dashboard",{replace:!0})}catch(le){Ce((le==null?void 0:le.message)??"Erreur lors de la cration du profil"),Se(!1)}}},qe=()=>{g==="profile"&&N>1?kt():g==="profile"&&N===1?o.startTransition(()=>{v(m==="signup"?"role":"auth")}):g==="auth"&&m==="signup"&&P?o.startTransition(()=>{v("role")}):_("/")};return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#FDFCFB] via-white to-orange-50/30 flex flex-col",children:[t.jsx("header",{className:"px-6 py-4 bg-white border-b border-gray-100",children:t.jsxs("div",{className:"max-w-md mx-auto flex items-center justify-between",children:[t.jsxs("button",{onClick:qe,className:"flex items-center gap-2 text-gray-500 hover:text-brand-600 font-bold text-sm transition-colors",children:[t.jsx(Mt,{size:18}),"Retour"]}),t.jsx(R0,{})]})}),t.jsx("main",{className:"flex-1 flex flex-col items-center justify-center px-6 py-8",children:t.jsxs("div",{className:"w-full max-w-md",children:[g==="role"&&m==="signup"&&t.jsxs("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Vous tes..."}),t.jsx("p",{className:"text-gray-500",children:"Choisissez votre profil"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("button",{onClick:()=>De("client"),className:"w-full rounded-3xl border-2 border-gray-100 p-6 text-left transition-all hover:scale-[1.02] active:scale-[0.98] hover:border-brand-200 hover:shadow-lg",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center bg-brand-500 text-white",children:t.jsx(tt,{size:32})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-black text-lg text-gray-900",children:"Je suis Client"}),t.jsx("div",{className:"text-sm text-gray-500",children:"Je cherche un artisan pour mon projet"})]})]})}),t.jsx("button",{onClick:()=>De("artisan"),className:"w-full rounded-3xl border-2 border-gray-100 p-6 text-left transition-all hover:scale-[1.02] active:scale-[0.98] hover:border-brand-200 hover:shadow-lg",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center bg-brand-500 text-white",children:t.jsx(wt,{size:32})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-black text-lg text-gray-900",children:"Je suis Artisan"}),t.jsx("div",{className:"text-sm text-gray-500",children:"Je propose mes services et mon savoir-faire"})]})]})})]})]}),g==="auth"&&t.jsxs("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:[m==="signup"&&P&&t.jsxs("button",{onClick:()=>v("role"),className:"flex items-center gap-2 text-gray-500 hover:text-brand-600 font-bold text-sm mb-6 transition-colors",children:[t.jsx(Mt,{size:18}),"Retour"]}),t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:m==="signup"?"Crer mon compte":"Se connecter"}),t.jsx("p",{className:"text-gray-500",children:m==="signup"?"Choisissez votre mthode d'authentification":"Connectez-vous  votre compte"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("button",{onClick:Qe,disabled:_e||ue,type:"button",className:"w-full flex items-center justify-center gap-3 bg-white border-2 border-gray-100 rounded-2xl py-4 font-bold text-gray-700 hover:border-gray-200 hover:shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(cp,{}),_e||ue?"Redirection vers Google...":m==="signup"?"S'inscrire avec Google":"Se connecter avec Google"]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"flex-1 h-px bg-gray-200"}),t.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase",children:"OU"}),t.jsx("div",{className:"flex-1 h-px bg-gray-200"})]}),t.jsxs("form",{onSubmit:Le,className:"space-y-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Xn,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"email",value:ae,onChange:le=>Y(le.target.value),placeholder:"Votre adresse email",required:!0,className:"w-full pl-12 pr-4 py-4 bg-gray-50 border-2 border-transparent rounded-2xl focus:border-brand-500 focus:bg-white focus:outline-none transition-all font-medium text-gray-900"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Xo,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:me?"text":"password",value:X,onChange:le=>se(le.target.value),placeholder:"Votre mot de passe",required:!0,className:"w-full pl-12 pr-12 py-4 bg-gray-50 border-2 border-transparent rounded-2xl focus:border-brand-500 focus:bg-white focus:outline-none transition-all font-medium text-gray-900"}),t.jsx("button",{type:"button",onClick:()=>oe(!me),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:me?t.jsx(Ah,{size:18}):t.jsx(S0,{size:18})})]}),m==="signup"&&t.jsxs("div",{className:"relative",children:[t.jsx(Xo,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:me?"text":"password",value:ie,onChange:le=>Z(le.target.value),placeholder:"Confirmez le mot de passe",required:!0,className:"w-full pl-12 pr-4 py-4 bg-gray-50 border-2 border-transparent rounded-2xl focus:border-brand-500 focus:bg-white focus:outline-none transition-all font-medium text-gray-900"})]}),Ze&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-sm text-red-600 font-medium",children:Ze}),t.jsx("button",{type:"submit",disabled:_e,className:"w-full bg-brand-500 text-white rounded-2xl py-4 font-bold flex items-center justify-center gap-2 hover:bg-brand-600 active:scale-[0.98] transition-all disabled:opacity-50",children:_e?t.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):t.jsxs(t.Fragment,{children:[m==="signup"?"Crer mon compte":"Se connecter",t.jsx(Ys,{size:18})]})})]})]})]}),g==="profile"&&i.user&&P&&t.jsxs("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[N>1?t.jsxs("button",{onClick:kt,className:"flex items-center gap-2 text-gray-500 hover:text-brand-600 font-bold text-sm transition-colors",children:[t.jsx(Mt,{size:18}),"Retour"]}):t.jsx("div",{}),t.jsx("div",{className:"flex items-center gap-2",children:Array.from({length:Ae},(le,Te)=>Te+1).map(le=>t.jsx("div",{className:`w-2.5 h-2.5 rounded-full transition-all ${le===N?"w-8 bg-brand-500":le<N?"bg-brand-500":"bg-gray-200"}`},le))}),t.jsxs("div",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:[N,"/",Ae]})]}),t.jsx("div",{className:"mb-8 text-center",children:t.jsx("h1",{className:"text-2xl font-black text-gray-900 mb-2",children:I})}),t.jsxs("div",{className:"space-y-6",children:[N===1&&m==="login"&&!(u!=null&&u.role)&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("button",{onClick:()=>{U("client"),H(2)},className:"w-full rounded-3xl border-2 border-gray-100 p-6 text-left transition-all hover:scale-[1.02] active:scale-[0.98] hover:border-brand-200 hover:shadow-lg",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center bg-brand-500 text-white",children:t.jsx(tt,{size:32})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-black text-lg text-gray-900",children:"Je suis Client"}),t.jsx("div",{className:"text-sm text-gray-500",children:"Je cherche un artisan pour mon projet"})]})]})}),t.jsx("button",{onClick:()=>{U("artisan"),H(2)},className:"w-full rounded-3xl border-2 border-gray-100 p-6 text-left transition-all hover:scale-[1.02] active:scale-[0.98] hover:border-brand-200 hover:shadow-lg",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center bg-brand-500 text-white",children:t.jsx(wt,{size:32})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-black text-lg text-gray-900",children:"Je suis Artisan"}),t.jsx("div",{className:"text-sm text-gray-500",children:"Je propose mes services et mon savoir-faire"})]})]})})]}),N===2&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black text-gray-400 uppercase tracking-widest mb-2",children:"Nom complet"}),t.jsx("input",{value:F,onChange:le=>Q(le.target.value),className:"w-full rounded-2xl border-2 border-gray-100 px-5 py-4 text-lg font-medium focus:border-brand-500 focus:outline-none transition-all bg-white text-gray-900",placeholder:"Ex: Moussa Diop",autoFocus:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs font-black text-gray-400 uppercase tracking-widest mb-2",children:[t.jsx(Hn,{size:12,className:"inline mr-1"}),"Numro de tlphone"]}),t.jsx("input",{value:T,onChange:le=>S(le.target.value),className:"w-full rounded-2xl border-2 border-gray-100 px-5 py-4 text-lg font-medium focus:border-brand-500 focus:outline-none transition-all bg-white text-gray-900",placeholder:"77 123 45 67",type:"tel"})]})]}),N===3&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs font-black text-gray-400 uppercase tracking-widest mb-2",children:[t.jsx(Gt,{size:12,className:"inline mr-1"}),"Rgion"]}),t.jsxs("select",{value:O,onChange:le=>{j(le.target.value),B(""),ge("")},className:"w-full rounded-2xl border-2 border-gray-100 px-5 py-4 text-lg font-medium focus:border-brand-500 focus:outline-none transition-all bg-white text-gray-900",required:!0,children:[t.jsx("option",{value:"",children:"Slectionnez une rgion..."}),V.map(le=>t.jsx("option",{value:le,children:le},le))]})]}),O&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black text-gray-400 uppercase tracking-widest mb-2",children:"Dpartement"}),t.jsxs("select",{value:A,onChange:le=>{B(le.target.value),ge("")},className:"w-full rounded-2xl border-2 border-gray-100 px-5 py-4 text-lg font-medium focus:border-brand-500 focus:outline-none transition-all bg-white text-gray-900",required:!0,children:[t.jsx("option",{value:"",children:"Slectionnez un dpartement..."}),fe(O).map(le=>t.jsx("option",{value:le,children:le},le))]})]}),O&&A&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black text-gray-400 uppercase tracking-widest mb-2",children:"Commune"}),t.jsxs("select",{value:K,onChange:le=>ge(le.target.value),className:"w-full rounded-2xl border-2 border-gray-100 px-5 py-4 text-lg font-medium focus:border-brand-500 focus:outline-none transition-all bg-white text-gray-900",required:!0,children:[t.jsx("option",{value:"",children:"Slectionnez une commune..."}),pe(O,A).map(le=>t.jsx("option",{value:le,children:le},le))]})]})]},"profile-step-3"),N===4&&P==="artisan"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black text-gray-400 uppercase tracking-widest mb-2",children:"Votre Mtier"}),t.jsx(up,{categories:h,value:re,onChange:ve})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black text-gray-400 uppercase tracking-widest mb-2",children:"Spcialit (optionnel)"}),t.jsx("input",{value:xe,onChange:le=>te(le.target.value),className:"w-full rounded-2xl border-2 border-gray-100 px-5 py-4 text-lg font-medium focus:border-brand-500 focus:outline-none transition-all bg-white text-gray-900",placeholder:"Ex: Rparation de fuites"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black text-gray-400 uppercase tracking-widest mb-2",children:" propos de vous (optionnel)"}),t.jsx("textarea",{value:W,onChange:le=>E(le.target.value),className:"w-full rounded-2xl border-2 border-gray-100 px-5 py-4 text-base font-medium focus:border-brand-500 focus:outline-none transition-all bg-white min-h-28 resize-none text-gray-900",placeholder:"Dcrivez votre exprience..."})]})]}),N===5&&P==="artisan"&&t.jsxs("div",{children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:Ye,disabled:_e,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),t.jsx("div",{className:"border-2 border-dashed rounded-2xl p-8 text-center transition-all border-gray-200 hover:border-brand-300 hover:bg-brand-50/50",children:t.jsxs("div",{className:"flex flex-col items-center gap-3",children:[t.jsx("div",{className:"w-14 h-14 bg-brand-100 rounded-full flex items-center justify-center",children:t.jsx(Fl,{size:28,className:"text-brand-500"})}),t.jsx("p",{className:"font-bold text-gray-700",children:"Ajouter des photos"}),t.jsx("p",{className:"text-xs text-gray-400",children:"JPG, PNG (optionnel)"})]})})]}),he.length>0&&t.jsx("div",{className:"grid grid-cols-3 gap-3 mt-4",children:he.map((le,Te)=>t.jsxs("div",{className:"relative aspect-square rounded-xl overflow-hidden group",children:[t.jsx("img",{src:le,alt:`Portfolio ${Te+1}`,className:"w-full h-full object-cover"}),t.jsx("button",{type:"button",onClick:()=>we(Yt=>Yt.filter((qt,ja)=>ja!==Te)),className:"absolute top-2 right-2 w-7 h-7 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(at,{size:16})})]},Te))})]}),Ze&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-sm text-red-600 font-medium",children:Ze}),N===Ae?t.jsx("button",{onClick:ea,disabled:_e||!Ht(),className:"w-full flex items-center justify-center gap-3 rounded-2xl bg-brand-500 text-white font-black py-4 shadow-xl hover:bg-brand-600 active:scale-[0.98] transition-all disabled:opacity-60 text-lg",children:_e?t.jsx(ca,{size:24,className:"animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx(ed,{size:24}),"Terminer"]})}):t.jsxs("button",{onClick:Dt,disabled:!Ht(),className:"w-full flex items-center justify-center gap-3 rounded-2xl bg-gray-900 text-white font-black py-4 hover:bg-brand-600 active:scale-[0.98] transition-all disabled:opacity-40 text-lg",children:["Suivant",t.jsx(Ys,{size:24})]})]})]},`profile-container-${N}`),g!=="role"&&g!=="auth"&&g!=="profile"&&t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-brand-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500",children:"Chargement..."})]})]})})]})}function mp(){const i=bt(),[u]=Fn();Zn();const{user:f}=ut(),{profile:d}=Vt(),[h,_]=o.useState([]),[b,z]=o.useState(!0),[p,m]=o.useState(u.get("search")||""),[y,g]=o.useState(u.get("category")||""),[v,N]=o.useState(null),[H,ae]=o.useState(""),[Y,X]=o.useState(""),[se,ie]=o.useState(!1),Z=!!f&&!!d;o.useEffect(()=>{(async()=>{z(!0);const{data:F,error:Q}=await k.from("profiles").select(`
          id, full_name, avatar_url, location,
          artisans (
            bio, specialty, verification_status,
            categories (name)
          )
        `).eq("role","artisan").limit(50);if(F){const T=F.map(S=>{var O,j,A,B,K;return{id:S.id,name:S.full_name||"Artisan",specialty:((O=S.artisans)==null?void 0:O.specialty)||"",category:((A=(j=S.artisans)==null?void 0:j.categories)==null?void 0:A.name)||"Autre",rating:4.5+Math.random()*.5,reviews:Math.floor(Math.random()*50)+5,status:"Disponible",tier:["Platine","Or","Argent","Bronze"][Math.floor(Math.random()*4)],location:S.location||"Sngal",verified:((B=S.artisans)==null?void 0:B.verification_status)==="verified",img:S.avatar_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(S.full_name||"A")}&background=F97316&color=fff`,bio:((K=S.artisans)==null?void 0:K.bio)||""}});_(T)}z(!1)})()},[]);const me=o.useMemo(()=>h.filter(U=>{if(p){const F=p.toLowerCase(),Q=U.name.toLowerCase().includes(F),T=U.specialty.toLowerCase().includes(F),S=U.category.toLowerCase().includes(F);if(!Q&&!T&&!S)return!1}return!(y&&U.category!==y||v&&U.rating<v||H&&U.tier!==H||Y&&U.status!==Y)}),[h,p,y,v,H,Y]),oe=o.useMemo(()=>[...me].sort((U,F)=>F.rating-U.rating),[me]),ue=()=>{m(""),g(""),N(null),ae(""),X("")},L=p||y||v||H||Y,P=[...new Set(h.map(U=>U.category))];return t.jsxs("div",{className:"min-h-screen bg-[#F8F9FA]",children:[t.jsx("header",{className:"bg-white border-b sticky top-0 z-50",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:()=>i("/artisans"),className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:t.jsx(Mt,{size:20,className:"text-gray-600"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-black text-gray-900",children:"Artisans"}),t.jsxs("p",{className:"text-xs text-gray-400 font-bold",children:[oe.length," professionnels trouvs"]})]})]}),Z?t.jsx("button",{onClick:()=>i("/dashboard"),className:"bg-brand-500 text-white px-6 py-2.5 rounded-xl font-black text-xs uppercase tracking-widest shadow-lg hover:bg-brand-600 transition-all",children:"Tableau de bord"}):t.jsx("button",{onClick:()=>i("/"),className:"bg-brand-500 text-white px-6 py-2.5 rounded-xl font-black text-xs uppercase tracking-widest shadow-lg hover:bg-brand-600 transition-all",children:"Connexion"})]})}),t.jsx("div",{className:"bg-white border-b shadow-sm",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4",children:[t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsxs("div",{className:"flex-1 flex items-center gap-3 bg-gray-50 rounded-xl px-4 py-3 border border-gray-100 focus-within:border-brand-300 focus-within:ring-2 ring-brand-100 transition-all",children:[t.jsx(It,{size:20,className:"text-gray-400"}),t.jsx("input",{type:"text",value:p,onChange:U=>m(U.target.value),placeholder:"Rechercher un artisan, une spcialit ou une catgorie...",className:"flex-1 bg-transparent outline-none text-gray-700 font-medium"}),p&&t.jsx("button",{onClick:()=>m(""),className:"text-gray-400 hover:text-gray-600",children:t.jsx(at,{size:18})})]}),t.jsxs("button",{onClick:()=>ie(!se),className:`flex items-center gap-2 px-6 py-3 rounded-xl font-black text-xs uppercase tracking-widest transition-all ${se||L?"bg-brand-500 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[t.jsx(M0,{size:18}),"Filtres",L&&t.jsx("span",{className:"w-5 h-5 bg-white text-brand-500 rounded-full text-[10px] flex items-center justify-center",children:"!"})]})]}),se&&t.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-100 animate-in slide-in-from-top-4 duration-300",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2",children:"Catgorie"}),t.jsxs("select",{value:y,onChange:U=>g(U.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl font-bold text-sm text-gray-700 focus:outline-none focus:border-brand-300",children:[t.jsx("option",{value:"",children:"Toutes"}),P.map(U=>t.jsx("option",{value:U,children:U},U))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2",children:"Note minimum"}),t.jsxs("select",{value:v||"",onChange:U=>N(U.target.value?Number(U.target.value):null),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl font-bold text-sm text-gray-700 focus:outline-none focus:border-brand-300",children:[t.jsx("option",{value:"",children:"Toutes"}),t.jsx("option",{value:"4.5",children:"4.5+ toiles"}),t.jsx("option",{value:"4",children:"4+ toiles"}),t.jsx("option",{value:"3.5",children:"3.5+ toiles"}),t.jsx("option",{value:"3",children:"3+ toiles"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2",children:"Niveau Expert"}),t.jsxs("select",{value:H,onChange:U=>ae(U.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl font-bold text-sm text-gray-700 focus:outline-none focus:border-brand-300",children:[t.jsx("option",{value:"",children:"Tous"}),t.jsx("option",{value:"Platine",children:"Platine"}),t.jsx("option",{value:"Or",children:"Or"}),t.jsx("option",{value:"Argent",children:"Argent"}),t.jsx("option",{value:"Bronze",children:"Bronze"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2",children:"Disponibilit"}),t.jsxs("select",{value:Y,onChange:U=>X(U.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl font-bold text-sm text-gray-700 focus:outline-none focus:border-brand-300",children:[t.jsx("option",{value:"",children:"Tous"}),t.jsx("option",{value:"Disponible",children:"Disponible"}),t.jsx("option",{value:"Occup",children:"Occup"})]})]})]}),L&&t.jsx("button",{onClick:ue,className:"mt-4 text-brand-500 font-black text-xs uppercase tracking-widest hover:underline underline-offset-4",children:"Effacer tous les filtres"})]})]})}),t.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:t.jsx("div",{className:"flex flex-wrap gap-2",children:["Platine","Or","Disponible","4.5+ toiles"].map(U=>t.jsx("button",{onClick:()=>{U==="Platine"||U==="Or"?ae(H===U?"":U):U==="Disponible"?X(Y===U?"":U):U==="4.5+ toiles"&&N(v===4.5?null:4.5)},className:`px-4 py-2 rounded-full text-xs font-black uppercase tracking-widest transition-all ${U===H||U===Y||U==="4.5+ toiles"&&v===4.5?"bg-brand-500 text-white shadow-lg":"bg-white text-gray-600 border border-gray-200 hover:border-brand-300"}`,children:U},U))})}),t.jsx("main",{className:"max-w-7xl mx-auto px-6 pb-20",children:b?t.jsx("div",{className:"flex justify-center py-20",children:t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-brand-500 border-t-transparent rounded-full animate-spin"}),t.jsx("p",{className:"text-gray-500 font-medium",children:"Chargement des artisans..."})]})}):oe.length===0?t.jsxs("div",{className:"text-center py-20",children:[t.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:t.jsx(It,{size:32,className:"text-gray-300"})}),t.jsx("h3",{className:"text-xl font-black text-gray-900 mb-2",children:"Aucun artisan trouv"}),t.jsx("p",{className:"text-gray-500 mb-6",children:"Essayez de modifier vos filtres"}),t.jsx("button",{onClick:ue,className:"px-6 py-3 bg-brand-500 text-white font-black text-xs uppercase tracking-widest rounded-xl hover:bg-brand-600 transition-all",children:"Rinitialiser les filtres"})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:oe.map((U,F)=>t.jsxs("div",{className:"bg-white rounded-[2rem] overflow-hidden shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-500 group hover:-translate-y-1 animate-in fade-in slide-in-from-bottom-4",style:{animationDelay:`${F*50}ms`},children:[t.jsxs("div",{className:"relative h-52 overflow-hidden",children:[t.jsx("img",{src:U.img,alt:U.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),t.jsxs("div",{className:`absolute top-4 left-4 px-3 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest flex items-center gap-1.5 shadow-lg ${U.status==="Disponible"?"bg-green-500 text-white":"bg-yellow-500 text-white"}`,children:[t.jsx("div",{className:`w-1.5 h-1.5 rounded-full bg-white ${U.is_available?"animate-pulse":""}`}),U.status]}),t.jsxs("div",{className:`absolute top-4 right-4 px-3 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest shadow-lg ${TIER_COLORS[U.tier]}`,children:[t.jsx(Qn,{size:12,className:"inline mr-1"}),U.tier]}),t.jsx("button",{className:"absolute bottom-4 right-4 w-10 h-10 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center text-white cursor-pointer hover:bg-brand-500 transition-all shadow-lg",children:t.jsx(Hl,{size:18})}),t.jsxs("div",{className:"absolute bottom-4 left-4 flex items-center gap-1.5 text-white/90 text-xs font-bold",children:[t.jsx(Gt,{size:14}),U.location]})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("span",{className:"text-[10px] font-black text-brand-600 uppercase tracking-[0.2em]",children:U.category}),U.verified&&t.jsxs("span",{className:"flex items-center gap-1 text-green-600 text-[10px] font-bold",children:[t.jsx(yh,{size:14,fill:"currentColor",className:"fill-green-100"}),"Vrifi"]})]}),t.jsx("h3",{className:"text-lg font-black text-gray-900 mb-1",children:U.name}),t.jsx("p",{className:"text-sm text-gray-500 font-medium mb-4",children:U.specialty}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((Q,T)=>t.jsx(Ma,{size:14,className:T<Math.floor(U.rating)?"text-yellow-400 fill-yellow-400":"text-gray-200"},T))}),t.jsx("span",{className:"text-gray-900 font-black text-sm",children:U.rating}),t.jsxs("span",{className:"text-gray-400 text-xs font-bold",children:["(",U.reviews," avis)"]})]}),t.jsx("p",{className:"text-xs text-gray-500 leading-relaxed mb-6 line-clamp-2",children:U.bio}),t.jsx("button",{onClick:()=>i(`/artisans/${U.id}`),className:"w-full py-3.5 bg-gray-900 text-white font-black rounded-xl hover:bg-brand-500 active:scale-[0.98] transition-all uppercase tracking-widest text-[10px] shadow-lg",children:"Voir le profil complet"})]})]},U.id))})})]})}const U0=i=>i>=50?"Platine":i>=25?"Or":i>=10?"Argent":"Bronze",L0={Platine:"bg-gradient-to-r from-purple-500 to-pink-500 text-white",Or:"bg-gradient-to-r from-yellow-400 to-orange-400 text-white",Argent:"bg-gradient-to-r from-gray-400 to-gray-500 text-white",Bronze:"bg-gradient-to-r from-orange-300 to-orange-400 text-white"};function fp(){const{slug:i}=Js(),u=bt();Fn();const{user:f}=ut(),{profile:d}=Vt(),[h,_]=o.useState(null),[b,z]=o.useState([]),[p,m]=o.useState(!0),[y,g]=o.useState(""),[v,N]=o.useState(null),[H,ae]=o.useState(""),[Y,X]=o.useState(!1),[se,ie]=o.useState(!1),[Z,me]=o.useState("rating"),[oe,ue]=o.useState(!1),L=!!f&&!!d,P=(d==null?void 0:d.role)==="client";o.useEffect(()=>{(async()=>{if(!i)return;m(!0);const{data:O,error:j}=await k.from("categories").select("*").eq("slug",i).single();if(j||!O){const de=parseInt(i);if(isNaN(de)){m(!1);return}else{const{data:ce}=await k.from("categories").select("*").eq("id",de).single();ce&&_(ce)}}else _(O);const A=(O==null?void 0:O.id)||parseInt(i),{data:B,error:K}=await k.from("artisans").select(`
          id, bio, specialty, verification_status, is_available, rating_avg,
          category_id, portfolio_urls,
          categories (name, slug)
        `).eq("category_id",A);K&&console.error("Error fetching artisans:",K);let ge={};if(B&&B.length>0){const de=B.map(ve=>ve.id),{data:ce,error:re}=await k.from("profiles").select("id, full_name, avatar_url, location").in("id",de);re?console.error("Error fetching profiles:",re):ce&&(ge=ce.reduce((ve,W)=>(ve[W.id]=W,ve),{}))}if(B&&B.length>0){const de=await Promise.all(B.map(async ce=>{var Se,Ze,Ce,He,xt,be;const{count:re}=await k.from("reviews").select("*",{count:"exact",head:!0}).eq("artisan_id",ce.id),{count:ve}=await k.from("quotes").select("*",{count:"exact",head:!0}).eq("artisan_id",ce.id).eq("status","accepted"),W=Array.isArray(ce.portfolio_urls)?ce.portfolio_urls.filter(Ke=>Ke&&Ke.trim()!==""):[],E=ge[ce.id],xe=((Se=E==null?void 0:E.full_name)==null?void 0:Se.trim())||null,te=((Ze=ce.specialty)==null?void 0:Ze.trim())||null,he=((Ce=E==null?void 0:E.location)==null?void 0:Ce.trim())||null,we=((He=E==null?void 0:E.avatar_url)==null?void 0:He.trim())||null,_e=((xt=ce.bio)==null?void 0:xt.trim())||null;return console.log("Artisan data:",{id:ce.id,fullName:xe,specialty:te,location:he,avatarUrl:we,portfolioUrls:W.length,bio:_e?_e.substring(0,50):null,profileData:E}),{id:ce.id,name:xe||"Artisan",specialty:te||"Spcialiste",category:((be=ce.categories)==null?void 0:be.name)||"Autre",category_id:ce.category_id,rating:ce.rating_avg||0,reviews:re||0,projects_completed:ve||0,is_available:ce.is_available!==!1,tier:U0(ve||0),location:he||"Localisation non renseigne",verified:ce.verification_status==="verified",img:we||(xe?`https://ui-avatars.com/api/?name=${encodeURIComponent(xe)}&background=F97316&color=fff`:"https://ui-avatars.com/api/?name=Artisan&background=F97316&color=fff"),bio:_e||"",portfolio_first_image:W.length>0?W[0]:null}}));z(de)}else console.warn("No artisans data found for category:",A),z([]);m(!1)})()},[i]);const U=o.useMemo(()=>b.filter(S=>!(y&&!S.name.toLowerCase().includes(y.toLowerCase())&&!S.specialty.toLowerCase().includes(y.toLowerCase())||v&&S.rating<v||H&&S.tier!==H||Y&&!S.is_available||se&&!S.verified)),[b,y,v,H,Y,se]),F=o.useMemo(()=>[...U].sort((S,O)=>{switch(Z){case"rating":return O.rating-S.rating;case"reviews":return O.reviews-S.reviews;case"projects":return O.projects_completed-S.projects_completed;case"tier":const j={Platine:4,Or:3,Argent:2,Bronze:1};return j[O.tier]-j[S.tier];default:return 0}}),[U,Z]),Q=y||v||H||Y||se,T=()=>{g(""),N(null),ae(""),X(!1),ie(!1)};return p?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-brand-500 border-t-transparent rounded-full animate-spin"}),t.jsx("p",{className:"text-gray-500 font-medium",children:"Chargement..."})]})}):h?t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("header",{className:"bg-white border-b sticky top-0 z-50 shadow-sm",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-6 py-4 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:()=>u(-1),className:"w-10 h-10 rounded-xl bg-gray-100 flex items-center justify-center text-gray-600 hover:bg-gray-200 transition-colors",children:t.jsx(Mt,{size:20})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-black text-gray-900",children:h.name}),t.jsxs("p",{className:"text-xs text-gray-400 font-bold",children:[F.length," artisan",F.length>1?"s":""," trouv",F.length>1?"s":""]})]})]}),t.jsx("div",{className:"flex items-center gap-3",children:L?t.jsxs(t.Fragment,{children:[P&&t.jsxs("button",{onClick:()=>u(`/create-project?category=${h.id}`),className:"hidden md:flex items-center gap-2 bg-brand-500 text-white px-5 py-2.5 rounded-xl font-black text-xs uppercase tracking-widest shadow-lg hover:bg-brand-600 transition-all",children:[t.jsx(xi,{size:16}),"Publier un projet"]}),t.jsxs("button",{onClick:()=>u("/dashboard"),className:"flex items-center gap-2 bg-gray-100 text-gray-700 px-5 py-2.5 rounded-xl font-black text-xs uppercase tracking-widest hover:bg-gray-200 transition-all",children:[t.jsx(tt,{size:16}),"Tableau de bord"]})]}):t.jsx("button",{onClick:()=>u("/"),className:"bg-brand-500 text-white px-6 py-2.5 rounded-xl font-black text-xs uppercase tracking-widest shadow-lg hover:bg-brand-600 transition-all",children:"Connexion"})})]})}),t.jsx("div",{className:"bg-white border-b",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-6 py-4",children:[t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsxs("div",{className:"flex-1 flex items-center gap-3 bg-gray-50 rounded-xl px-4 py-3 border border-gray-100 focus-within:border-brand-300 focus-within:ring-2 ring-brand-100 transition-all",children:[t.jsx(It,{size:20,className:"text-gray-400"}),t.jsx("input",{type:"text",value:y,onChange:S=>g(S.target.value),placeholder:"Rechercher un artisan...",className:"flex-1 bg-transparent outline-none text-gray-700 font-medium"}),y&&t.jsx("button",{onClick:()=>g(""),className:"text-gray-400 hover:text-gray-600",children:t.jsx(at,{size:18})})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("select",{value:Z,onChange:S=>me(S.target.value),className:"px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl font-bold text-sm text-gray-700 focus:outline-none focus:border-brand-300",children:[t.jsx("option",{value:"rating",children:"Trier par note"}),t.jsx("option",{value:"reviews",children:"Trier par avis"}),t.jsx("option",{value:"projects",children:"Trier par projets"}),t.jsx("option",{value:"tier",children:"Trier par niveau"})]}),t.jsxs("button",{onClick:()=>ue(!oe),className:`flex items-center gap-2 px-4 py-3 rounded-xl font-black text-xs uppercase tracking-widest transition-all ${oe||Q?"bg-brand-500 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[t.jsx(M0,{size:16}),"Filtres"]})]})]}),oe&&t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100 animate-in slide-in-from-top-2 duration-200",children:t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("select",{value:v||"",onChange:S=>N(S.target.value?Number(S.target.value):null),className:"px-4 py-2.5 bg-gray-50 border border-gray-100 rounded-xl font-bold text-sm text-gray-700",children:[t.jsx("option",{value:"",children:"Note minimum"}),t.jsx("option",{value:"4.5",children:"4.5+ toiles"}),t.jsx("option",{value:"4",children:"4+ toiles"}),t.jsx("option",{value:"3",children:"3+ toiles"})]}),t.jsxs("select",{value:H,onChange:S=>ae(S.target.value),className:"px-4 py-2.5 bg-gray-50 border border-gray-100 rounded-xl font-bold text-sm text-gray-700",children:[t.jsx("option",{value:"",children:"Tous les niveaux"}),t.jsx("option",{value:"Platine",children:"Platine"}),t.jsx("option",{value:"Or",children:"Or"}),t.jsx("option",{value:"Argent",children:"Argent"}),t.jsx("option",{value:"Bronze",children:"Bronze"})]}),t.jsx("button",{onClick:()=>X(!Y),className:`px-4 py-2.5 rounded-xl font-bold text-sm transition-all ${Y?"bg-green-500 text-white":"bg-gray-50 text-gray-600 border border-gray-100"}`,children:"Disponible uniquement"}),t.jsxs("button",{onClick:()=>ie(!se),className:`px-4 py-2.5 rounded-xl font-bold text-sm flex items-center gap-2 transition-all ${se?"bg-blue-500 text-white":"bg-gray-50 text-gray-600 border border-gray-100"}`,children:[t.jsx(At,{size:14}),"Vrifis uniquement"]}),Q&&t.jsx("button",{onClick:T,className:"px-4 py-2.5 text-brand-500 font-bold text-sm hover:underline",children:"Effacer les filtres"})]})})]})}),P&&t.jsx("div",{className:"md:hidden bg-brand-50 border-b border-brand-100 px-4 py-3",children:t.jsxs("button",{onClick:()=>u(`/create-project?category=${h.id}`),className:"w-full flex items-center justify-center gap-2 bg-brand-500 text-white px-5 py-3 rounded-xl font-black text-xs uppercase tracking-widest shadow-lg",children:[t.jsx(xi,{size:18}),"Crer un projet dans cette catgorie"]})}),t.jsx("main",{className:"max-w-7xl mx-auto px-4 md:px-6 py-8",children:F.length===0?t.jsxs("div",{className:"text-center py-20",children:[t.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:t.jsx(wt,{size:32,className:"text-gray-300"})}),t.jsx("h3",{className:"text-xl font-black text-gray-900 mb-2",children:"Aucun artisan dans cette catgorie"}),t.jsx("p",{className:"text-gray-500 mb-6",children:Q?"Essayez de modifier vos filtres":"Les premiers artisans arrivent bientt !"}),Q&&t.jsx("button",{onClick:T,className:"px-6 py-3 bg-brand-500 text-white font-bold rounded-xl",children:"Rinitialiser les filtres"})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:F.map((S,O)=>t.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-sm border border-gray-100 hover:shadow-lg transition-all duration-300 group animate-in fade-in slide-in-from-bottom-2",style:{animationDelay:`${O*30}ms`},children:[t.jsxs("div",{className:"relative h-56 overflow-hidden bg-gray-100",children:[S.portfolio_first_image?t.jsx("img",{src:S.portfolio_first_image,alt:`Portfolio de ${S.name}`,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onError:j=>{const A=j.target;S.img&&A.src!==S.img&&(A.src=S.img)}}):S.img?t.jsx("img",{src:S.img,alt:S.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}):t.jsx("div",{className:"w-full h-full bg-gradient-to-br from-brand-100 to-orange-100 flex items-center justify-center",children:t.jsx(tt,{size:48,className:"text-gray-300"})}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"}),S.img&&t.jsx("div",{className:"absolute top-3 left-3",children:t.jsx("div",{className:"w-12 h-12 rounded-xl border-2 border-white/90 shadow-lg overflow-hidden bg-white",children:t.jsx("img",{src:S.img,alt:S.name,className:"w-full h-full object-cover",onError:j=>{const A=j.target;A.style.display="none"}})})}),t.jsxs("div",{className:`absolute top-3 right-3 px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-wider flex items-center gap-1.5 shadow-lg ${S.is_available?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:[t.jsx("div",{className:`w-1.5 h-1.5 rounded-full bg-white ${S.is_available?"animate-pulse":""}`}),S.is_available?"Disponible":"Occup"]}),t.jsxs("div",{className:`absolute top-14 right-3 px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-wider flex items-center gap-1 shadow-lg ${L0[S.tier]}`,children:[t.jsx(Qn,{size:12}),S.tier]}),t.jsx("div",{className:"absolute bottom-3 left-3 right-3",children:t.jsxs("div",{className:"flex items-center gap-1.5 text-white text-xs font-bold bg-black/40 backdrop-blur-sm px-3 py-1.5 rounded-lg",children:[t.jsx(Gt,{size:14}),t.jsx("span",{children:S.location})]})}),S.verified&&t.jsx("div",{className:"absolute top-14 left-3 w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center shadow-lg border-2 border-white",children:t.jsx(At,{size:14,className:"text-white"})})]}),t.jsxs("div",{className:"p-5",children:[t.jsxs("h3",{className:"text-lg font-black text-gray-900 mb-1 flex items-center gap-2",children:[S.name,S.verified&&t.jsx(Oe,{size:16,className:"text-blue-500"})]}),S.specialty&&t.jsx("p",{className:"text-sm text-brand-600 font-bold mb-3",children:S.specialty}),t.jsxs("div",{className:"flex items-center gap-4 mb-4 pb-4 border-b border-gray-100",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(Ma,{size:16,className:"text-yellow-400 fill-yellow-400"}),t.jsx("span",{className:"font-black text-gray-900",children:S.rating.toFixed(1)}),t.jsxs("span",{className:"text-gray-400 text-xs",children:["(",S.reviews," avis)"]})]}),t.jsxs("div",{className:"flex items-center gap-1.5 text-gray-600",children:[t.jsx(wt,{size:16}),t.jsxs("span",{className:"font-bold text-sm",children:[S.projects_completed," projets"]})]})]}),S.bio&&t.jsx("p",{className:"text-xs text-gray-600 mb-4 line-clamp-2 leading-relaxed",children:S.bio}),S.portfolio_first_image&&t.jsxs("div",{className:"flex items-center gap-2 mb-4 text-xs text-gray-500",children:[t.jsx(Ss,{size:14}),t.jsx("span",{className:"font-medium",children:"Portfolio disponible"})]}),t.jsx("button",{onClick:()=>u(`/artisans/${S.id}`),className:"w-full py-3 bg-gray-900 text-white font-black rounded-xl hover:bg-brand-500 active:scale-[0.98] transition-all uppercase tracking-widest text-[10px]",children:"Voir le profil complet"})]})]},S.id))})}),P&&F.length>0&&t.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center z-40 md:hidden",children:t.jsxs("button",{onClick:()=>u(`/create-project?category=${h.id}`),className:"flex items-center gap-2 bg-brand-500 text-white px-6 py-4 rounded-2xl font-black text-xs uppercase tracking-widest shadow-2xl shadow-brand-500/30 hover:bg-brand-600 transition-all",children:[t.jsx(xi,{size:18}),"Crer un projet"]})})]}):t.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 p-4",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Catgorie introuvable"}),t.jsx("p",{className:"text-gray-500 mb-6",children:"Cette catgorie n'existe pas ou a t supprime."}),t.jsx("button",{onClick:()=>u("/artisans"),className:"px-6 py-3 bg-brand-500 text-white font-bold rounded-xl",children:"Retour  l'accueil"})]})})}function gp(){const[i,u]=o.useState(!1),[f,d]=o.useState(null),h=o.useCallback(async y=>{u(!0),d(null);try{const{data:g,error:v}=await k.from("projects").insert({client_id:y.client_id,category_id:y.category_id,title:y.title,audio_description_url:y.audio_description_url,photos_urls:y.photos_urls,location:y.location,status:"open"}).select().single();if(v)throw v;return g}catch(g){throw d(g.message),g}finally{u(!1)}},[]),_=o.useCallback(async y=>{u(!0);try{const{data:g,error:v}=await k.from("projects").select("*, categories(*)").eq("client_id",y).order("created_at",{ascending:!1});if(v)throw v;return g}catch(g){return d(g.message),[]}finally{u(!1)}},[]),b=o.useCallback(async y=>{u(!0);try{let g=k.from("projects").select("*, profiles(*), categories(*)").eq("status","open");y&&(g=g.eq("category_id",y));const{data:v,error:N}=await g.order("created_at",{ascending:!1});if(N)throw N;return v}catch(g){return d(g.message),[]}finally{u(!1)}},[]),z=o.useCallback(async y=>{u(!0),d(null);try{const{data:g,error:v}=await k.from("quotes").insert({project_id:y.project_id,artisan_id:y.artisan_id,amount:y.amount,message:y.message,estimated_duration:y.estimated_duration,status:"pending"}).select().single();if(v)throw v;return g}catch(g){throw d(g.message),g}finally{u(!1)}},[]),p=o.useCallback(async y=>{u(!0);try{const{data:g,error:v}=await k.from("quotes").select("*, profiles(*)").eq("project_id",y).order("created_at",{ascending:!1});if(v)throw v;return g}catch(g){return d(g.message),[]}finally{u(!1)}},[]),m=o.useCallback(async(y,g)=>{u(!0),d(null);try{const{error:v}=await k.from("quotes").update({status:"accepted"}).eq("id",y);if(v)throw v;await k.from("quotes").update({status:"rejected"}).eq("project_id",g).neq("id",y);const{error:N}=await k.from("projects").update({status:"quote_accepted"}).eq("id",g);if(N)throw N}catch(v){throw d(v.message),v}finally{u(!1)}},[]);return{loading:i,error:f,createProject:h,getClientProjects:_,getOpenProjects:b,createQuote:z,getProjectQuotes:p,acceptQuote:m}}function ad({onRecordingComplete:i,onDelete:u}){const{error:f}=Da(),[d,h]=o.useState(!1),[_,b]=o.useState(null),[z,p]=o.useState(null),[m,y]=o.useState(0),g=o.useRef(null),v=o.useRef([]),N=o.useRef(null);o.useEffect(()=>()=>{N.current&&clearInterval(N.current)},[]);const H=async()=>{try{const se=await navigator.mediaDevices.getUserMedia({audio:!0}),ie=new MediaRecorder(se);g.current=ie,v.current=[],ie.ondataavailable=Z=>{Z.data.size>0&&v.current.push(Z.data)},ie.onstop=()=>{const Z=new Blob(v.current,{type:"audio/webm"});b(Z),p(URL.createObjectURL(Z)),i(Z),se.getTracks().forEach(me=>me.stop())},ie.start(),h(!0),y(0),N.current=window.setInterval(()=>{y(Z=>Z+1)},1e3)}catch(se){console.error("Error accessing microphone:",se),f("Impossible d'accder au micro.")}},ae=()=>{g.current&&d&&(g.current.stop(),h(!1),N.current&&clearInterval(N.current))},Y=se=>{const ie=Math.floor(se/60),Z=se%60;return`${ie}:${Z.toString().padStart(2,"0")}`},X=()=>{b(null),p(null),y(0),u()};return z?t.jsxs("div",{className:"flex items-center gap-3 bg-brand-50 p-4 rounded-2xl border-2 border-brand-100 animate-in zoom-in duration-200",children:[t.jsx("button",{type:"button",onClick:()=>{new Audio(z).play()},className:"w-12 h-12 bg-brand-500 text-white rounded-full flex items-center justify-center shadow-lg active:scale-90 transition-transform",children:t.jsx(Gl,{fill:"currentColor",size:20})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-xs font-bold text-brand-900 uppercase tracking-widest",children:"Message Vocal"}),t.jsx("div",{className:"text-brand-600 font-medium",children:Y(m)})]}),t.jsx("button",{type:"button",onClick:X,className:"p-3 text-red-500 hover:bg-red-50 rounded-xl transition-colors",children:t.jsx(td,{size:20})})]}):t.jsx("div",{className:"flex flex-col items-center gap-4",children:d?t.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pulse",children:[t.jsx("div",{className:"text-2xl font-black text-brand-600",children:Y(m)}),t.jsx("button",{type:"button",onClick:ae,className:"w-20 h-20 bg-red-500 text-white rounded-full flex items-center justify-center shadow-xl shadow-red-100 animate-bounce",children:t.jsx(Xh,{fill:"currentColor",size:32})}),t.jsx("p",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest",children:"Appuyez pour arrter"})]}):t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsx("button",{type:"button",onClick:H,className:"w-20 h-20 bg-brand-500 text-white rounded-full flex items-center justify-center shadow-xl shadow-brand-100 hover:bg-brand-600 active:scale-90 transition-all",children:t.jsx(yi,{size:32})}),t.jsxs("p",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest text-center",children:["Expliquez votre besoin ",t.jsx("br",{})," vocalement"]})]})})}async function Ps(i){try{const{error:u}=await k.from("notifications").insert({user_id:i.userId,type:i.type,title:i.title,message:i.message||null,data:i.data||{},is_read:!1});if(u)throw console.error("Error creating notification:",u),u}catch(u){console.error("Failed to create notification:",u)}}async function hp(i){try{if(!i.is_open&&i.target_artisan_id){await Ps({userId:i.target_artisan_id,type:"new_project",title:"Nouvelle demande pour vous",message:`Une nouvelle demande "${i.title}" vous a t assigne.`,data:{project_id:i.id}});return}const{data:u}=await k.from("artisans").select("id, category_id, rating_avg, verification_status").eq("category_id",i.category_id).eq("is_available",!0);if(!u||u.length===0)return;let f=u;i.min_rating&&(f=u.filter(h=>(h.rating_avg||0)>=i.min_rating));const d=f.map(h=>({user_id:h.id,type:"new_project",title:"Nouvelle demande dans votre catgorie",message:`Une nouvelle demande "${i.title}" a t publie.`,data:{project_id:i.id}}));d.length>0&&await k.from("notifications").insert(d)}catch(u){console.error("Error notifying artisans:",u)}}async function pp(i,u,f){await Ps({userId:u,type:"new_quote",title:"Nouveau devis reu",message:`${f} a soumis un devis pour votre projet. Vous pouvez maintenant discuter avec lui via le chat.`,data:{project_id:i,chat_enabled:!0}})}async function bp(i,u,f){await Ps({userId:u,type:"quote_accepted",title:"Devis accept !",message:`Votre devis pour "${f}" a t accept. En attente du paiement du client pour dmarrer les travaux.`,data:{project_id:i}})}async function yp(i,u,f){await Ps({userId:u,type:"quote_rejected",title:"Devis refus",message:`Votre devis pour "${f}" a t refus.`,data:{project_id:i}})}async function O0(i,u,f){await Ps({userId:u,type:"project_completed",title:"Travaux termins",message:`Les travaux pour "${f}" sont termins. Confirmez la clture.`,data:{project_id:i}})}async function Zo(i,u,f){await Ps({userId:u,type:"payment_received",title:"Paiement reu",message:`Vous avez reu ${f.toLocaleString("fr-FR")} FCFA. Vous pouvez maintenant commencer les travaux.`,data:{project_id:i}})}async function Ho(i,u,f){await Ps({userId:u,type:"new_message",title:"Nouveau message",message:`${f} vous a envoy un message.`,data:{project_id:i}})}async function jp(i,u,f,d){try{const{data:h,error:_}=await k.from("messages").select("id").eq("project_id",i).or(`sender_id.eq.${u},sender_id.eq.${f}`).limit(1);if(_&&console.error("Error checking existing chat:",_),!h||h.length===0){const{data:b}=await k.from("profiles").select("full_name").eq("id",f).single(),z=(b==null?void 0:b.full_name)||"l'artisan",{error:p}=await k.from("messages").insert({project_id:i,sender_id:f,receiver_id:u,content:`Bonjour ! Votre devis pour "${d}" a t accept. Nous pouvons maintenant discuter des dtails du projet. N'hsitez pas  me contacter si vous avez des questions.`,type:"text"});p?console.error("Error creating welcome message:",p):console.log(`Chat cr automatiquement pour le projet ${i}`)}}catch(h){console.error("Error ensuring project chat exists:",h)}}const vp=["Dakar","This","Diourbel","Fatick","Kaolack","Kaffrine","Kolda","Ziguinchor","Sdhiou","Saint-Louis","Louga","Matam","Tambacounda","Kdougou"],Np=[5,10,20,50,100],wp=[1,2,3,4,5];function _p(){const i=ut(),u=bt(),{categories:f}=Zn(),{loading:d}=gp(),[h,_]=o.useState(""),[b,z]=o.useState(),[p,m]=o.useState(""),[y,g]=o.useState(null),[v,N]=o.useState([]),[H,ae]=o.useState(null),[Y,X]=o.useState(!0),[se,ie]=o.useState(null),[Z,me]=o.useState(null),[oe,ue]=o.useState(null),[L,P]=o.useState(""),[U,F]=o.useState(""),[Q,T]=o.useState(""),[S,O]=o.useState(!1),[j,A]=o.useState({type:"",accessNotes:""}),[B,K]=o.useState(1),[ge,de]=o.useState(!1),[ce,re]=o.useState(null),[ve,W]=o.useState(""),[E,xe]=o.useState(!1),[te,he]=o.useState(null),[we,_e]=o.useState(!1),Se=f.filter(V=>V.name.toLowerCase().includes(ve.toLowerCase())),Ze=f.find(V=>V.id===b);o.useEffect(()=>{(async()=>{if(!b){he(null);return}_e(!0);const{data:fe}=await k.from("projects").select("id").eq("category_id",b);if(!fe||fe.length===0){he(null),_e(!1);return}const pe=fe.map(I=>I.id),{data:Ae}=await k.from("quotes").select("amount").in("project_id",pe).eq("status","accepted").not("amount","is",null);if(Ae&&Ae.length>=3){const I=Ae.map(De=>Number(De.amount)).filter(De=>De>0),Ee=Math.min(...I),Qe=Math.max(...I),Le=I.reduce((De,Ye)=>De+Ye,0)/I.length;he({min:Math.round(Ee/1e3)*1e3,max:Math.round(Qe/1e3)*1e3,avg:Math.round(Le/1e3)*1e3,count:I.length})}else he(null);_e(!1)})()},[b]);const Ce=V=>{if(V.target.files){const fe=Array.from(V.target.files);v.length+fe.length<=5&&N(pe=>[...pe,...fe])}},He=V=>{V.target.files&&V.target.files[0]&&ae(V.target.files[0])},xt=V=>{N(fe=>fe.filter((pe,Ae)=>Ae!==V))},be=()=>{if(U){const V=parseInt(U.split(":")[0]);(V<8||V>=19)&&O(!0)}},Ke=async V=>{var fe,pe,Ae,I,Ee,Qe,Le;if(V.preventDefault(),!i.user){re("Vous devez tre connect pour crer un projet");return}if(!b){re("Veuillez choisir une catgorie");return}de(!0),re(null);try{const{data:{session:De},error:Ye}=await k.auth.getSession();if(Ye||!De)throw new Error("Votre session a expir. Veuillez vous reconnecter.");let Ht="",Dt="",kt=[];if(y){const Me=`${i.user.id}/projects/${Date.now()}.webm`,{data:Pe,error:mt}=await k.storage.from("audio").upload(Me,y);if(mt)throw mt;Ht=k.storage.from("audio").getPublicUrl(Pe.path).data.publicUrl}if(H){const Me=`${i.user.id}/projects/${Date.now()}-video.${H.name.split(".").pop()}`,{data:Pe,error:mt}=await k.storage.from("photos").upload(Me,H);if(mt)throw mt;Dt=k.storage.from("photos").getPublicUrl(Pe.path).data.publicUrl}for(const Me of v){const Pe=`${i.user.id}/projects/${Date.now()}-${Me.name}`,{data:mt,error:oa}=await k.storage.from("photos").upload(Pe,Me);if(oa)throw oa;kt.push(k.storage.from("photos").getPublicUrl(mt.path).data.publicUrl)}let ea=null;j.type&&(ea={type:j.type,accessNotes:j.accessNotes||null});const{data:qe,error:ke}=await k.from("projects").insert({client_id:i.user.id,category_id:b,title:h||"Projet sans titre",audio_description_url:Ht||null,video_url:Dt||null,photos_urls:kt,location:p||null,is_open:Y,target_artisan_id:Y?null:se,max_distance_km:Y&&Z!==null?Number(Z):null,min_rating:Y&&oe!==null?Number(oe):null,preferred_date:L||null,preferred_time_start:U||null,preferred_time_end:Q||null,is_urgent:S,property_details:ea,status:"open",expires_at:new Date(Date.now()+8640*60*1e3).toISOString()}).select().single();if(ke){console.error("Erreur cration projet:",ke);let Me=ke.message;throw(fe=ke.message)!=null&&fe.includes("invalid input syntax for type integer")?Me="Erreur de format de donnes. Veuillez vrifier les champs numriques (distance, note minimum).":(pe=ke.message)!=null&&pe.includes("row-level security policy")&&(Me="Erreur d'autorisation. Veuillez vous reconnecter et ressayer."),new Error(Me)}if(qe){try{await k.rpc("log_project_action",{p_project_id:qe.id,p_user_id:i.user.id,p_action:"created",p_new_value:{title:qe.title,category_id:b,status:"open",is_open:Y,location:p||null},p_metadata:{has_audio:!!Ht,has_video:!!Dt,photos_count:kt.length,is_urgent:S}})}catch(Me){console.error("Error logging project creation:",Me)}hp({id:qe.id,title:qe.title||"Projet sans titre",category_id:b,location:p||void 0,is_open:Y,target_artisan_id:Y?void 0:se||void 0,max_distance_km:Y&&Z||void 0,min_rating:Y&&oe||void 0}).catch(Me=>console.error("Error notifying artisans:",Me));try{await k.from("notifications").insert({user_id:i.user.id,type:"system",title:"Projet cr avec succs",message:`Votre projet "${qe.title||"Projet sans titre"}" a t publi. Les artisans seront notifis.`,data:{project_id:qe.id}})}catch(Me){console.error("Error notifying client:",Me)}}u("/dashboard",{replace:!0})}catch(De){let Ye=De.message;(Ae=De.message)!=null&&Ae.includes("row-level security policy")?Ye="Erreur d'autorisation. Veuillez vous reconnecter et ressayer.":(I=De.message)!=null&&I.includes("Failed to fetch")||(Ee=De.message)!=null&&Ee.includes("network")?Ye="Erreur de connexion. Vrifiez votre connexion internet et ressayez.":((Qe=De.message)!=null&&Qe.includes("JWT")||(Le=De.message)!=null&&Le.includes("token"))&&(Ye="Votre session a expir. Veuillez vous reconnecter."),re(Ye)}finally{de(!1)}};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsxs("header",{className:"sticky top-0 z-20 px-4 py-4 bg-white border-b border-gray-100 flex items-center gap-4",children:[t.jsx("button",{onClick:()=>B>1?K(B-1):u(-1),className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-600",children:t.jsx(Mt,{size:20})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Publier un Projet"}),t.jsxs("p",{className:"text-xs text-gray-400",children:["tape ",B," sur 3"]})]})]}),t.jsx("div",{className:"h-1 bg-gray-100",children:t.jsx("div",{className:"h-full bg-brand-500 transition-all duration-300",style:{width:`${B/3*100}%`}})}),t.jsx("main",{className:"max-w-lg mx-auto px-4 py-6 pb-32",children:t.jsxs("form",{onSubmit:Ke,children:[B===1&&t.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"w-16 h-16 bg-brand-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(yi,{size:28,className:"text-brand-500"})}),t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Dcrivez votre besoin"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Enregistrez un message vocal ou ajoutez des photos"})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-100",children:[t.jsx("h3",{className:"font-bold text-gray-900 mb-4 text-center",children:"Message vocal"}),t.jsx(ad,{onRecordingComplete:V=>g(V),onDelete:()=>g(null)})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-100",children:[t.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Photos (max 5)"}),t.jsxs("div",{className:"flex gap-3 flex-wrap",children:[v.map((V,fe)=>t.jsxs("div",{className:"relative w-20 h-20 rounded-xl overflow-hidden",children:[t.jsx("img",{src:URL.createObjectURL(V),alt:"",className:"w-full h-full object-cover"}),t.jsx("button",{type:"button",onClick:()=>xt(fe),className:"absolute top-1 right-1 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center",children:t.jsx(at,{size:12})})]},fe)),v.length<5&&t.jsxs("label",{className:"w-20 h-20 border-2 border-dashed border-gray-200 rounded-xl flex flex-col items-center justify-center cursor-pointer hover:border-brand-300 transition-colors",children:[t.jsx(bi,{size:20,className:"text-gray-400"}),t.jsx("span",{className:"text-[9px] text-gray-400 font-bold mt-1",children:"PHOTO"}),t.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:Ce})]})]})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-100",children:[t.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Vido (optionnel)"}),H?t.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Ks,{size:20,className:"text-brand-500"}),t.jsx("span",{className:"text-sm text-gray-600 truncate max-w-[200px]",children:H.name})]}),t.jsx("button",{type:"button",onClick:()=>ae(null),className:"text-red-500",children:t.jsx(at,{size:18})})]}):t.jsxs("label",{className:"block w-full border-2 border-dashed border-gray-200 rounded-xl p-6 text-center cursor-pointer hover:border-brand-300 transition-colors",children:[t.jsx(Ks,{size:24,className:"mx-auto text-gray-400 mb-2"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Ajouter une vido"}),t.jsx("input",{type:"file",accept:"video/*",className:"hidden",onChange:He})]})]}),t.jsx("button",{type:"button",onClick:()=>K(2),className:"w-full bg-brand-500 text-white rounded-xl py-4 font-bold hover:bg-brand-600 transition-colors",children:"Continuer"})]}),B===2&&t.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Dtails du projet"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Catgorie, localisation et prfrences"})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Titre du projet"}),t.jsx("input",{value:h,onChange:V=>_(V.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-brand-500 focus:outline-none",placeholder:"Ex: Rparation vier cuisine"})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Catgorie *"}),t.jsxs("div",{className:"relative",children:[t.jsx(It,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{value:ve,onChange:V=>{W(V.target.value),xe(!0)},onFocus:()=>xe(!0),className:"w-full rounded-xl border border-gray-200 pl-12 pr-4 py-3 focus:border-brand-500 focus:outline-none",placeholder:"Rechercher un mtier..."}),Ze&&t.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 bg-brand-100 text-brand-600 text-xs font-bold px-2 py-1 rounded-lg",children:Ze.name})]}),E&&t.jsx("div",{className:"mt-2 max-h-48 overflow-y-auto bg-white border border-gray-200 rounded-xl shadow-lg",children:Se.length===0?t.jsx("p",{className:"p-4 text-sm text-gray-400",children:"Aucun rsultat"}):Se.slice(0,20).map(V=>t.jsx("button",{type:"button",onClick:()=>{z(V.id),W(""),xe(!1)},className:`w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors ${b===V.id?"bg-brand-50 text-brand-600":"text-gray-700"}`,children:V.name},V.id))}),b&&t.jsx("div",{className:"mt-3",children:we?t.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 border-2 border-brand-500 border-t-transparent rounded-full animate-spin"}),t.jsx("span",{className:"text-sm text-gray-500",children:"Estimation en cours..."})]}):te?t.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center flex-shrink-0",children:t.jsx(Vl,{size:20,className:"text-green-600"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-bold text-green-800 mb-1",children:"Estimation de prix"}),t.jsxs("p",{className:"text-xl font-black text-green-700",children:[te.min.toLocaleString("fr-FR")," - ",te.max.toLocaleString("fr-FR")," FCFA"]}),t.jsxs("p",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[t.jsx(Vn,{size:10}),"Bas sur ",te.count," projets similaires"]})]})]})}):t.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-3 flex items-center gap-2",children:[t.jsx(Vn,{size:16,className:"text-blue-500 flex-shrink-0"}),t.jsx("p",{className:"text-xs text-blue-600",children:"Pas assez de donnes pour estimer le prix. Les artisans vous proposeront leurs tarifs."})]})})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[t.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:[t.jsx(Gt,{size:12,className:"inline mr-1"}),"Localisation"]}),t.jsxs("select",{value:p,onChange:V=>m(V.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-brand-500 focus:outline-none appearance-none",children:[t.jsx("option",{value:"",children:"Slectionnez une rgion"}),vp.map(V=>t.jsx("option",{value:V,children:V},V))]})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-gray-100 space-y-4",children:[t.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase",children:[t.jsx(Ql,{size:12,className:"inline mr-1"}),"Date et horaires souhaits"]}),t.jsx("input",{type:"date",value:L,onChange:V=>P(V.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-brand-500 focus:outline-none"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] text-gray-400 font-bold",children:"De"}),t.jsx("input",{type:"time",value:U,onChange:V=>{F(V.target.value),be()},className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-brand-500 focus:outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] text-gray-400 font-bold",children:""}),t.jsx("input",{type:"time",value:Q,onChange:V=>T(V.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-brand-500 focus:outline-none"})]})]}),S&&t.jsxs("div",{className:"bg-yellow-50 rounded-xl p-3 flex items-start gap-2",children:[t.jsx(Ta,{size:16,className:"text-yellow-600 mt-0.5"}),t.jsx("p",{className:"text-xs text-yellow-700",children:"Intervention hors horaires normaux (8h-19h). Des frais supplmentaires peuvent s'appliquer."})]})]}),t.jsx("button",{type:"button",onClick:()=>K(3),disabled:!b,className:"w-full bg-brand-500 text-white rounded-xl py-4 font-bold hover:bg-brand-600 transition-colors disabled:opacity-50",children:"Continuer"})]}),B===3&&t.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Type de demande"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Ouverte  tous ou cible"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("button",{type:"button",onClick:()=>X(!0),className:`p-4 rounded-2xl border-2 transition-all ${Y?"border-brand-500 bg-brand-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[t.jsx(Xs,{size:24,className:`mx-auto mb-2 ${Y?"text-brand-500":"text-gray-400"}`}),t.jsx("p",{className:`font-bold text-sm ${Y?"text-brand-600":"text-gray-700"}`,children:"Demande ouverte"}),t.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"Tous les artisans peuvent rpondre"})]}),t.jsxs("button",{type:"button",onClick:()=>X(!1),className:`p-4 rounded-2xl border-2 transition-all ${Y?"border-gray-200 bg-white hover:border-gray-300":"border-brand-500 bg-brand-50"}`,children:[t.jsx(Ph,{size:24,className:`mx-auto mb-2 ${Y?"text-gray-400":"text-brand-500"}`}),t.jsx("p",{className:`font-bold text-sm ${Y?"text-gray-700":"text-brand-600"}`,children:"Artisan spcifique"}),t.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"Choisir un artisan prcis"})]})]}),Y&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-3",children:"Distance maximum"}),t.jsxs("div",{className:"flex gap-2 flex-wrap",children:[t.jsx("button",{type:"button",onClick:()=>me(null),className:`px-4 py-2 rounded-xl text-sm font-bold transition-all ${Z===null?"bg-brand-500 text-white":"bg-gray-100 text-gray-600"}`,children:"Tous"}),Np.map(V=>t.jsxs("button",{type:"button",onClick:()=>me(V),className:`px-4 py-2 rounded-xl text-sm font-bold transition-all ${Z===V?"bg-brand-500 text-white":"bg-gray-100 text-gray-600"}`,children:[V," km"]},V))]})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-3",children:"Note minimum"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{type:"button",onClick:()=>ue(null),className:`px-4 py-2 rounded-xl text-sm font-bold transition-all ${oe===null?"bg-brand-500 text-white":"bg-gray-100 text-gray-600"}`,children:"Tous"}),wp.map(V=>t.jsxs("button",{type:"button",onClick:()=>ue(V),className:`px-3 py-2 rounded-xl text-sm font-bold transition-all flex items-center gap-1 ${oe===V?"bg-brand-500 text-white":"bg-gray-100 text-gray-600"}`,children:[V,t.jsx(Ma,{size:12,className:oe===V?"fill-white":"fill-yellow-400 text-yellow-400"})]},V))]})]})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(Po,{size:16,className:"text-gray-400"}),t.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Dtails du logement (optionnel)"})]}),t.jsxs("select",{value:j.type,onChange:V=>A({...j,type:V.target.value}),className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-brand-500 focus:outline-none appearance-none mb-3",children:[t.jsx("option",{value:"",children:"Type de bien"}),t.jsx("option",{value:"appartement",children:"Appartement"}),t.jsx("option",{value:"maison",children:"Maison"}),t.jsx("option",{value:"bureau",children:"Bureau"}),t.jsx("option",{value:"commerce",children:"Commerce"}),t.jsx("option",{value:"autre",children:"Autre"})]}),j.type&&t.jsx("input",{value:j.accessNotes,onChange:V=>A({...j,accessNotes:V.target.value}),className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-brand-500 focus:outline-none",placeholder:"Notes d'accs (code, tage, etc.)"})]}),ce&&t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-start gap-3",children:[t.jsx(Ta,{size:20,className:"text-red-500 flex-shrink-0"}),t.jsx("p",{className:"text-sm text-red-600",children:ce})]}),t.jsx("button",{type:"submit",disabled:ge||d||!b,className:"w-full flex items-center justify-center gap-3 bg-brand-500 text-white rounded-xl py-4 font-bold hover:bg-brand-600 transition-colors disabled:opacity-50",children:ge?t.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx(Ch,{size:20}),"Publier ma demande"]})})]})]})})]})}const Sp="modulepreload",zp=function(i){return"/"+i},u0={},B0=function(u,f,d){let h=Promise.resolve();if(f&&f.length>0){let b=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const z=document.querySelector("meta[property=csp-nonce]"),p=(z==null?void 0:z.nonce)||(z==null?void 0:z.getAttribute("nonce"));h=b(f.map(m=>{if(m=zp(m),m in u0)return;u0[m]=!0;const y=m.endsWith(".css"),g=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${g}`))return;const v=document.createElement("link");if(v.rel=y?"stylesheet":Sp,y||(v.as="script"),v.crossOrigin="",v.href=m,p&&v.setAttribute("nonce",p),document.head.appendChild(v),y)return new Promise((N,H)=>{v.addEventListener("load",N),v.addEventListener("error",()=>H(new Error(`Unable to preload CSS for ${m}`)))})}))}function _(b){const z=new Event("vite:preloadError",{cancelable:!0});if(z.payload=b,window.dispatchEvent(z),!z.defaultPrevented)throw b}return h.then(b=>{for(const z of b||[])z.status==="rejected"&&_(z.reason);return u().catch(_)})},kp=.18,Cp=.1,x0=.5,Ep=0;function m0(i,u=0,f=10,d=!1){const h=i*(u/100),_=i+h,b=_*(f/100),z=b*kp,p=_-b-z,m=d?x0*100:Ep*100,y=d?p*x0:0,g=p-y;return{baseAmount:i,urgentSurcharge:h,totalAmount:_,commissionPercent:f,commissionAmount:b,tvaAmount:z,artisanPayout:p,advancePercent:m,advanceAmount:y,remainingAmount:g}}function ji(){const[i,u]=o.useState(!1),[f,d]=o.useState(null),h=o.useCallback(async y=>{u(!0),d(null);try{const g=y.urgent_surcharge_percent||0,v=y.commission_percent||Cp*100,N=m0(y.total_amount,g,v,y.artisan_is_verified),{data:H,error:ae}=await k.from("escrows").insert({project_id:y.project_id,total_amount:N.totalAmount,base_amount:N.baseAmount,urgent_surcharge:N.urgentSurcharge,commission_percent:N.commissionPercent,commission_amount:N.commissionAmount,tva_amount:N.tvaAmount,artisan_payout:N.artisanPayout,advance_percent:N.advancePercent,advance_amount:N.advanceAmount,advance_paid:0,status:"pending"}).select().single();if(ae)throw ae;return H}catch(g){throw d(g.message),g}finally{u(!1)}},[]),_=o.useCallback(async(y,g)=>{u(!0);try{const{data:v}=await k.from("escrows").select("*, projects(id, title, client_id)").eq("id",y).single(),{error:N}=await k.from("escrows").update({status:"held",payment_method:g,updated_at:new Date().toISOString()}).eq("id",y);if(N)throw N;if(v!=null&&v.project_id&&await k.from("projects").update({status:"in_progress"}).eq("id",v.project_id),v!=null&&v.project_id){const{data:H}=await k.from("quotes").select("artisan_id, amount").eq("project_id",v.project_id).eq("status","accepted").single();H!=null&&H.artisan_id&&await Zo(v.project_id,H.artisan_id,Number(v.artisan_payout||0))}}catch(v){throw d(v.message),v}finally{u(!1)}},[]),b=o.useCallback(async y=>{u(!0);try{const{data:g}=await k.from("escrows").select("advance_amount, project_id, projects(id, title)").eq("id",y).single(),{error:v}=await k.from("escrows").update({is_advance_paid:!0,advance_paid:(g==null?void 0:g.advance_amount)||0,status:"advance_paid",updated_at:new Date().toISOString()}).eq("id",y);if(v)throw v;if(g!=null&&g.project_id){const{data:N}=await k.from("quotes").select("artisan_id").eq("project_id",g.project_id).eq("status","accepted").single();N!=null&&N.artisan_id&&g.advance_amount&&await Zo(g.project_id,N.artisan_id,Number(g.advance_amount))}}catch(g){throw d(g.message),g}finally{u(!1)}},[]),z=o.useCallback(async y=>{u(!0);try{const{error:g}=await k.from("escrows").update({status:"released",updated_at:new Date().toISOString()}).eq("id",y);if(g)throw g}catch(g){throw d(g.message),g}finally{u(!1)}},[]),p=o.useCallback(async y=>{u(!0);try{const{error:g}=await k.from("escrows").update({status:"frozen",updated_at:new Date().toISOString()}).eq("id",y);if(g)throw g}catch(g){throw d(g.message),g}finally{u(!1)}},[]),m=o.useCallback(async y=>{u(!0);try{const{error:g}=await k.from("escrows").update({status:"refunded",updated_at:new Date().toISOString()}).eq("id",y);if(g)throw g}catch(g){throw d(g.message),g}finally{u(!1)}},[]);return{loading:i,error:f,initiateEscrow:h,confirmDeposit:_,releaseAdvance:b,releaseFullPayment:z,freezeEscrow:p,refundEscrow:m,calculateEscrow:m0}}const Qt=[{id:"wave",name:"Wave",icon:"",logo:"/payment-logos/wave.png",description:"Paiement mobile Wave",processingTime:"Instantan",fees:0,minAmount:100,maxAmount:5e6,available:!0},{id:"orange_money",name:"Orange Money",icon:"",logo:"/payment-logos/orange-money.png",description:"Paiement mobile Orange Money",processingTime:"Instantan",fees:1,minAmount:100,maxAmount:2e6,available:!0},{id:"card",name:"Carte Bancaire",icon:"",logo:"/payment-logos/card.png",description:"Visa, Mastercard",processingTime:"Instantan",fees:2.5,minAmount:1e3,maxAmount:1e7,available:!0}],f0=i=>{const u=Date.now().toString(36).toUpperCase(),f=Math.random().toString(36).substring(2,8).toUpperCase();return`${i}-${u}-${f}`},g0=()=>{const u=new Date().toISOString().slice(0,10).replace(/-/g,""),f=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`MBK-${u}-${f}`};async function V0(i,u,f){await new Promise(z=>setTimeout(z,1500+Math.random()*1e3));const d=Qt.find(z=>z.id===u);if(!d)return{success:!1,transactionId:"",reference:"",timestamp:new Date,amount:i,fees:0,totalCharged:i,method:u,status:"failed",message:"Mthode de paiement non reconnue"};if(i<d.minAmount)return{success:!1,transactionId:"",reference:"",timestamp:new Date,amount:i,fees:0,totalCharged:i,method:u,status:"failed",message:`Montant minimum: ${d.minAmount.toLocaleString("fr-FR")} FCFA`};if(i>d.maxAmount)return{success:!1,transactionId:"",reference:"",timestamp:new Date,amount:i,fees:0,totalCharged:i,method:u,status:"failed",message:`Montant maximum: ${d.maxAmount.toLocaleString("fr-FR")} FCFA`};const h=Math.round(i*d.fees/100),_=i+h;return Math.random()>.05?{success:!0,transactionId:f0("PAY"),reference:g0(),timestamp:new Date,amount:i,fees:h,totalCharged:_,method:d.name,status:u==="bank_transfer"?"pending":"completed",message:u==="bank_transfer"?"Virement en attente de confirmation bancaire":"Paiement effectu avec succs"}:{success:!1,transactionId:f0("FAIL"),reference:g0(),timestamp:new Date,amount:i,fees:h,totalCharged:_,method:d.name,status:"failed",message:"Paiement refus par l'oprateur. Veuillez ressayer."}}const Gn={message:"Mode dmonstration - Paiements simuls",warning:"Les transactions sont simules. Aucun vrai paiement n'est effectu."};function Ap({open:i,escrow:u,initialMethodId:f,onClose:d,onSuccess:h}){const[_,b]=o.useState(Number(u.total_amount)||0),[z,p]=o.useState(f||Qt[0].id),[m,y]=o.useState(""),[g,v]=o.useState(!1),[N,H]=o.useState(null),[ae,Y]=o.useState(null);o.useEffect(()=>{i&&(b(Number(u.total_amount)||0),p(f||Qt[0].id),H(null),Y(null),y(""))},[i,u,f]);const X=o.useMemo(()=>Qt.find(Z=>Z.id===z)||Qt[0],[z]),se=o.useMemo(()=>{const Z=Math.round(_*((X==null?void 0:X.fees)||0)/100);return _+Z},[_,X]),ie=async()=>{if(_<=0){Y("Saisissez un montant suprieur  0");return}v(!0),Y(null);try{const Z=await V0(_,z,{projectId:u.project_id??void 0,escrowId:u.id,phoneNumber:m||void 0});H(Z),Y(Z.success?null:Z.message),Z.success&&(await h(z,Z),d())}catch{Y("Erreur lors du traitement du paiement")}finally{v(!1)}};return i?t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:t.jsxs("div",{className:"w-full max-w-md rounded-3xl bg-white p-6 shadow-2xl",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-bold uppercase text-gray-500 tracking-[0.2em]",children:"Paiement"}),t.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Mode bypass"})]}),t.jsx("button",{onClick:d,className:"text-gray-400 hover:text-gray-600",children:t.jsx(hi,{size:24})})]}),t.jsxs("div",{className:"mt-4 rounded-2xl border border-yellow-200 bg-yellow-50 px-4 py-3 text-xs text-yellow-700",children:[t.jsx("p",{className:"font-semibold",children:Gn.message}),t.jsx("p",{children:Gn.warning})]}),t.jsxs("div",{className:"mt-6 space-y-3",children:[t.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Montant  scuriser"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"number",min:0,value:_,onChange:Z=>b(Number(Z.target.value)),className:"flex-1 rounded-2xl border border-gray-200 px-4 py-3 text-lg font-bold text-gray-900 focus:border-brand-500 focus:outline-none"}),t.jsx("span",{className:"text-xs font-black text-gray-500",children:"FCFA"})]})]}),t.jsxs("div",{className:"mt-5",children:[t.jsx("p",{className:"text-xs font-bold uppercase text-gray-500 tracking-[0.3em]",children:"Mthode"}),t.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Qt.filter(Z=>Z.logo).map(Z=>t.jsxs("button",{type:"button",onClick:()=>p(Z.id),className:`flex-1 min-w-[120px] rounded-2xl border-2 px-4 py-4 text-center transition ${z===Z.id?"border-brand-500 bg-brand-50 text-brand-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,children:[t.jsx("div",{className:"flex items-center justify-center mb-2 h-14 min-h-[56px]",children:Z.logo?t.jsx("img",{src:Z.logo,alt:Z.name,className:"max-h-14 max-w-full object-contain w-auto h-auto",style:{maxHeight:"56px",maxWidth:"100%"},onError:me=>{const oe=me.target,ue=oe.parentElement;if(ue){oe.style.display="none";const L=document.createElement("div");L.className="text-2xl",L.textContent=Z.icon,ue.appendChild(L)}}}):t.jsx("div",{className:"text-2xl",children:Z.icon})}),t.jsx("div",{className:"text-xs font-bold uppercase",children:Z.name})]},Z.id))}),Qt.filter(Z=>!Z.logo&&Z.available).length>0&&t.jsx("div",{className:"mt-2 grid grid-cols-2 gap-2",children:Qt.filter(Z=>!Z.logo&&Z.available).map(Z=>t.jsxs("button",{type:"button",onClick:()=>p(Z.id),className:`rounded-2xl border px-4 py-3 text-left transition ${z===Z.id?"border-brand-500 bg-brand-50 text-brand-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,children:[t.jsx("div",{className:"text-xl mb-2",children:Z.icon}),t.jsx("div",{className:"text-sm font-bold",children:Z.name}),t.jsx("p",{className:"text-xs text-gray-500",children:Z.description})]},Z.id))})]}),t.jsxs("div",{className:"mt-5 space-y-2",children:[t.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Numro du payeur"}),t.jsx("input",{type:"tel",value:m,onChange:Z=>y(Z.target.value),placeholder:"ex: 77xxxxxx",className:"w-full rounded-2xl border border-gray-200 px-4 py-3 text-sm text-gray-700 focus:border-brand-500 focus:outline-none"}),t.jsx("p",{className:"text-[10px] text-gray-400",children:"Optionnel, permet de contextualiser la transaction ct oprateur."})]}),t.jsxs("div",{className:"mt-5 rounded-2xl border border-gray-100 bg-gray-50 p-4 text-sm space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-gray-500",children:[t.jsxs("span",{children:["Frais (",(X==null?void 0:X.fees)??0,"%)"]}),t.jsxs("span",{children:[Math.round(_*(((X==null?void 0:X.fees)??0)/100)).toLocaleString("fr-FR")," FCFA"]})]}),t.jsxs("div",{className:"flex justify-between font-bold text-gray-900",children:[t.jsx("span",{children:"Total"}),t.jsxs("span",{children:[se.toLocaleString("fr-FR")," FCFA"]})]}),t.jsxs("p",{className:"text-[11px] text-gray-400",children:["Mthode slectionne : ",t.jsx("strong",{children:X==null?void 0:X.name})]})]}),N&&t.jsxs("div",{className:`mt-4 flex items-center gap-2 rounded-2xl border px-4 py-3 text-sm ${N.success?"border-green-200 bg-green-50 text-green-800":"border-red-200 bg-red-50 text-red-700"}`,children:[N.success?t.jsx(Oe,{size:20}):t.jsx(Tt,{size:20}),t.jsx("span",{children:N.message})]}),ae&&t.jsxs("div",{className:"mt-4 flex items-center gap-2 rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:[t.jsx(Tt,{size:18}),t.jsx("span",{children:ae})]}),t.jsxs("div",{className:"mt-6 flex items-center justify-between gap-3",children:[t.jsx("button",{type:"button",onClick:d,className:"flex-1 rounded-2xl border border-gray-200 bg-white px-4 py-3 text-sm font-bold text-gray-600 transition hover:border-gray-300",children:"Annuler"}),t.jsx("button",{type:"button",onClick:ie,disabled:g,className:"flex-1 rounded-2xl bg-gradient-to-r from-brand-500 to-brand-600 px-4 py-3 text-sm font-bold uppercase tracking-[0.2em] text-white transition disabled:opacity-60",children:g?t.jsx(ca,{className:"mx-auto h-4 w-4 animate-spin"}):"Simuler le paiement"})]})]})}):null}const h0={pending:{label:"En attente de paiement",color:"text-yellow-700",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",icon:St},held:{label:"Fonds scuriss",color:"text-green-700",bgColor:"bg-green-50",borderColor:"border-green-200",icon:Xo},advance_paid:{label:"Avance verse",color:"text-blue-700",bgColor:"bg-blue-50",borderColor:"border-blue-200",icon:D0},released:{label:"Paiement effectu",color:"text-green-700",bgColor:"bg-green-50",borderColor:"border-green-200",icon:Sa},frozen:{label:"Fonds gels (litige)",color:"text-red-700",bgColor:"bg-red-50",borderColor:"border-red-200",icon:Tt},refunded:{label:"Rembours",color:"text-gray-700",bgColor:"bg-gray-50",borderColor:"border-gray-200",icon:qh}};function Mp({escrow:i,isClient:u,onRefresh:f}){const{confirmDeposit:d,releaseAdvance:h,loading:_}=ji(),[b,z]=o.useState(!1),[p,m]=o.useState(!1),[y,g]=o.useState("wave"),v=h0[i.status||"pending"]||h0.pending,N=v.icon,H=()=>z(!0),ae=async U=>{await d(i.id,U),f()},Y=async()=>{await h(i.id),f()},X=i.total_amount||0,se=i.base_amount||X,ie=i.urgent_surcharge||0,Z=i.commission_amount||0,me=i.tva_amount||0,oe=i.artisan_payout||0,ue=i.advance_amount||0,L=i.advance_paid||0,P=oe-L;return t.jsxs("div",{className:`rounded-2xl p-5 border-2 mb-6 ${v.bgColor} ${v.borderColor}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${i.status==="frozen"?"bg-red-500":i.status==="held"?"bg-green-500":"bg-brand-500"} text-white`,children:t.jsx(A0,{size:20})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-gray-900 text-sm",children:"Garantie Mbourake"}),t.jsxs("div",{className:`flex items-center gap-1 text-xs font-bold ${v.color}`,children:[t.jsx(N,{size:12}),v.label]})]})]}),i.transaction_number&&t.jsx("span",{className:"text-[9px] font-mono text-gray-400 bg-white px-2 py-1 rounded",children:i.transaction_number})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 mb-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Montant total"}),t.jsxs("span",{className:"text-xl font-black text-gray-900",children:[X.toLocaleString("fr-FR")," FCFA"]})]}),t.jsxs("button",{onClick:()=>m(!p),className:"w-full flex items-center justify-center gap-1 text-xs text-gray-400 hover:text-gray-600 pt-2 border-t border-gray-100",children:[p?t.jsx($o,{size:14}):t.jsx(Yn,{size:14}),p?"Masquer":"Voir le dtail"]}),p&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 space-y-2 text-sm animate-in fade-in duration-200",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"Montant de base"}),t.jsxs("span",{className:"font-bold",children:[se.toLocaleString("fr-FR")," FCFA"]})]}),ie>0&&t.jsxs("div",{className:"flex justify-between text-yellow-600",children:[t.jsx("span",{children:"Majoration urgence"}),t.jsxs("span",{className:"font-bold",children:["+",ie.toLocaleString("fr-FR")," FCFA"]})]}),t.jsxs("div",{className:"flex justify-between text-gray-400",children:[t.jsxs("span",{children:["Commission (",i.commission_percent||10,"%)"]}),t.jsxs("span",{children:["-",Z.toLocaleString("fr-FR")," FCFA"]})]}),t.jsxs("div",{className:"flex justify-between text-gray-400",children:[t.jsx("span",{children:"TVA (18%)"}),t.jsxs("span",{children:["-",me.toLocaleString("fr-FR")," FCFA"]})]}),t.jsxs("div",{className:"flex justify-between text-green-600 font-bold pt-2 border-t border-gray-100",children:[t.jsx("span",{children:"Paiement artisan"}),t.jsxs("span",{children:[oe.toLocaleString("fr-FR")," FCFA"]})]}),ue>0&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex justify-between text-blue-600",children:[t.jsxs("span",{children:["Avance (",i.advance_percent||50,"%)"]}),t.jsxs("span",{className:"font-bold",children:[ue.toLocaleString("fr-FR")," FCFA"]})]}),L>0&&t.jsxs("div",{className:"flex justify-between text-green-500",children:[t.jsx("span",{children:"Avance verse"}),t.jsxs("span",{className:"font-bold",children:["-",L.toLocaleString("fr-FR")," FCFA"]})]}),t.jsxs("div",{className:"flex justify-between font-bold",children:[t.jsx("span",{children:"Reste  verser"}),t.jsxs("span",{children:[P.toLocaleString("fr-FR")," FCFA"]})]})]})]})]}),u&&i.status==="pending"&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-xs text-gray-600 text-center font-medium",children:"Moyens de paiement temporaires"}),t.jsx("div",{className:"rounded-xl border border-yellow-200 bg-yellow-50 px-3 py-2 text-[10px] font-bold text-yellow-700",children:Gn.message})]}),t.jsx("div",{className:"flex gap-2",children:Qt.filter(U=>["wave","orange_money","card"].includes(U.id)&&U.logo).map(U=>{const F=U.id==="orange_money"?"orange":U.id;return t.jsxs("button",{onClick:()=>g(F),className:`flex-1 p-3 rounded-xl border-2 text-center transition-all ${y===F?"border-brand-500 bg-brand-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[t.jsx("div",{className:"flex items-center justify-center mb-1 h-10 min-h-[40px]",children:U.logo?t.jsx("img",{src:U.logo,alt:U.name,className:"max-h-10 max-w-full object-contain",style:{maxHeight:"40px",maxWidth:"100%"},onError:Q=>{const T=Q.target,S=T.parentElement;if(S){T.style.display="none";const O=document.createElement("span");O.className="text-xl block",O.textContent=U.icon,S.appendChild(O)}}}):t.jsx("span",{className:"text-xl block",children:U.icon})}),t.jsx("span",{className:"text-[10px] font-bold text-gray-600 uppercase block",children:U.id==="orange_money"?"Orange":U.name.toUpperCase()})]},U.id)})}),t.jsxs("button",{onClick:H,className:"w-full bg-green-500 text-white font-bold py-4 rounded-xl flex items-center justify-center gap-2 hover:bg-green-600 transition-colors",children:[t.jsx(Wa,{size:20}),"Payer ",X.toLocaleString("fr-FR")," FCFA"]})]}),t.jsx(Ap,{open:b,escrow:i,initialMethodId:y,onClose:()=>z(!1),onSuccess:ae}),!u&&i.status==="held"&&ue>0&&!i.is_advance_paid&&t.jsxs("div",{className:"bg-white rounded-xl p-4 space-y-3",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm font-bold text-gray-900",children:"Avance disponible"}),t.jsxs("p",{className:"text-2xl font-black text-brand-500",children:[ue.toLocaleString("fr-FR")," FCFA"]}),t.jsxs("p",{className:"text-xs text-gray-400",children:[i.advance_percent||50,"% du paiement total"]})]}),t.jsx("button",{onClick:Y,disabled:_,className:"w-full bg-brand-500 text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-brand-600 transition-colors disabled:opacity-50",children:_?t.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx(D0,{size:18}),"Recevoir mon avance"]})})]}),i.status==="advance_paid"&&t.jsxs("div",{className:"bg-white rounded-xl p-4 text-center",children:[t.jsx(Sa,{size:24,className:"text-green-500 mx-auto mb-2"}),t.jsx("p",{className:"font-bold text-gray-900 text-sm",children:"Avance verse"}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Le reste (",P.toLocaleString("fr-FR")," FCFA) sera vers  la fin du projet"]})]}),i.status==="held"&&(ue===0||i.is_advance_paid)&&t.jsxs("div",{className:"bg-white rounded-xl p-4 space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-700 font-bold text-sm mb-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-ping"}),"Fonds scuriss dans l'escrow"]}),t.jsx("p",{className:"text-xs text-gray-600 text-center leading-relaxed",children:"Le montant a t retenu pour garantir l'excution du projet. Une fois que le projet sera conclu et valid par le client, le montant sera automatiquement revers sur votre compte."})]}),i.status==="released"&&t.jsxs("div",{className:"bg-white rounded-xl p-4 text-center",children:[t.jsx(Sa,{size:24,className:"text-green-500 mx-auto mb-2"}),t.jsx("p",{className:"font-bold text-green-600 text-sm",children:"Paiement complet effectu"})]}),i.status==="frozen"&&t.jsxs("div",{className:"bg-white rounded-xl p-4 text-center",children:[t.jsx(Tt,{size:24,className:"text-red-500 mx-auto mb-2"}),t.jsx("p",{className:"font-bold text-red-600 text-sm",children:"Fonds gels"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Un litige est en cours de rsolution"})]})]})}function Tp(i){const u=i.lastIndexOf("."),f=u>0?i.substring(0,u):i,d=u>0?i.substring(u).toLowerCase():"";let h=f.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9._-]/g,"_").replace(/_+/g,"_").replace(/^_+|_+$/g,"").substring(0,150);return h||(h="file"),h.length<3&&(h=h+"_"+Math.random().toString(36).substring(2,6)),h+d}function Dp(i,u){const f=Tp(i),d=Date.now(),h=Math.random().toString(36).substring(2,9);return`${d}-${h}-${f}`}function qp(i,u){const f=o.useRef(u);return o.useEffect(()=>{f.current=u},[u]),o.useEffect(()=>{if(!i)return;const d=h=>{const _=f.current||"Vous avez une soumission en cours. tes-vous sr de vouloir quitter cette page ?";return h.preventDefault(),h.returnValue=_,_};return window.addEventListener("beforeunload",d),()=>{window.removeEventListener("beforeunload",d)}},[i]),{isBlocking:i}}const Rp=[0,10,20,30,50,75,100];function Up({projectId:i,artisanId:u,isUrgent:f=!1,onSuccess:d,onCancel:h}){const[_,b]=o.useState(""),[z,p]=o.useState(""),[m,y]=o.useState(0),[g,v]=o.useState(""),[N,H]=o.useState(""),[ae,Y]=o.useState(48),[X,se]=o.useState(""),[ie,Z]=o.useState(""),[me,oe]=o.useState(""),[ue,L]=o.useState(null),[P,U]=o.useState(null),[F,Q]=o.useState(!1),[T,S]=o.useState(!1),[O,j]=o.useState(null),[A,B]=o.useState(!1);qp(A||T,"Vous tes en train de soumettre un devis. tes-vous sr de vouloir quitter cette page ? Vos modifications pourraient tre perdues.");const K=parseFloat(_)||0,ge=parseFloat(z)||0,de=K+ge,ce=f?de*m/100:0,re=de+ce,ve=E=>{E.target.files&&E.target.files[0]&&U(E.target.files[0])},W=async E=>{var xe,te,he;if(E.preventDefault(),A||T){console.log("[DEBUG QuoteForm] Submission already in progress, ignoring duplicate submit");return}if(re<=0){j("Veuillez entrer un montant valide");return}B(!0),S(!0),j(null);try{console.log("[DEBUG QuoteForm] Submitting quote - Project:",i,"Artisan:",u);let we=null,_e=null;if(ue){const be=`${u}/quotes/${Date.now()}.webm`,{data:Ke,error:V}=await k.storage.from("audio").upload(be,ue);if(V)throw V;we=k.storage.from("audio").getPublicUrl(Ke.path).data.publicUrl}if(P){const be=P.type||"",Ke=P.name.toLowerCase().endsWith(".pdf")||be==="application/pdf",V=Ke?"documents":"photos",fe=Dp(P.name),pe=`${u}/proformas/${fe}`,{data:Ae,error:I}=await k.storage.from(V).upload(pe,P,{contentType:P.type||(Ke?"application/pdf":"image/jpeg"),upsert:!1});if(I)throw console.error("Erreur upload proforma:",I),console.error("Nom de fichier original:",P.name),console.error("Nom de fichier nettoy:",fe),console.error("Chemin complet:",pe),new Error(`Erreur lors de l'upload du fichier: ${I.message}`);_e=k.storage.from(V).getPublicUrl(Ae.path).data.publicUrl}const Se={project_id:i,artisan_id:u,amount:Number(re)||0,labor_cost:Number(K)||0,materials_cost:Number(ge)||0,urgent_surcharge_percent:f?Number(m):0,message:g||null,estimated_duration:N||null,validity_hours:Number(ae)||48,proposed_date:X||null,proposed_time_start:ie||null,proposed_time_end:me||null,audio_message_url:we||null,proforma_url:_e||null,status:"pending"};let Ze=null;const{data:Ce,error:He}=await k.from("quotes").insert(Se).select("id").single();if(He&&(He.code==="23505"||He.code==="409"||(xe=He.message)!=null&&xe.includes("duplicate")||(te=He.message)!=null&&te.includes("unique")||(he=He.message)!=null&&he.includes("Conflict"))){console.log("[DEBUG QuoteForm] Quote exists, updating most recent quote instead"),console.log("[DEBUG QuoteForm] Insert error details:",He);const{data:be,error:Ke}=await k.from("quotes").select("id, status, quote_number").eq("project_id",i).eq("artisan_id",u).order("created_at",{ascending:!1}).limit(1);if(console.log("[DEBUG QuoteForm] Existing quotes fetched:",be),Ke)throw console.error("[DEBUG QuoteForm] Error fetching existing quote:",Ke),new Error(`Erreur lors de la rcupration du devis existant: ${Ke.message}`);const V=be&&be.length>0?be[0]:null;if(V!=null&&V.id){if(V.status==="accepted")throw new Error("Ce devis a dj t accept et ne peut plus tre modifi. Veuillez crer un nouveau devis si ncessaire.");const{data:fe,error:pe}=await k.from("quotes").update({amount:Se.amount,labor_cost:Se.labor_cost,materials_cost:Se.materials_cost,urgent_surcharge_percent:Se.urgent_surcharge_percent,message:Se.message,estimated_duration:Se.estimated_duration,validity_hours:Se.validity_hours,proposed_date:Se.proposed_date,proposed_time_start:Se.proposed_time_start,proposed_time_end:Se.proposed_time_end,audio_message_url:Se.audio_message_url,proforma_url:Se.proforma_url,updated_at:new Date().toISOString(),status:V.status==="rejected"||V.status==="abandoned"?"pending":V.status||"pending"}).eq("id",V.id).select("id");if(pe)throw new Error(`Erreur lors de la mise  jour du devis: ${pe.message}`);const Ae=fe&&fe.length>0?fe[0]:null;Ze=(Ae==null?void 0:Ae.id)||V.id,console.log("[DEBUG QuoteForm] Quote updated successfully:",Ze)}else{console.warn("[DEBUG QuoteForm] 409 error but quote not found - likely RLS blocking or already exists"),console.warn("[DEBUG QuoteForm] Considering as success - quote may already exist"),setTimeout(()=>{d()},500);return}}else{if(He)throw He;Ze=(Ce==null?void 0:Ce.id)||null,console.log("[DEBUG QuoteForm] Quote created successfully:",Ze)}const xt=Ze?{id:Ze}:null;try{const{data:be}=await k.from("projects").select("client_id, title").eq("id",i).single();if(be!=null&&be.client_id){const{data:Ke}=await k.from("messages").select("id").eq("project_id",i).eq("sender_id",u).eq("receiver_id",be.client_id).limit(1).maybeSingle();if(!Ke){const{data:V}=await k.from("profiles").select("full_name").eq("id",u).single();await k.from("messages").insert({project_id:i,sender_id:u,receiver_id:be.client_id,content:`Bonjour, j'ai soumis un devis pour votre projet "${be.title||"votre projet"}". N'hsitez pas  me contacter pour discuter des dtails.`,is_system_message:!1}),xt!=null&&xt.id&&await k.rpc("log_quote_action",{p_quote_id:xt.id,p_project_id:i,p_user_id:u,p_action:"chat_created",p_metadata:{auto_created:!0}})}}}catch(be){console.error("Error creating chat:",be)}if(await k.from("projects").update({status:"quote_received"}).eq("id",i),xt!=null&&xt.id)try{await k.rpc("log_quote_action",{p_quote_id:xt.id,p_project_id:i,p_user_id:u,p_action:"submitted",p_new_value:{amount:re,status:"pending"}})}catch(be){console.error("Error logging quote action:",be)}try{const{data:be}=await k.from("projects").select("client_id").eq("id",i).single(),{data:Ke}=await k.from("profiles").select("full_name").eq("id",u).single();be!=null&&be.client_id&&(Ke!=null&&Ke.full_name)&&await pp(i,be.client_id,Ke.full_name)}catch(be){console.error("Error notifying client:",be)}d()}catch(we){j(we.message)}finally{S(!1),B(!1)}};return t.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 overflow-hidden",children:[t.jsxs("div",{className:"p-4 bg-gradient-to-r from-brand-500 to-brand-600 text-white",children:[t.jsx("h3",{className:"font-bold text-lg",children:"Proposer un devis"}),t.jsx("p",{className:"text-white/70 text-sm",children:"Envoyez votre proposition au client"})]}),t.jsxs("form",{onSubmit:W,className:"p-4 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Main d'uvre"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",value:_,onChange:E=>b(E.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-3 pr-16 focus:border-brand-500 focus:outline-none text-gray-900",placeholder:"0",required:!0}),t.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-xs text-gray-400 font-bold",children:"FCFA"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Matriaux"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",value:z,onChange:E=>p(E.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-3 pr-16 focus:border-brand-500 focus:outline-none text-gray-900",placeholder:"0"}),t.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-xs text-gray-400 font-bold",children:"FCFA"})]})]})]}),f&&t.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(Ta,{size:16,className:"text-yellow-600"}),t.jsx("label",{className:"text-xs font-bold text-yellow-700 uppercase",children:"Majoration intervention urgente"})]}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:Rp.map(E=>t.jsxs("button",{type:"button",onClick:()=>y(E),className:`px-3 py-2 rounded-lg text-sm font-bold transition-all ${m===E?"bg-yellow-500 text-white":"bg-white text-gray-600 border border-gray-200"}`,children:["+",E,"%"]},E))})]}),t.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 flex items-center justify-between",children:[t.jsx("span",{className:"font-bold text-gray-700",children:"Total"}),t.jsxs("span",{className:"text-2xl font-black text-brand-500",children:[re.toLocaleString("fr-FR")," FCFA"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Description du devis"}),t.jsx("textarea",{value:g,onChange:E=>v(E.target.value),rows:3,className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-brand-500 focus:outline-none resize-none text-gray-900",placeholder:"Dtaillez votre intervention..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Note vocale (optionnel)"}),t.jsx(ad,{onRecordingComplete:E=>L(E),onDelete:()=>L(null)})]}),t.jsxs("button",{type:"button",onClick:()=>Q(!F),className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 rounded-xl text-gray-600 font-medium",children:[t.jsx("span",{className:"text-sm",children:"Options avances"}),F?t.jsx($o,{size:18}):t.jsx(Yn,{size:18})]}),F&&t.jsxs("div",{className:"space-y-4 animate-in fade-in duration-200",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:[t.jsx(St,{size:12,className:"inline mr-1"}),"Dure estime"]}),t.jsx("input",{value:N,onChange:E=>H(E.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-brand-500 focus:outline-none text-gray-900",placeholder:"Ex: 2 heures, 3 jours..."})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:[t.jsx(Ql,{size:12,className:"inline mr-1"}),"Proposition d'intervention"]}),t.jsx("input",{type:"date",value:X,onChange:E=>se(E.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-brand-500 focus:outline-none mb-2 text-gray-900"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("input",{type:"time",value:ie,onChange:E=>Z(E.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-brand-500 focus:outline-none text-gray-900"}),t.jsx("input",{type:"time",value:me,onChange:E=>oe(E.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-brand-500 focus:outline-none text-gray-900"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Validit du devis"}),t.jsxs("select",{value:ae,onChange:E=>Y(Number(E.target.value)),className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-brand-500 focus:outline-none text-gray-900",children:[t.jsx("option",{value:24,children:"24 heures"}),t.jsx("option",{value:48,children:"48 heures"}),t.jsx("option",{value:72,children:"72 heures"}),t.jsx("option",{value:168,children:"7 jours"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:[t.jsx(zt,{size:12,className:"inline mr-1"}),"Facture proforma"]}),P?t.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-3",children:[t.jsx("span",{className:"text-sm text-gray-600 truncate max-w-[200px]",children:P.name}),t.jsx("button",{type:"button",onClick:()=>U(null),className:"text-red-500",children:t.jsx(at,{size:18})})]}):t.jsxs("label",{className:"block w-full border-2 border-dashed border-gray-200 rounded-xl p-4 text-center cursor-pointer hover:border-brand-300 transition-colors",children:[t.jsx(Fl,{size:20,className:"mx-auto text-gray-400 mb-1"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Joindre un PDF ou une image"}),t.jsx("input",{type:"file",accept:".pdf,image/*",className:"hidden",onChange:ve})]})]})]}),O&&t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 flex items-center gap-2",children:[t.jsx(Ta,{size:16,className:"text-red-500"}),t.jsx("p",{className:"text-sm text-red-600",children:O})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{type:"button",onClick:h,className:"flex-1 bg-gray-100 text-gray-600 rounded-xl py-3 font-bold hover:bg-gray-200 transition-colors",children:"Annuler"}),t.jsx("button",{type:"submit",disabled:T||A||re<=0,className:"flex-1 bg-brand-500 text-white rounded-xl py-3 font-bold hover:bg-brand-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:T||A?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),t.jsx("span",{children:"Envoi en cours..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(Bl,{size:18}),"Envoyer"]})})]})]})]})}function Lp({open:i,onClose:u,onConfirm:f,quoteAmount:d,artisanName:h}){const[_,b]=o.useState(""),[z,p]=o.useState(!1);if(!i)return null;const m=async g=>{g.preventDefault(),p(!0);try{await f(_.trim()||void 0),b(""),u()}finally{p(!1)}},y=async()=>{p(!0);try{await f(void 0),b(""),u()}finally{p(!1)}};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full shadow-xl animate-in fade-in duration-200",children:[t.jsxs("div",{className:"p-5 border-b border-gray-100 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:t.jsx(at,{size:20,className:"text-red-600"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-gray-900",children:"Refuser le devis"}),t.jsxs("p",{className:"text-xs text-gray-500",children:["De ",h]})]})]}),t.jsx("button",{onClick:u,className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200 transition-colors",disabled:z,children:t.jsx(at,{size:16,className:"text-gray-600"})})]}),t.jsxs("form",{onSubmit:m,className:"p-5 space-y-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"Montant du devis"}),t.jsxs("span",{className:"font-bold text-gray-900",children:[d.toLocaleString("fr-FR")," FCFA"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Raison du refus (optionnel)"}),t.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Vous pouvez expliquer pourquoi vous refusez ce devis. Cela aidera l'artisan  mieux comprendre vos besoins."}),t.jsx("textarea",{value:_,onChange:g=>b(g.target.value),rows:4,maxLength:500,className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-red-500 focus:outline-none resize-none text-sm",placeholder:"Exemple: Le prix est trop lev, les dlais ne correspondent pas, etc."}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[_.length,"/500 caractres"]})]}),t.jsxs("div",{className:"flex gap-3 pt-2",children:[t.jsx("button",{type:"button",onClick:y,disabled:z,className:"flex-1 bg-gray-100 text-gray-600 rounded-xl py-3 font-bold hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Refuser sans raison"}),t.jsx("button",{type:"submit",disabled:z||_.trim().length>0&&_.trim().length<10,className:"flex-1 bg-red-500 text-white rounded-xl py-3 font-bold hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:z?t.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):t.jsxs(t.Fragment,{children:["Refuser",_.trim()&&" avec raison"]})})]}),_.trim().length>0&&_.trim().length<10&&t.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-3 flex items-start gap-2",children:[t.jsx(Ta,{size:16,className:"text-yellow-600 flex-shrink-0 mt-0.5"}),t.jsx("p",{className:"text-xs text-yellow-700",children:"Si vous souhaitez fournir une raison, elle doit contenir au moins 10 caractres."})]})]})]})})}function sd({open:i,title:u,message:f,confirmText:d="Confirmer",cancelText:h="Annuler",onConfirm:_,onCancel:b,variant:z="warning"}){if(!i)return null;const m={danger:{icon:"text-red-500",confirmButton:"bg-red-500 hover:bg-red-600 text-white",border:"border-red-200"},warning:{icon:"text-yellow-500",confirmButton:"bg-yellow-500 hover:bg-yellow-600 text-white",border:"border-yellow-200"},info:{icon:"text-blue-500",confirmButton:"bg-blue-500 hover:bg-blue-600 text-white",border:"border-blue-200"}}[z];return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4 animate-in fade-in duration-200",children:t.jsx("div",{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-2xl animate-in zoom-in-95 duration-200",children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center ${z==="danger"?"bg-red-50":z==="warning"?"bg-yellow-50":"bg-blue-50"} ${m.icon}`,children:t.jsx(Tt,{size:24})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:u}),t.jsx("p",{className:"text-sm text-gray-600 mb-6",children:f}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:b,className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-xl font-bold hover:bg-gray-200 transition-colors",children:h}),t.jsx("button",{onClick:_,className:`flex-1 px-4 py-3 rounded-xl font-bold transition-colors ${m.confirmButton}`,children:d})]})]}),t.jsx("button",{onClick:b,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(at,{size:20})})]})})})}const p0={draft:{label:"Brouillon",color:"bg-gray-100 text-gray-600"},open:{label:"En attente de devis",color:"bg-blue-100 text-blue-600"},quote_received:{label:"Devis reu",color:"bg-purple-100 text-purple-600"},quote_accepted:{label:"Devis accept",color:"bg-green-100 text-green-600"},payment_pending:{label:"Paiement en attente",color:"bg-yellow-100 text-yellow-600"},in_progress:{label:"En cours",color:"bg-brand-100 text-brand-600"},completion_requested:{label:"Clture demande",color:"bg-orange-100 text-orange-600"},disputed:{label:"En litige",color:"bg-red-100 text-red-600"},completed:{label:"Termin",color:"bg-green-100 text-green-700"},expired:{label:"Expir",color:"bg-gray-100 text-gray-500"},cancelled:{label:"Annul",color:"bg-gray-100 text-gray-500"}},Go={pending:{label:"En attente",color:"bg-blue-50 text-blue-600 border-blue-200",icon:St},viewed:{label:"Vu",color:"bg-purple-50 text-purple-600 border-purple-200",icon:Oe},accepted:{label:"Accept",color:"bg-green-50 text-green-600 border-green-200",icon:Oe},rejected:{label:"Refus",color:"bg-red-50 text-red-600 border-red-200",icon:at},expired:{label:"Expir",color:"bg-gray-50 text-gray-500 border-gray-200",icon:St},abandoned:{label:"Abandonn",color:"bg-gray-50 text-gray-500 border-gray-200",icon:at}},b0=[{id:"created",label:"Publi",icon:zh},{id:"quoted",label:"Devis reu",icon:zt},{id:"accepted",label:"Accept",icon:Oe},{id:"paid",label:"Pay",icon:Wa},{id:"in_progress",label:"Travaux",icon:$s},{id:"completed",label:"Termin",icon:Qn}],y0=(i,u,f)=>{switch(i){case"open":return u?1:0;case"quote_accepted":return f&&(f==="held"||f==="advance_paid"||f==="released")?3:2;case"payment_pending":return 3;case"in_progress":return 4;case"completion_requested":return 4;case"completed":return 5;case"disputed":return 4;default:return 0}};function Op(){var _e,Se,Ze,Ce,He,xt,be,Ke;const{id:i}=Js(),u=bt();Fn();const f=ut(),{profile:d}=Vt(),{initiateEscrow:h}=ji(),{success:_,error:b,warning:z,info:p}=Da(),[m,y]=o.useState(null),[g,v]=o.useState([]),[N,H]=o.useState(null),[ae,Y]=o.useState(!0),[X,se]=o.useState(null),[ie,Z]=o.useState(!1),[me,oe]=o.useState(null),[ue,L]=o.useState(!1),[P,U]=o.useState(5),[F,Q]=o.useState(""),[T,S]=o.useState(null),[O,j]=o.useState(!1),[A,B]=o.useState(!1),K=o.useRef(!1),ge=async()=>{var V,fe,pe,Ae,I,Ee,Qe;if(i){if(f.loading||!f.user){console.log("[DEBUG] Waiting for user to be loaded...");return}Y(!0),se(null);try{const{data:Le,error:De}=await k.from("projects").select("*, profiles!projects_client_id_fkey(*), categories(*)").eq("id",i).single();if(De){if(console.error("Error fetching project:",De),console.error("Project ID:",i),console.error("Error details:",JSON.stringify(De,null,2)),((V=De.message)==null?void 0:V.includes("Failed to fetch"))||((fe=De.message)==null?void 0:fe.includes("NetworkError"))||((pe=De.message)==null?void 0:pe.includes("ERR_FAILED"))||((Ae=De.message)==null?void 0:Ae.includes("CORS"))){se("Erreur de connexion. Vrifiez votre connexion internet et dsactivez les extensions de navigateur (AdBlock, VPN, etc.) qui pourraient bloquer les requtes."),y(null),Y(!1);return}if(De.code==="PGRST116"||(I=De.message)!=null&&I.includes("No rows"))se("Projet introuvable. Il se peut que ce projet n'existe pas ou ait t supprim.");else if(De.code==="42501"||(Ee=De.message)!=null&&Ee.includes("permission denied"))se("Vous n'avez pas la permission d'accder  ce projet. Veuillez vrifier que vous tes bien connect et que ce projet vous appartient ou que vous y avez accs.");else if(De.code==="PGRST201"){console.warn("Ambiguity error, retrying with explicit relationship...");const{data:Me,error:Pe}=await k.from("projects").select("*, profiles!projects_client_id_fkey(*), categories(*)").eq("id",i).single();if(Pe){se(`Erreur lors du chargement du projet: ${Pe.message||"Erreur inconnue"}`),y(null),Y(!1);return}y(Me),se(null)}else se(`Erreur lors du chargement du projet: ${De.message||"Erreur inconnue"}`);if(De.code!=="PGRST201"){y(null),Y(!1);return}}if(!Le&&!De){se("Projet introuvable."),y(null),Y(!1);return}if(!Le){Y(!1);return}if(y(Le),se(null),(d==null?void 0:d.role)==="artisan"&&Le){const{data:ke}=await k.from("artisans").select("category_id").eq("id",d.id).single();if(ke!=null&&ke.category_id&&Le.category_id!==ke.category_id&&Le.target_artisan_id!==d.id){se("Vous n'avez pas accs  ce projet. Ce projet n'est pas dans votre catgorie."),y(null),Y(!1);return}}let Ye=[],Ht=null;console.log("[DEBUG] Fetching quotes for project:",i),console.log("[DEBUG] Current user:",(Qe=f.user)==null?void 0:Qe.id);const{data:Dt,error:kt}=await k.from("quotes").select(`
        *,
        profiles!quotes_artisan_id_fkey (
          id,
          full_name,
          avatar_url,
          role
        )
      `).eq("project_id",i).order("created_at",{ascending:!1});if(console.log("[DEBUG] Quotes with profile - Data:",Dt),console.log("[DEBUG] Quotes with profile - Error:",kt),!kt&&Dt)Ye=Dt||[],console.log("[DEBUG] Successfully fetched",Ye.length,"quotes with profile");else{console.warn("[DEBUG] Error fetching quotes with profile, trying fallback:",kt);const{data:ke,error:Me}=await k.from("quotes").select("*").eq("project_id",i).order("created_at",{ascending:!1});if(console.log("[DEBUG] Quotes fallback - Data:",ke),console.log("[DEBUG] Quotes fallback - Error:",Me),!Me&&ke){if(Ye=ke||[],console.log("[DEBUG] Successfully fetched",Ye.length,"quotes without profile"),Ye.length>0){const Pe=[...new Set(Ye.map(mt=>mt.artisan_id).filter(Boolean))];if(console.log("[DEBUG] Fetching profiles for artisan IDs:",Pe),Pe.length>0){const{data:mt,error:oa}=await k.from("profiles").select("id, full_name, avatar_url, role").in("id",Pe);console.log("[DEBUG] Profiles data:",mt),console.log("[DEBUG] Profiles error:",oa),Ye=Ye.map(le=>({...le,profiles:(mt==null?void 0:mt.find(Te=>Te.id===le.artisan_id))||null}))}}}else console.error("[DEBUG] Error fetching quotes (fallback):",Me),Ht=Me}console.log("[DEBUG] Final quotes array length:",Ye.length),console.log("[DEBUG] Final quotes:",Ye.map(ke=>({id:ke.id,status:ke.status,artisan_id:ke.artisan_id}))),v(Ye);const{data:ea,error:qe}=await k.from("escrows").select("*").eq("project_id",i).maybeSingle();qe&&console.error("Error fetching escrow:",qe),H(ea||null)}catch(Le){console.error("Unexpected error in fetchDetails:",Le),se(`Erreur inattendue: ${Le.message||"Erreur inconnue"}`),y(null)}finally{Y(!1)}}};o.useEffect(()=>{K.current=!1,!f.loading&&f.user&&!K.current?(K.current=!0,ge().finally(()=>{K.current=!1})):f.loading&&Y(!0)},[i,f.user,f.loading]);const de=o.useMemo(()=>{const V={};return g.forEach(fe=>{const pe=fe.artisan_id||"unknown";V[pe]||(V[pe]=[]),V[pe].push(fe)}),Object.keys(V).forEach(fe=>{V[fe].sort((pe,Ae)=>new Date(pe.created_at||0).getTime()-new Date(Ae.created_at||0).getTime())}),V},[g]),ce=async V=>{var pe,Ae,I,Ee,Qe;if(!i||!((pe=f.user)!=null&&pe.id)){b("Erreur : informations manquantes");return}if((m==null?void 0:m.client_id)!==f.user.id){b("Vous n'tes pas autoris  accepter ce devis.");return}if(!["pending","viewed"].includes(V.status)){b("Ce devis ne peut plus tre accept (statut: "+V.status+")");return}if(g.some(Le=>Le.status==="accepted"&&Le.id!==V.id)){b("Un devis a dj t accept pour ce projet.");return}try{j(!0);const Le=V.status,{error:De}=await k.from("quotes").update({status:"accepted"}).eq("id",V.id);if(De)throw new Error(`Erreur mise  jour devis: ${De.message}`);try{await k.rpc("log_quote_action",{p_quote_id:V.id,p_project_id:i,p_user_id:f.user.id,p_action:"accepted",p_old_value:{status:Le},p_new_value:{status:"accepted",amount:V.amount}})}catch(qe){console.error("Error logging quote acceptance:",qe)}const{data:Ye,error:Ht}=await k.from("quotes").select("id").eq("project_id",i).neq("id",V.id).in("status",["pending","viewed"]);if(Ht)console.error("Error fetching quotes to reject:",Ht);else if(Ye&&Ye.length>0){const{error:qe}=await k.from("quotes").update({status:"rejected"}).in("id",Ye.map(ke=>ke.id));qe&&console.error("Error rejecting other quotes:",qe);for(const ke of Ye)try{await k.rpc("log_quote_action",{p_quote_id:ke.id,p_project_id:i,p_user_id:f.user.id,p_action:"rejected",p_old_value:{status:"pending"},p_new_value:{status:"rejected"},p_metadata:{reason:"other_quote_accepted"}})}catch(Me){console.error("Error logging quote rejection:",Me)}}const Dt=m==null?void 0:m.status,{error:kt}=await k.from("projects").update({status:"quote_accepted"}).eq("id",i);if(kt)throw new Error(`Erreur mise  jour projet: ${kt.message}`);try{await k.rpc("log_project_action",{p_project_id:i,p_user_id:f.user.id,p_action:"status_changed",p_old_value:{status:Dt},p_new_value:{status:"quote_accepted"},p_metadata:{quote_id:V.id}})}catch(qe){console.error("Error logging project status change:",qe)}const{data:ea}=await k.from("escrows").select("id, status").eq("project_id",i).maybeSingle();if(ea)console.log("Escrow already exists for this project. Skipping creation.");else try{const qe=await h({project_id:i,total_amount:V.amount,artisan_is_verified:((Ae=V.profiles)==null?void 0:Ae.is_verified)??!1});if(!(qe!=null&&qe.id))throw new Error("chec de la cration de l'escrow");H(qe);try{await k.rpc("log_escrow_action",{p_escrow_id:qe.id,p_user_id:f.user.id,p_action:"created",p_new_value:{total_amount:V.amount,status:"pending"}})}catch(ke){console.error("Error logging escrow creation:",ke)}}catch(qe){if(console.error("Error creating escrow:",qe),(I=qe.message)!=null&&I.includes("infinite recursion")||(Ee=qe.message)!=null&&Ee.includes("policy")){console.warn("Escrow creation failed due to RLS policy error. Trying bypass via RPC...");try{const{data:ke,error:Me}=await k.rpc("create_escrow_bypass",{p_project_id:i,p_total_amount:V.amount,p_artisan_is_verified:((Qe=V.profiles)==null?void 0:Qe.is_verified)??!1});Me||!ke?(console.warn("Bypass RPC failed or not available. Proceeding without escrow (bypass mode)."),await k.from("projects").update({status:"payment_pending"}).eq("id",i)):ke&&H(ke)}catch{console.warn("Bypass RPC not available. Proceeding without escrow (bypass mode)."),await k.from("projects").update({status:"payment_pending"}).eq("id",i)}}else console.warn("Escrow creation failed. Proceeding without escrow (bypass mode)."),await k.from("projects").update({status:"payment_pending"}).eq("id",i)}if(V.artisan_id&&(m!=null&&m.title))try{await bp(i,V.artisan_id,m.title)}catch(qe){console.error("Error notifying artisan:",qe)}if(V.artisan_id&&(m!=null&&m.client_id)&&(m!=null&&m.title))try{await jp(i,m.client_id,V.artisan_id,m.title)}catch(qe){console.error("Error ensuring chat exists:",qe)}_("Devis accept avec succs ! Redirection vers la page de paiement..."),setTimeout(()=>{i&&u(`/projects/${i}/payment`)},800)}catch(Le){console.error("Error accepting quote:",Le),b(`Erreur lors de l'acceptation: ${Le.message||"Erreur inconnue"}`),setTimeout(async()=>{await ge()},100)}finally{j(!1)}},re=async(V,fe)=>{var Ae;if(!((Ae=f.user)!=null&&Ae.id)||!i){b("Erreur : informations manquantes");return}if((m==null?void 0:m.client_id)!==f.user.id){b("Vous n'tes pas autoris  refuser ce devis.");return}const pe=g.find(I=>I.id===V);if(!pe){b("Devis introuvable");return}if(pe.status==="accepted"){b("Ce devis a dj t accept et ne peut plus tre refus.");return}if(pe.status==="rejected"){b("Ce devis a dj t refus.");return}try{j(!0);const I=pe.status,Ee={status:"rejected"};fe&&fe.trim()&&(Ee.rejection_reason=fe.trim());const{error:Qe}=await k.from("quotes").update(Ee).eq("id",V);if(Qe)throw new Error(`Erreur mise  jour: ${Qe.message}`);try{await k.rpc("log_quote_action",{p_quote_id:V,p_project_id:i||pe.project_id,p_user_id:f.user.id,p_action:"rejected",p_old_value:{status:I},p_new_value:{status:"rejected",rejection_reason:fe||null}})}catch(Le){console.error("Error logging quote rejection:",Le)}if(pe.artisan_id&&(m!=null&&m.title))try{await yp(i,pe.artisan_id,m.title,fe)}catch(Le){console.error("Error notifying artisan:",Le)}_("Devis refus avec succs. Vous pouvez continuer  consulter les autres devis."),await ge()}catch(I){console.error("Error rejecting quote:",I),b(`Erreur lors du refus: ${I.message||"Erreur inconnue"}`)}finally{j(!1)}},ve=async()=>{var V;if(!(!i||!m||!((V=f.user)!=null&&V.id)))try{const fe=g.find(pe=>pe.status==="accepted");if(fe){const{data:pe,error:Ae}=await k.from("reviews").insert({project_id:i,client_id:f.user.id,artisan_id:fe.artisan_id,rating:P,comment:F||null}).select().single();if(Ae)throw Ae;try{await k.rpc("log_project_action",{p_project_id:i,p_user_id:f.user.id,p_action:"review_submitted",p_new_value:{rating:P,has_comment:!!F},p_metadata:{review_id:pe==null?void 0:pe.id,artisan_id:fe.artisan_id}})}catch(I){console.error("Error logging review submission:",I)}try{await k.from("notifications").insert({user_id:fe.artisan_id,type:"system",title:"Nouvelle note reue",message:`Vous avez reu une note de ${P}/5 pour le projet "${m.title}".${F?" Commentaire: "+F.substring(0,100):""}`,data:{project_id:i,review_id:pe==null?void 0:pe.id,rating:P}})}catch(I){console.error("Error notifying artisan of review:",I)}}L(!1),u("/dashboard")}catch(fe){console.error("Error submitting rating:",fe),b("Erreur lors de l'envoi de l'avis")}},W=async()=>{var fe;if(!i||!((fe=f.user)!=null&&fe.id)||(m==null?void 0:m.client_id)!==f.user.id){b("Action non autorise");return}if(N&&N.status!=="pending"){b("Impossible d'annuler : paiement dj effectu. Veuillez demander un remboursement.");return}if(g.some(pe=>pe.status==="accepted")){b("Impossible d'annuler : un devis a dj t accept.");return}B(!0)},E=async()=>{var V,fe;if(!i||!((V=f.user)!=null&&V.id)||(m==null?void 0:m.client_id)!==f.user.id){b("Action non autorise"),B(!1);return}B(!1);try{if(j(!0),!((fe=f.user)!=null&&fe.id)||(m==null?void 0:m.client_id)!==f.user.id)throw new Error("Vous n'tes pas autoris  annuler ce projet.");console.log("[DEBUG] Cancelling project:",i,"User:",f.user.id);const{data:pe,error:Ae}=await k.from("projects").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",i).eq("client_id",f.user.id).select("id, status");if(console.log("[DEBUG] Update result - Data:",pe),console.log("[DEBUG] Update result - Error:",Ae),Ae)throw console.error("[DEBUG] Failed to update project:",Ae),new Error(`Erreur lors de la mise  jour: ${Ae.message}`);if(!pe||pe.length===0)throw console.error("[DEBUG] No rows updated - RLS might be blocking or project not found"),new Error("Impossible de mettre  jour le projet. Vrifiez que vous tes bien le propritaire du projet.");const I=pe[0];if(I.status!=="cancelled")throw console.warn("[DEBUG] Update might have failed - status is:",I.status),new Error("Le statut du projet n'a pas t correctement mis  jour.");const{data:Ee}=await k.from("quotes").select("id, artisan_id").eq("project_id",i).in("status",["pending","viewed"]);Ee&&Ee.length>0&&await k.from("quotes").update({status:"rejected"}).in("id",Ee.map(Qe=>Qe.id));try{const Qe=k.rpc("log_project_action",{p_project_id:i,p_user_id:f.user.id,p_action:"cancelled",p_old_value:{status:m==null?void 0:m.status},p_new_value:{status:"cancelled"}});Qe&&typeof Qe.catch=="function"&&Qe.catch(()=>{})}catch(Qe){console.warn("Could not log project action:",Qe)}if(Ee&&Ee.length>0){for(const Qe of Ee)if(Qe.artisan_id)try{await k.from("notifications").insert({user_id:Qe.artisan_id,type:"project_cancelled",title:"Projet annul",message:`Le projet "${m==null?void 0:m.title}" a t annul par le client.`,data:{project_id:i}})}catch(Le){console.error("Error notifying artisan:",Le)}}_("Projet annul avec succs. Vous pouvez crer un nouveau projet si ncessaire."),y(Qe=>Qe?{...Qe,status:"cancelled"}:null),await new Promise(Qe=>setTimeout(Qe,500)),await ge(),setTimeout(()=>{u("/dashboard",{replace:!0})},800)}catch(pe){console.error("Error cancelling project:",pe),b(`Erreur: ${pe.message||"Erreur inconnue"}`)}finally{j(!1)}};if(ae)return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:t.jsx("div",{className:"w-10 h-10 border-3 border-brand-500 border-t-transparent rounded-full animate-spin"})});if(!m||X)return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:t.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl p-6 shadow-sm border border-gray-100 text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Tt,{size:32,className:"text-red-500"})}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Projet introuvable"}),t.jsx("p",{className:"text-gray-500 mb-6",children:X||"Ce projet n'existe pas ou n'est plus disponible."}),t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsx("button",{onClick:()=>u("/dashboard"),className:"w-full bg-brand-500 text-white font-bold py-3 rounded-xl hover:bg-brand-600 transition-colors",children:"Retour au tableau de bord"}),t.jsx("button",{onClick:()=>ge(),className:"w-full bg-gray-100 text-gray-700 font-bold py-3 rounded-xl hover:bg-gray-200 transition-colors",children:"Ressayer"})]})]})});const xe=(m==null?void 0:m.client_id)===((_e=f.user)==null?void 0:_e.id),te=(d==null?void 0:d.role)==="artisan",he=g.some(V=>{var fe;return V.artisan_id===((fe=f.user)==null?void 0:fe.id)}),we=g.find(V=>V.status==="accepted");return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsxs("header",{className:"sticky top-0 z-20 px-4 py-4 bg-white border-b border-gray-100 flex items-center gap-4",children:[t.jsx("button",{onClick:()=>u(-1),className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:t.jsx(Mt,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h1",{className:"font-bold text-gray-900 truncate",children:m.title}),t.jsx("p",{className:"text-xs text-gray-400 font-mono",children:m.project_number})]}),t.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-bold ${((Se=p0[m.status])==null?void 0:Se.color)||"bg-gray-100 text-gray-600"}`,children:((Ze=p0[m.status])==null?void 0:Ze.label)||m.status})]}),t.jsxs("main",{className:"max-w-lg mx-auto px-4 py-6 pb-32",children:[N&&t.jsx(Mp,{escrow:N,isClient:xe,onRefresh:ge}),te&&(we==null?void 0:we.artisan_id)===((Ce=f.user)==null?void 0:Ce.id)&&N&&N.status==="pending"&&t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-5 mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500 flex items-center justify-center text-white",children:t.jsx(St,{size:20})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-blue-900 text-sm",children:"En attente du paiement du client"}),t.jsx("p",{className:"text-xs text-blue-700 font-medium",children:"Une fois le paiement effectu, vous pourrez commencer les travaux"})]})]}),t.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Votre devis a t accept ! Le client va procder au paiement pour scuriser les fonds."}),t.jsx("p",{className:"text-xs text-blue-600",children:"Vous serez notifi ds que le paiement sera reu et vous pourrez alors commencer les travaux."})]}),(m==null?void 0:m.status)==="payment_pending"&&!N&&t.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-2xl p-5 mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-xl bg-yellow-500 flex items-center justify-center text-white",children:t.jsx(Wa,{size:20})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-gray-900 text-sm",children:"Paiement en attente"}),t.jsx("p",{className:"text-xs text-yellow-700 font-medium",children:"Mode bypass activ"})]})]}),t.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Le devis a t accept. Le systme de paiement est temporairement en mode bypass."}),t.jsx("p",{className:"text-xs text-gray-600",children:"Le paiement peut tre effectu manuellement par l'administrateur."})]}),m.status==="disputed"&&t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-4 mb-6 flex items-start gap-3",children:[t.jsx(Tt,{size:20,className:"text-red-500 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-red-700 text-sm",children:"Projet en litige"}),t.jsx("p",{className:"text-xs text-red-600 mt-0.5",children:"L'escrow est gel. Notre quipe va intervenir."})]})]}),m.status==="expired"&&t.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-2xl p-4 mb-6 flex items-start gap-3",children:[t.jsx(St,{size:20,className:"text-gray-500 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-gray-700 text-sm",children:"Projet expir"}),t.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"Ce projet a expir aprs 6 jours sans devis accept. Consultation en lecture seule."})]})]}),m.status==="cancelled"&&t.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-2xl p-4 mb-6 flex items-start gap-3",children:[t.jsx(at,{size:20,className:"text-gray-500 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-gray-700 text-sm",children:"Projet annul"}),t.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"Ce projet a t annul. Consultation en lecture seule."})]})]}),t.jsxs("section",{className:"bg-white rounded-2xl border border-gray-100 p-4 mb-6",children:[t.jsx("h3",{className:"font-bold text-gray-900 text-sm mb-3",children:"Suivi du projet"}),t.jsxs("div",{className:"relative px-2",children:[t.jsx("div",{className:"absolute left-2 right-2 top-6 h-0.5 bg-gray-100"}),t.jsx("div",{className:"absolute left-2 top-6 h-0.5 bg-brand-500 transition-all duration-500",style:{width:`${y0(m.status,g.length>0,N==null?void 0:N.status)/(b0.length-1)*100}%`}}),t.jsx("div",{className:"relative flex items-start justify-between gap-2",children:b0.map((V,fe)=>{const pe=y0(m.status,g.length>0,N==null?void 0:N.status),Ae=fe<=pe,I=fe===pe,Ee=V.icon;return t.jsxs("div",{className:"flex flex-col items-center flex-1 min-w-0",children:[t.jsx("div",{className:`relative z-10 w-10 h-10 rounded-xl flex items-center justify-center transition-all mb-2 ${Ae?"bg-brand-500 text-white shadow-lg shadow-brand-200":"bg-gray-100 text-gray-400"} ${I?"ring-4 ring-brand-100":""}`,children:t.jsx(Ee,{size:18,strokeWidth:Ae?2.5:2})}),t.jsxs("div",{className:"text-center w-full",children:[t.jsx("p",{className:`font-bold text-xs leading-tight ${Ae?"text-gray-900":"text-gray-400"}`,children:V.label}),I&&t.jsx("p",{className:"text-[10px] text-brand-500 font-medium animate-pulse mt-0.5",children:"En cours"}),Ae&&!I&&t.jsx(Oe,{size:14,className:"text-green-500 mx-auto mt-1"})]})]},V.id)})})]})]}),t.jsxs("section",{className:"bg-white rounded-2xl border border-gray-100 overflow-hidden mb-6",children:[t.jsxs("div",{className:"p-4 border-b border-gray-50 flex items-center gap-2 flex-wrap",children:[t.jsx("span",{className:"px-3 py-1 bg-brand-50 text-brand-600 text-[10px] font-bold rounded-lg uppercase",children:(He=m.categories)==null?void 0:He.name}),m.is_urgent&&t.jsx("span",{className:"px-3 py-1 bg-red-50 text-red-600 text-[10px] font-bold rounded-lg uppercase",children:"Urgent"}),m.is_open===!1&&t.jsx("span",{className:"px-3 py-1 bg-purple-50 text-purple-600 text-[10px] font-bold rounded-lg uppercase",children:"Demande cible"})]}),t.jsxs("div",{className:"p-4 space-y-4",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:m.title}),t.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[m.location&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Gt,{size:14}),t.jsx("span",{children:m.location})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Ql,{size:14}),t.jsx("span",{children:new Date(m.created_at).toLocaleDateString("fr-FR")})]}),m.preferred_date&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(St,{size:14}),t.jsxs("span",{children:["Souhait: ",new Date(m.preferred_date).toLocaleDateString("fr-FR"),m.preferred_time_start&&m.preferred_time_end&&` de ${m.preferred_time_start.slice(0,5)}  ${m.preferred_time_end.slice(0,5)}`]})]})]}),m.is_open&&(m.max_distance_km||m.min_rating)&&t.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.max_distance_km&&t.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-lg",children:["Max ",m.max_distance_km," km"]}),m.min_rating&&t.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-lg flex items-center gap-1",children:["Min ",m.min_rating," ",t.jsx(Ma,{size:10,className:"text-yellow-400 fill-yellow-400"})]})]}),m.audio_description_url&&t.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 flex items-center gap-4",children:[t.jsx("button",{onClick:()=>new Audio(m.audio_description_url).play(),className:"w-12 h-12 bg-brand-500 text-white rounded-full flex items-center justify-center shadow-lg flex-shrink-0",children:t.jsx(Gl,{fill:"currentColor",size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-gray-900 text-sm",children:"Description vocale"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Appuyez pour couter"})]})]}),m.video_url&&t.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx(Ks,{size:20,className:"text-purple-600"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-bold text-gray-900 text-sm",children:"Vido jointe"}),t.jsx("a",{href:m.video_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-brand-500 underline",children:"Voir la vido"})]})]}),m.photos_urls&&m.photos_urls.length>0&&t.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:m.photos_urls.map((V,fe)=>t.jsx("img",{src:V,alt:`Photo ${fe+1}`,className:"w-20 h-20 rounded-xl object-cover flex-shrink-0 border-2 border-white shadow-sm"},fe))}),((xt=m.property_details)==null?void 0:xt.type)&&t.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[t.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase mb-1",children:"Logement"}),t.jsxs("p",{className:"text-sm text-gray-700 capitalize",children:[m.property_details.type,m.property_details.floor&&` - tage ${m.property_details.floor}`]}),m.property_details.accessNotes&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:m.property_details.accessNotes})]})]})]}),ie&&te&&!xe&&t.jsx("div",{className:"mb-6",children:t.jsx(Up,{projectId:i,artisanId:f.user.id,isUrgent:m.is_urgent,onSuccess:()=>{Z(!1),ge()},onCancel:()=>{Z(!1)}})}),t.jsxs("section",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h3",{className:"font-bold text-gray-900",children:["Devis",g.length>0&&t.jsx("span",{className:"ml-2 text-sm font-bold text-brand-500 bg-brand-50 px-2 py-0.5 rounded-full",children:g.length})]}),te&&!xe&&["open","quote_received"].includes(m.status||"")&&m.status!=="expired"&&m.status!=="cancelled"&&!ie&&t.jsx("button",{onClick:()=>Z(!0),className:"px-4 py-2 bg-brand-500 text-white text-sm font-bold rounded-xl",children:he?"Modifier ou envoyer un nouveau devis":"Proposer un devis"}),te&&!xe&&["expired","cancelled"].includes(m.status||"")&&t.jsx("p",{className:"text-xs text-gray-500 italic",children:"Ce projet n'accepte plus de nouveaux devis"})]}),me&&(()=>{var fe;const V=g.find(pe=>pe.id===me);return V?t.jsx(Lp,{open:!!V,onClose:()=>oe(null),onConfirm:async pe=>{await re(me,pe),oe(null)},quoteAmount:V.amount||0,artisanName:((fe=V.profiles)==null?void 0:fe.full_name)||"Artisan"}):null})(),g.length===0?t.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center border border-gray-100",children:[t.jsx(yi,{size:32,className:"mx-auto text-gray-300 mb-3"}),t.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Aucun devis pour le moment"}),(te||xe)&&t.jsx("button",{onClick:()=>{console.log("[DEBUG] Manual refresh requested"),ge()},className:"px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-200 transition-colors",children:"Rafrachir "})]}):t.jsx("div",{className:"space-y-6",children:Object.entries(de).map(([V,fe])=>{var pe,Ae;return fe.length===0?null:t.jsxs("div",{className:"space-y-3",children:[fe.length>1&&t.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:(pe=fe[0].profiles)!=null&&pe.avatar_url?t.jsx("img",{src:fe[0].profiles.avatar_url,alt:"",className:"w-full h-full object-cover"}):t.jsx(tt,{size:14,className:"text-gray-400"})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-bold text-gray-900 text-sm",children:((Ae=fe[0].profiles)==null?void 0:Ae.full_name)||"Artisan"}),t.jsxs("span",{className:"text-xs text-gray-400 bg-gray-100 px-2 py-0.5 rounded-full",children:[fe.length," devis"]})]})]}),t.jsx("div",{className:`space-y-3 ${fe.length>1?"pl-4 border-l-2 border-gray-200":""}`,children:fe.map((I,Ee)=>{var De,Ye,Ht,Dt,kt,ea,qe,ke;const Qe=((De=Go[I.status])==null?void 0:De.icon)||St,Le=T===I.id;return t.jsxs("div",{id:`quote-${I.id}`,className:`bg-white rounded-2xl border transition-all relative ${I.status==="accepted"?"border-green-200":I.status==="rejected"?"border-gray-200 opacity-60":"border-gray-100"}`,children:[t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden",children:(Ye=I.profiles)!=null&&Ye.avatar_url?t.jsx("img",{src:I.profiles.avatar_url,alt:"",className:"w-full h-full object-cover"}):t.jsx(tt,{size:18,className:"text-gray-400"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-bold text-gray-900",children:(Ht=I.profiles)==null?void 0:Ht.full_name}),((Dt=I.profiles)==null?void 0:Dt.is_verified)&&t.jsx(At,{size:14,className:"text-green-500"})]}),t.jsxs("p",{className:"text-[9px] text-gray-400 font-mono",children:["Devis #",I.quote_number||I.id.slice(0,8).toUpperCase()]}),Ee>0&&t.jsxs("p",{className:"text-[9px] text-yellow-600 font-medium mt-0.5",children:["Rvision #",Ee+1]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-lg font-black text-brand-500",children:[(kt=I.amount)==null?void 0:kt.toLocaleString("fr-FR")," FCFA"]}),I.urgent_surcharge_percent>0&&t.jsxs("p",{className:"text-[10px] text-yellow-600",children:["+",I.urgent_surcharge_percent,"% urgence"]}),t.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:new Date(I.created_at).toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})}),Ee>0&&t.jsxs("p",{className:"text-[9px] text-yellow-600 mt-0.5",children:[" Devis #",fe[Ee-1].quote_number||fe[Ee-1].id.slice(0,8).toUpperCase()]})]})]}),t.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-bold border ${((ea=Go[I.status])==null?void 0:ea.color)||"bg-gray-50 text-gray-600 border-gray-200"}`,children:[t.jsx(Qe,{size:12}),((qe=Go[I.status])==null?void 0:qe.label)||I.status]}),I.status==="rejected"&&I.rejection_reason&&t.jsx("div",{className:"mt-3 bg-red-50 rounded-xl p-4 border border-red-200",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(at,{size:16,className:"text-red-600 flex-shrink-0 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-xs font-bold text-red-800 mb-1 uppercase",children:"Raison du refus :"}),t.jsx("p",{className:"text-sm text-red-900 leading-relaxed",children:I.rejection_reason})]})]})}),t.jsxs("button",{onClick:()=>S(Le?null:I.id),className:"w-full mt-3 flex items-center justify-center gap-1 text-xs text-gray-400 hover:text-gray-600",children:[Le?t.jsx($o,{size:14}):t.jsx(Yn,{size:14}),Le?"Voir moins":"Voir dtails"]})]}),Le&&t.jsxs("div",{className:"px-4 pb-4 pt-0 border-t border-gray-50 space-y-3 animate-in fade-in duration-200",children:[(I.labor_cost||I.materials_cost)&&t.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[t.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Dtail des cots"}),t.jsxs("div",{className:"space-y-1 text-sm",children:[I.labor_cost&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Main d'uvre"}),t.jsxs("span",{className:"font-bold",children:[I.labor_cost.toLocaleString("fr-FR")," FCFA"]})]}),I.materials_cost&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Matriaux"}),t.jsxs("span",{className:"font-bold",children:[I.materials_cost.toLocaleString("fr-FR")," FCFA"]})]})]})]}),I.message&&t.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[t.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Message"}),t.jsx("p",{className:"text-sm text-gray-700",children:I.message})]}),I.audio_message_url&&t.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 flex items-center gap-3",children:[t.jsx("button",{onClick:()=>new Audio(I.audio_message_url).play(),className:"w-10 h-10 bg-brand-500 text-white rounded-full flex items-center justify-center",children:t.jsx(Gl,{fill:"currentColor",size:14})}),t.jsx("div",{children:t.jsx("p",{className:"text-xs font-bold text-gray-500",children:"Message vocal"})})]}),I.proforma_url&&t.jsxs("a",{href:I.proforma_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-3 bg-blue-50 rounded-xl text-blue-600 hover:bg-blue-100 transition-colors",children:[t.jsx(zt,{size:18}),t.jsx("span",{className:"text-sm font-bold",children:"Voir la facture proforma"})]}),t.jsxs("button",{onClick:()=>{B0(async()=>{const{downloadQuotePDF:Me}=await import("./quotePdfGenerator-DOauOH2K.js");return{downloadQuotePDF:Me}},__vite__mapDeps([0,1,2,3])).then(({downloadQuotePDF:Me})=>{var mt,oa,le,Te;const Pe={quote_number:I.quote_number||"N/A",artisan_name:((mt=I.profiles)==null?void 0:mt.full_name)||"Artisan",artisan_phone:((oa=I.profiles)==null?void 0:oa.phone)||void 0,artisan_email:((le=I.profiles)==null?void 0:le.email)||void 0,project_title:(m==null?void 0:m.title)||"Projet",client_name:((Te=m==null?void 0:m.profiles)==null?void 0:Te.full_name)||void 0,amount:Number(I.amount||0),labor_cost:I.labor_cost?Number(I.labor_cost):void 0,materials_cost:I.materials_cost?Number(I.materials_cost):void 0,urgent_surcharge_percent:I.urgent_surcharge_percent||void 0,urgent_surcharge:I.urgent_surcharge_percent&&I.amount?Number(I.amount)*(I.urgent_surcharge_percent/100):void 0,message:I.message||void 0,estimated_duration:I.estimated_duration||void 0,proposed_date:I.proposed_date||void 0,proposed_time_start:I.proposed_time_start||void 0,proposed_time_end:I.proposed_time_end||void 0,validity_hours:I.validity_hours||48,created_at:I.created_at||new Date().toISOString()};Me(Pe)})},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-brand-500 text-white rounded-xl hover:bg-brand-600 transition-colors font-bold",children:[t.jsx(zt,{size:18}),t.jsx("span",{children:"Tlcharger le devis en PDF"})]}),(I.estimated_duration||I.proposed_date)&&t.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[I.estimated_duration&&t.jsxs("span",{className:"px-2 py-1 bg-gray-100 rounded-lg text-gray-600",children:["Dure: ",I.estimated_duration]}),I.proposed_date&&t.jsxs("span",{className:"px-2 py-1 bg-gray-100 rounded-lg text-gray-600",children:["Propos: ",new Date(I.proposed_date).toLocaleDateString("fr-FR")]})]})]}),xe&&!g.some(Me=>Me.status==="accepted")&&(m==null?void 0:m.status)!=="payment_pending"&&(m==null?void 0:m.status)!=="in_progress"&&(m==null?void 0:m.status)!=="completion_requested"&&(m==null?void 0:m.status)!=="completed"&&["pending","viewed"].includes(I.status)&&!O&&t.jsxs("div",{className:"p-4 border-t border-gray-50 space-y-2",children:[t.jsx("button",{onClick:()=>ce(I),disabled:O,className:"w-full bg-green-500 text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:O?t.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx(Oe,{size:18,"aria-hidden":"true"}),"Accepter le devis"]})}),t.jsxs("button",{onClick:()=>oe(I.id),disabled:O,className:"w-full bg-red-50 text-red-600 font-bold py-3 rounded-xl border border-red-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Refuser ce devis",children:[t.jsx(at,{size:16,"aria-hidden":"true"}),"Refuser le devis"]})]},`actions-${I.id}`),xe&&O&&["pending","viewed"].includes(I.status)&&t.jsx("div",{className:"p-4 border-t border-gray-50 flex items-center justify-center",children:t.jsx("div",{className:"w-5 h-5 border-2 border-brand-500 border-t-transparent rounded-full animate-spin"})},`loading-${I.id}`),te&&I.artisan_id===((ke=f.user)==null?void 0:ke.id)&&I.status==="rejected"&&I.rejection_reason&&t.jsxs("div",{className:"p-4 border-t border-gray-50 bg-blue-50 rounded-b-xl",children:[t.jsx("p",{className:"text-xs font-bold text-blue-800 mb-1 uppercase",children:"Message du client :"}),t.jsx("p",{className:"text-sm text-blue-900 mb-3",children:I.rejection_reason}),t.jsx("p",{className:"text-xs text-blue-700 italic",children:"Vous pouvez soumettre un nouveau devis en tenant compte de ces commentaires."})]})]},I.id)})})]},V)})}),xe&&["open","quote_received"].includes(m.status)&&!g.some(V=>V.status==="accepted")&&t.jsxs("div",{className:"bg-white rounded-2xl border border-red-200 p-4 mt-4",children:[t.jsx("button",{onClick:W,disabled:O,className:"w-full bg-red-50 text-red-600 font-bold py-3 rounded-xl border border-red-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-red-100 transition-colors",children:O?t.jsx("div",{className:"w-5 h-5 border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx(at,{size:18}),"Annuler le projet"]})}),t.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Vous pourrez annuler tant qu'aucun devis n'a t accept"})]})]})]}),xe&&(m.status==="quote_accepted"||m.status==="payment_pending")&&N&&N.status==="pending"&&t.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-gray-100 z-20 space-y-2",children:t.jsxs("button",{onClick:()=>u(`/projects/${i}/payment`),className:"w-full bg-brand-500 text-white font-bold py-4 rounded-2xl flex items-center justify-center gap-3 hover:bg-brand-600 transition-colors",children:[t.jsx(Wa,{size:20}),"Procder au paiement"]})}),xe&&(m.status==="in_progress"||m.status==="completion_requested")&&N&&(N.status==="held"||N.status==="advance_paid")&&t.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-gray-100 z-20 space-y-2",children:[t.jsxs("button",{onClick:()=>u(`/projects/${i}/work`),className:"w-full bg-brand-500 text-white font-bold py-4 rounded-2xl flex items-center justify-center gap-3 hover:bg-brand-600 transition-colors",children:[t.jsx($s,{size:20}),"Voir les travaux en cours"]}),m.status==="completion_requested"&&t.jsxs("button",{onClick:()=>u(`/projects/${i}/completion`),className:"w-full bg-green-500 text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-green-600 transition-colors",children:[t.jsx(Oe,{size:18}),"Finaliser le projet"]})]}),xe&&m.status==="completion_requested"&&t.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-gray-100 z-20 space-y-2",children:[t.jsxs("button",{onClick:()=>u(`/projects/${i}/completion`),className:"w-full bg-green-500 text-white font-bold py-4 rounded-2xl flex items-center justify-center gap-3 hover:bg-green-600 transition-colors",children:[t.jsx(Oe,{size:20}),"Finaliser le projet"]}),t.jsxs("button",{onClick:()=>u(`/chat/${i}`),className:"w-full bg-gray-100 text-gray-700 font-bold py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-gray-200 transition-colors",children:[t.jsx(pi,{size:18}),"Contacter l'artisan"]})]}),te&&(we==null?void 0:we.artisan_id)===((be=f.user)==null?void 0:be.id)&&m.status==="in_progress"&&t.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-gray-100 z-20 space-y-2",children:t.jsxs("button",{onClick:()=>u(`/projects/${i}/work`),className:"w-full bg-brand-500 text-white font-bold py-4 rounded-2xl flex items-center justify-center gap-3 hover:bg-brand-600 transition-colors",children:[t.jsx($s,{size:20}),"Voir les travaux en cours"]})}),te&&(we==null?void 0:we.artisan_id)===((Ke=f.user)==null?void 0:Ke.id)&&m.status==="completion_requested"&&t.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-gray-100 z-20",children:t.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 flex items-center gap-3",children:[t.jsx(St,{size:20,className:"text-yellow-600 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-yellow-800 text-sm",children:"En attente du client"}),t.jsx("p",{className:"text-xs text-yellow-600",children:"Le client doit confirmer la fin des travaux pour librer le paiement."})]})]})}),we&&["quote_accepted","in_progress","completion_requested","completed","expired","cancelled"].includes(m.status||"")&&t.jsx("button",{onClick:()=>u(`/chat/${i}`),className:"fixed bottom-28 right-4 w-14 h-14 bg-brand-500 text-white rounded-full shadow-lg flex items-center justify-center z-30 hover:bg-brand-600 transition-colors",title:"Ouvrir le chat du projet",children:t.jsx(pi,{size:24,fill:"currentColor"})}),ue&&t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Oe,{size:32,className:"text-green-600"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:"Projet Termin !"}),t.jsx("p",{className:"text-sm text-gray-500",children:"valuez ce service"})]}),t.jsx("div",{className:"flex justify-center gap-2 mb-4",children:[1,2,3,4,5].map(V=>t.jsx("button",{onClick:()=>U(V),children:t.jsx(Ma,{size:36,className:V<=P?"text-yellow-400 fill-yellow-400":"text-gray-200"})},V))}),t.jsx("textarea",{value:F,onChange:V=>Q(V.target.value),placeholder:"Partagez votre exprience...",className:"w-full p-4 bg-gray-50 border border-gray-200 rounded-xl mb-4 min-h-20 focus:outline-none focus:border-brand-500"}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{L(!1),u("/dashboard")},className:"flex-1 py-3 bg-gray-100 text-gray-600 font-bold rounded-xl",children:"Plus tard"}),t.jsx("button",{onClick:ve,className:"flex-1 py-3 bg-brand-500 text-white font-bold rounded-xl",children:"Envoyer"})]})]})}),t.jsx(sd,{open:A,title:"Annuler le projet",message:"tes-vous sr de vouloir annuler ce projet ? Cette action est irrversible et tous les devis en attente seront automatiquement rejets.",confirmText:"Oui, annuler",cancelText:"Non, garder le projet",variant:"danger",onConfirm:E,onCancel:()=>B(!1)})]})}function Aa({type:i="card",className:u=""}){return i==="card"?t.jsxs("div",{className:`bg-white rounded-2xl border border-gray-100 p-5 animate-pulse ${u}`,children:[t.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-xl"}),t.jsxs("div",{className:"flex-1 space-y-2",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),t.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]}),t.jsx("div",{className:"h-20 bg-gray-100 rounded-xl mb-3"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("div",{className:"h-6 bg-gray-200 rounded-full w-20"}),t.jsx("div",{className:"h-6 bg-gray-200 rounded-full w-16"})]})]}):i==="list"?t.jsx("div",{className:`space-y-3 ${u}`,children:[1,2,3].map(f=>t.jsx("div",{className:"bg-white rounded-xl border border-gray-100 p-4 animate-pulse",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),t.jsxs("div",{className:"flex-1 space-y-2",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"}),t.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),t.jsx("div",{className:"h-6 bg-gray-200 rounded-full w-16"})]})},f))}):i==="header"?t.jsxs("div",{className:`bg-white border-b border-gray-100 px-4 py-4 flex items-center gap-4 animate-pulse ${u}`,children:[t.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),t.jsxs("div",{className:"flex-1 space-y-2",children:[t.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/3"}),t.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/4"})]}),t.jsx("div",{className:"h-6 bg-gray-200 rounded-full w-20"})]}):i==="quote"?t.jsxs("div",{className:`bg-white rounded-2xl border border-gray-100 p-5 animate-pulse ${u}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-32"}),t.jsx("div",{className:"h-3 bg-gray-200 rounded w-24"})]})]}),t.jsxs("div",{className:"space-y-2 text-right",children:[t.jsx("div",{className:"h-5 bg-gray-200 rounded w-24 ml-auto"}),t.jsx("div",{className:"h-3 bg-gray-200 rounded w-16 ml-auto"})]})]}),t.jsx("div",{className:"h-4 bg-gray-200 rounded-full w-20 mb-4"}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsx("div",{className:"h-3 bg-gray-100 rounded w-full"}),t.jsx("div",{className:"h-3 bg-gray-100 rounded w-5/6"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("div",{className:"h-10 bg-gray-200 rounded-xl flex-1"}),t.jsx("div",{className:"h-10 bg-gray-200 rounded-xl w-24"})]})]}):t.jsxs("div",{className:`animate-pulse space-y-6 ${u}`,children:[t.jsxs("div",{className:"bg-white border-b border-gray-100 px-4 py-4 flex items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),t.jsxs("div",{className:"flex-1 space-y-2",children:[t.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/3"}),t.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/4"})]}),t.jsx("div",{className:"h-6 bg-gray-200 rounded-full w-20"})]}),t.jsxs("div",{className:"max-w-lg mx-auto px-4 space-y-4",children:[t.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 p-5",children:[t.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3 mb-4"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"h-4 bg-gray-100 rounded w-full"}),t.jsx("div",{className:"h-4 bg-gray-100 rounded w-5/6"}),t.jsx("div",{className:"h-4 bg-gray-100 rounded w-4/6"})]})]}),t.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 p-5",children:[t.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/2 mb-3"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"h-20 bg-gray-100 rounded-xl"}),t.jsx("div",{className:"h-20 bg-gray-100 rounded-xl"})]})]})]})]})}function Bp(){var A,B,K,ge;const{id:i}=Js(),u=bt(),f=ut(),{profile:d}=Vt(),{confirmDeposit:h,loading:_}=ji(),{success:b,error:z}=Da(),[p,m]=o.useState(null),[y,g]=o.useState(null),[v,N]=o.useState(null),[H,ae]=o.useState(!0),[Y,X]=o.useState(0),[se,ie]=o.useState(Qt[0].id),[Z,me]=o.useState(""),[oe,ue]=o.useState(!1),[L,P]=o.useState(null),[U,F]=o.useState(null);o.useEffect(()=>{if(!i||!f.user)return;(async()=>{ae(!0);try{const{data:ce,error:re}=await k.from("projects").select("*").eq("id",i).single();if(re)throw re;if(m(ce),ce.client_id!==f.user.id){z("Vous n'tes pas autoris  accder  cette page."),u(`/projects/${i}`);return}const{data:ve,error:W}=await k.from("escrows").select("*").eq("project_id",i).maybeSingle();if(W)throw W;if(!ve){z("Aucun escrow trouv pour ce projet."),u(`/projects/${i}`);return}g(ve),X(Number(ve.total_amount)||0);const{data:E,error:xe}=await k.from("quotes").select("*, profiles!quotes_artisan_id_fkey(id, full_name, avatar_url)").eq("project_id",i).eq("status","accepted").single();!xe&&E&&N(E)}catch(ce){console.error("Error fetching payment data:",ce),z(`Erreur: ${ce.message||"Erreur inconnue"}`)}finally{ae(!1)}})()},[i,f.user,u,z]);const Q=o.useMemo(()=>Qt.find(de=>de.id===se)||Qt[0],[se]),T=o.useMemo(()=>{const de=Math.round(Y*((Q==null?void 0:Q.fees)||0)/100);return Y+de},[Y,Q]),S=async()=>{if(Y<=0){F("Saisissez un montant suprieur  0");return}if(y!=null&&y.id){ue(!0),F(null),P(null);try{const de=await V0(Y,se,{projectId:y.project_id??void 0,escrowId:y.id,phoneNumber:Z||void 0});P(de),F(de.success?null:de.message),de.success&&(await h(y.id,se),b("Paiement confirm avec succs ! L'artisan a t notifi."),setTimeout(()=>{u(`/projects/${i}/work`)},2e3))}catch(de){console.error("Error processing payment:",de),F("Erreur lors du traitement du paiement")}finally{ue(!1)}}};if(H)return t.jsx(Aa,{});if(!p||!y)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Tt,{size:48,className:"text-red-500 mx-auto mb-4"}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Donnes non trouves"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Impossible de charger les informations de paiement."}),t.jsx("button",{onClick:()=>u(`/projects/${i}`),className:"px-6 py-3 bg-brand-500 text-white rounded-xl font-bold",children:"Retour au projet"})]})});const O=y.status==="held"||y.status==="advance_paid"||y.status==="released",j=y.status==="pending";return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsxs("header",{className:"sticky top-0 z-20 px-4 py-4 bg-white border-b border-gray-100 flex items-center gap-4",children:[t.jsx("button",{onClick:()=>u(`/projects/${i}`),className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:t.jsx(Mt,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h1",{className:"font-bold text-gray-900 truncate",children:"Paiement scuris"}),t.jsx("p",{className:"text-xs text-gray-400 font-mono",children:p.project_number})]})]}),t.jsxs("main",{className:"max-w-lg mx-auto px-4 py-6 pb-32",children:[t.jsxs("div",{className:"bg-white rounded-2xl p-5 mb-6 border border-gray-100",children:[t.jsx("h2",{className:"font-bold text-lg text-gray-900 mb-3",children:p.title}),v&&t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden",children:(A=v.profiles)!=null&&A.avatar_url?t.jsx("img",{src:v.profiles.avatar_url,alt:"",className:"w-full h-full object-cover"}):t.jsx("span",{className:"text-gray-400 font-bold",children:((K=(B=v.profiles)==null?void 0:B.full_name)==null?void 0:K.charAt(0))||"A"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-bold text-sm text-gray-900",children:((ge=v.profiles)==null?void 0:ge.full_name)||"Artisan"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Artisan slectionn"})]})]})]}),t.jsxs("div",{className:"bg-brand-50 border border-brand-200 rounded-2xl p-4 mb-6 flex items-start gap-3",children:[t.jsx(A0,{size:24,className:"text-brand-600 flex-shrink-0 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-bold text-sm text-brand-900 mb-1",children:"Paiement scuris par escrow"}),t.jsx("p",{className:"text-xs text-brand-700 leading-relaxed mb-2",children:"Le montant de votre paiement sera retenu dans notre systme d'escrow pour garantir l'excution du projet. Une fois que le projet sera conclu et valid, le montant sera automatiquement revers  l'artisan."}),t.jsx("p",{className:"text-[10px] text-brand-600 font-medium",children:" Cette garantie protge vos intrts et ceux de l'artisan."})]})]}),O&&t.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-2xl p-6 mb-6 text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Sa,{size:32,className:"text-white"})}),t.jsx("h3",{className:"font-bold text-lg text-green-900 mb-2",children:"Paiement effectu !"}),t.jsx("p",{className:"text-sm text-green-700 mb-4",children:"Votre paiement a t confirm. L'artisan a t notifi et peut maintenant commencer les travaux."}),t.jsx("button",{onClick:()=>u(`/projects/${i}/work`),className:"px-6 py-3 bg-green-500 text-white rounded-xl font-bold hover:bg-green-600 transition-colors",children:"Voir les travaux en cours"})]}),j&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-white rounded-2xl p-5 mb-6 border border-gray-100",children:[t.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-4",children:"Dtails du paiement"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Montant du devis"}),t.jsxs("span",{className:"font-bold text-gray-900",children:[Number(y.base_amount||0).toLocaleString("fr-FR")," FCFA"]})]}),Number(y.urgent_surcharge||0)>0&&t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Majoration urgence"}),t.jsxs("span",{className:"font-bold text-gray-900",children:["+",Number(y.urgent_surcharge||0).toLocaleString("fr-FR")," FCFA"]})]}),t.jsxs("div",{className:"border-t border-gray-200 pt-3 flex justify-between items-center",children:[t.jsx("span",{className:"font-bold text-gray-900",children:"Total  payer"}),t.jsxs("span",{className:"font-black text-xl text-brand-600",children:[Number(y.total_amount||0).toLocaleString("fr-FR")," FCFA"]})]})]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-2xl p-5 mb-6 border border-gray-200",children:[t.jsxs("h4",{className:"font-bold text-sm text-gray-900 mb-3 flex items-center gap-2",children:[t.jsx(Vn,{size:16,className:"text-gray-500"}),"Rpartition des fonds"]}),t.jsxs("div",{className:"space-y-2 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Paiement artisan"}),t.jsxs("span",{className:"font-bold text-gray-900",children:[Number(y.artisan_payout||0).toLocaleString("fr-FR")," FCFA"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Commission plateforme (10%)"}),t.jsxs("span",{className:"font-bold text-gray-900",children:[Number(y.commission_amount||0).toLocaleString("fr-FR")," FCFA"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"TVA (18%)"}),t.jsxs("span",{className:"font-bold text-gray-900",children:[Number(y.tva_amount||0).toLocaleString("fr-FR")," FCFA"]})]})]})]}),t.jsxs("div",{className:"rounded-2xl border border-yellow-200 bg-yellow-50 px-4 py-3 text-xs text-yellow-700 mb-6",children:[t.jsx("p",{className:"font-semibold",children:Gn.message}),t.jsx("p",{children:Gn.warning})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6 border border-gray-100",children:[t.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-4",children:"Mode de paiement"}),t.jsxs("div",{className:"mb-5 space-y-2",children:[t.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Montant  scuriser"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"number",min:0,value:Y,onChange:de=>X(Number(de.target.value)),className:"flex-1 rounded-2xl border border-gray-200 px-4 py-3 text-lg font-bold text-gray-900 focus:border-brand-500 focus:outline-none"}),t.jsx("span",{className:"text-xs font-black text-gray-500",children:"FCFA"})]})]}),t.jsxs("div",{className:"mb-5",children:[t.jsx("p",{className:"text-xs font-bold uppercase text-gray-500 tracking-[0.3em] mb-3",children:"Mthode"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Qt.filter(de=>de.logo).map(de=>t.jsxs("button",{type:"button",onClick:()=>ie(de.id),className:`flex-1 min-w-[120px] rounded-2xl border-2 px-4 py-4 text-center transition ${se===de.id?"border-brand-500 bg-brand-50 text-brand-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,children:[t.jsx("div",{className:"flex items-center justify-center mb-2 h-14 min-h-[56px]",children:de.logo?t.jsx("img",{src:de.logo,alt:de.name,className:"max-h-14 max-w-full object-contain w-auto h-auto",style:{maxHeight:"56px",maxWidth:"100%"},onError:ce=>{const re=ce.target,ve=re.parentElement;if(ve){re.style.display="none";const W=document.createElement("div");W.className="text-2xl",W.textContent=de.icon,ve.appendChild(W)}}}):t.jsx("div",{className:"text-2xl",children:de.icon})}),t.jsx("div",{className:"text-xs font-bold uppercase",children:de.name})]},de.id))}),Qt.filter(de=>!de.logo&&de.available).length>0&&t.jsx("div",{className:"mt-2 grid grid-cols-2 gap-2",children:Qt.filter(de=>!de.logo&&de.available).map(de=>t.jsxs("button",{type:"button",onClick:()=>ie(de.id),className:`rounded-2xl border px-4 py-3 text-left transition ${se===de.id?"border-brand-500 bg-brand-50 text-brand-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,children:[t.jsx("div",{className:"text-xl mb-2",children:de.icon}),t.jsx("div",{className:"text-sm font-bold",children:de.name}),t.jsx("p",{className:"text-xs text-gray-500",children:de.description})]},de.id))})]}),t.jsxs("div",{className:"mb-5 space-y-2",children:[t.jsx("label",{className:"text-xs font-bold uppercase text-gray-500",children:"Numro du payeur"}),t.jsx("input",{type:"tel",value:Z,onChange:de=>me(de.target.value),placeholder:"ex: 77xxxxxx",className:"w-full rounded-2xl border border-gray-200 px-4 py-3 text-sm text-gray-700 focus:border-brand-500 focus:outline-none"}),t.jsx("p",{className:"text-[10px] text-gray-400",children:"Optionnel, permet de contextualiser la transaction ct oprateur."})]}),t.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-4 text-sm space-y-2 mb-5",children:[t.jsxs("div",{className:"flex justify-between text-gray-500",children:[t.jsxs("span",{children:["Frais (",(Q==null?void 0:Q.fees)??0,"%)"]}),t.jsxs("span",{children:[Math.round(Y*(((Q==null?void 0:Q.fees)??0)/100)).toLocaleString("fr-FR")," FCFA"]})]}),t.jsxs("div",{className:"flex justify-between font-bold text-gray-900",children:[t.jsx("span",{children:"Total"}),t.jsxs("span",{children:[T.toLocaleString("fr-FR")," FCFA"]})]}),t.jsxs("p",{className:"text-[11px] text-gray-400",children:["Mthode slectionne : ",t.jsx("strong",{children:Q==null?void 0:Q.name})]})]}),L&&t.jsxs("div",{className:`mb-4 flex items-center gap-2 rounded-2xl border px-4 py-3 text-sm ${L.success?"border-green-200 bg-green-50 text-green-800":"border-red-200 bg-red-50 text-red-700"}`,children:[L.success?t.jsx(Oe,{size:20}):t.jsx(Tt,{size:20}),t.jsx("span",{children:L.message})]}),U&&t.jsxs("div",{className:"mb-4 flex items-center gap-2 rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:[t.jsx(Tt,{size:18}),t.jsx("span",{children:U})]}),t.jsx("button",{type:"button",onClick:S,disabled:oe||_,className:"w-full rounded-2xl bg-gradient-to-r from-brand-500 to-brand-600 px-4 py-4 text-sm font-bold uppercase tracking-[0.2em] text-white transition disabled:opacity-60 flex items-center justify-center gap-2",children:oe?t.jsxs(t.Fragment,{children:[t.jsx(ca,{className:"h-4 w-4 animate-spin"}),t.jsx("span",{children:"Traitement..."})]}):t.jsx("span",{children:"Simuler le paiement"})})]})]})]})]})}function Vp(){var U,F;const{id:i}=Js(),u=bt(),f=ut(),{profile:d}=Vt(),{success:h,error:_}=Da(),[b,z]=o.useState(null),[p,m]=o.useState(null),[y,g]=o.useState(null),[v,N]=o.useState(null),[H,ae]=o.useState(!0),[Y,X]=o.useState(!1),[se,ie]=o.useState(!1);o.useEffect(()=>{if(!i||!f.user)return;(async()=>{ae(!0);try{const{data:T,error:S}=await k.from("projects").select("*").eq("id",i).single();if(S)throw S;z(T);const O=T.client_id===f.user.id,j=(d==null?void 0:d.role)==="artisan";if(!O&&!j){_("Vous n'tes pas autoris  accder  cette page."),u(`/projects/${i}`);return}const{data:A}=await k.from("escrows").select("*").eq("project_id",i).maybeSingle();m(A||null);const{data:B}=await k.from("quotes").select("*, profiles!quotes_artisan_id_fkey(*)").eq("project_id",i).eq("status","accepted").single();B&&(g(B),N(B.profiles))}catch(T){console.error("Error fetching work data:",T),_(`Erreur: ${T.message||"Erreur inconnue"}`)}finally{ae(!1)}})()},[i,f.user,d,u,_]);const Z=(b==null?void 0:b.client_id)===((U=f.user)==null?void 0:U.id),me=(d==null?void 0:d.role)==="artisan",oe=(y==null?void 0:y.artisan_id)===((F=f.user)==null?void 0:F.id);Z&&(b==null||b.status);const ue=Z&&(b==null?void 0:b.status)==="in_progress",L=me&&oe&&(b==null?void 0:b.status)==="in_progress",P=async()=>{if(!(!i||!(b!=null&&b.client_id)||!(b!=null&&b.title)))try{X(!0);const{error:Q}=await k.from("projects").update({status:"completion_requested"}).eq("id",i);if(Q)throw Q;await O0(i,b.client_id,b.title),h("Demande de clture envoye ! Le client sera notifi."),setTimeout(async()=>{const{data:T}=await k.from("projects").select("*").eq("id",i).single();T&&z(T)},500)}catch(Q){console.error("Error requesting completion:",Q),_(`Erreur: ${Q.message||"Erreur inconnue"}`)}finally{X(!1),ie(!1)}};return H?t.jsx(Aa,{}):b?t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsxs("header",{className:"sticky top-0 z-20 px-4 py-4 bg-white border-b border-gray-100 flex items-center gap-4",children:[t.jsx("button",{onClick:()=>u(`/projects/${i}`),className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:t.jsx(Mt,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h1",{className:"font-bold text-gray-900 truncate",children:"Travaux en cours"}),t.jsx("p",{className:"text-xs text-gray-400 font-mono",children:b.project_number})]})]}),t.jsxs("main",{className:"max-w-lg mx-auto px-4 py-6 pb-32",children:[t.jsxs("div",{className:"bg-white rounded-2xl p-5 mb-6 border border-gray-100",children:[t.jsx("h2",{className:"font-bold text-lg text-gray-900 mb-4",children:b.title}),v&&t.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-4 border-b border-gray-100",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:v.avatar_url?t.jsx("img",{src:v.avatar_url,alt:"",className:"w-full h-full object-cover"}):t.jsx(tt,{size:20,className:"text-gray-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-bold text-sm text-gray-900",children:v.full_name||"Artisan"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Artisan slectionn"})]})]}),t.jsxs("div",{className:"space-y-3",children:[b.location&&t.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[t.jsx(Gt,{size:16,className:"text-gray-400 flex-shrink-0 mt-0.5"}),t.jsx("span",{className:"text-gray-700",children:b.location})]}),(y==null?void 0:y.proposed_date)&&t.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[t.jsx(Ql,{size:16,className:"text-gray-400 flex-shrink-0 mt-0.5"}),t.jsxs("span",{className:"text-gray-700",children:["Date prvue: ",new Date(y.proposed_date).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),(y==null?void 0:y.estimated_duration)&&t.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[t.jsx(St,{size:16,className:"text-gray-400 flex-shrink-0 mt-0.5"}),t.jsxs("span",{className:"text-gray-700",children:["Dure estime: ",y.estimated_duration]})]})]})]}),t.jsx("div",{className:"bg-brand-50 border border-brand-200 rounded-2xl p-5 mb-6",children:t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-brand-500 flex items-center justify-center",children:t.jsx($s,{size:24,className:"text-white"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-bold text-lg text-brand-900",children:"Travaux en cours"}),t.jsx("p",{className:"text-sm text-brand-700",children:Z?"Votre artisan est en train de raliser les travaux.":"Vous tes en train de raliser les travaux pour ce projet."})]})]})}),Z&&p&&t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-5 mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(Oe,{size:20,className:"text-green-600"}),t.jsx("h4",{className:"font-bold text-sm text-green-900",children:"Paiement scuris"})]}),t.jsx("p",{className:"text-xs text-green-700 leading-relaxed",children:"Votre paiement est protg et sera libr aprs confirmation de la fin des travaux."}),t.jsx("div",{className:"mt-3 pt-3 border-t border-green-200",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-xs text-green-700",children:"Montant scuris"}),t.jsxs("span",{className:"font-bold text-green-900",children:[Number(p.total_amount||0).toLocaleString("fr-FR")," FCFA"]})]})})]}),Z&&ue&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("button",{onClick:()=>u(`/projects/${i}/completion`),className:"w-full bg-green-500 text-white font-bold py-4 rounded-2xl flex items-center justify-center gap-3 hover:bg-green-600 transition-colors",children:[t.jsx(Oe,{size:20}),"Confirmer la fin des travaux"]}),t.jsx("button",{onClick:()=>u(`/projects/${i}`),className:"w-full bg-gray-100 text-gray-700 font-bold py-3 rounded-xl hover:bg-gray-200 transition-colors",children:"Voir les dtails du projet"})]}),me&&oe&&t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-5 space-y-3",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-sm text-blue-900 mb-2",children:"Instructions"}),t.jsx("p",{className:"text-xs text-blue-700 leading-relaxed mb-4",children:"Effectuez les travaux conformment au devis accept. Une fois termin, vous pourrez demander la clture."})]}),L&&t.jsxs("button",{onClick:()=>ie(!0),disabled:Y,className:"w-full bg-green-500 text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-green-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(Oe,{size:18}),Y?"Traitement...":"Demander la clture"]}),(b==null?void 0:b.status)==="completion_requested"&&t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-3",children:t.jsx("p",{className:"text-xs text-yellow-700 font-medium text-center",children:"Demande de clture envoye. En attente de confirmation du client."})}),t.jsxs("button",{onClick:()=>u(`/chat/${i}`),className:"w-full bg-blue-500 text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-blue-600 transition-colors",children:[t.jsx(pi,{size:18}),"Contacter le client"]})]})]}),t.jsx(sd,{open:se,onCancel:()=>ie(!1),onConfirm:P,title:"Demander la clture",message:"Confirmez-vous que les travaux sont termins ? Une notification sera envoye au client pour qu'il confirme la clture.",confirmText:"Oui, demander la clture",cancelText:"Annuler"})]}):t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Tt,{size:48,className:"text-red-500 mx-auto mb-4"}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Projet non trouv"}),t.jsx("button",{onClick:()=>u("/dashboard"),className:"px-6 py-3 bg-brand-500 text-white rounded-xl font-bold mt-4",children:"Retour au tableau de bord"})]})})}function Hp(){const{id:i}=Js(),u=bt(),f=ut(),{profile:d}=Vt(),{releaseFullPayment:h}=ji(),{success:_,error:b}=Da(),[z,p]=o.useState(null),[m,y]=o.useState(null),[g,v]=o.useState(null),[N,H]=o.useState(null),[ae,Y]=o.useState(!0),[X,se]=o.useState(!1),[ie,Z]=o.useState(5),[me,oe]=o.useState(""),[ue,L]=o.useState(!1),[P,U]=o.useState(!1);o.useEffect(()=>{if(!i||!f.user)return;(async()=>{Y(!0);try{const{data:j,error:A}=await k.from("projects").select("*").eq("id",i).single();if(A)throw A;if(p(j),j.client_id!==f.user.id){b("Vous n'tes pas autoris  accder  cette page."),u(`/projects/${i}`);return}const{data:B}=await k.from("escrows").select("*").eq("project_id",i).maybeSingle();y(B||null);const{data:K}=await k.from("quotes").select("*, profiles!quotes_artisan_id_fkey(*)").eq("project_id",i).eq("status","accepted").single();K&&(v(K),H(K.profiles))}catch(j){console.error("Error fetching completion data:",j),b(`Erreur: ${j.message||"Erreur inconnue"}`)}finally{Y(!1)}})()},[i,f.user,u,b]);const F=async()=>{var O;if(!(!i||!((O=f.user)!=null&&O.id)))try{se(!0);const{error:j}=await k.from("projects").update({status:"completion_requested"}).eq("id",i);if(j)throw j;g!=null&&g.artisan_id&&(z!=null&&z.title)&&await O0(i,g.artisan_id,z.title),_("Demande de clture envoye ! L'artisan sera notifi."),setTimeout(()=>{u(`/projects/${i}`)},1500)}catch(j){console.error("Error requesting completion:",j),b(`Erreur: ${j.message||"Erreur inconnue"}`)}finally{se(!1),L(!1)}},Q=async()=>{var O;if(!(!i||!((O=f.user)!=null&&O.id)||!(m!=null&&m.id)))try{se(!0),await h(m.id);const{error:j}=await k.from("projects").update({status:"completed"}).eq("id",i);if(j)throw j;if(ie>0&&(g!=null&&g.artisan_id)){const{error:A}=await k.from("reviews").insert({project_id:i,artisan_id:g.artisan_id,client_id:f.user.id,rating:ie,comment:me||null});A&&console.error("Error creating review:",A)}g!=null&&g.artisan_id&&(z!=null&&z.title)&&await Zo(i,g.artisan_id,Number(m.artisan_payout||0)),_("Projet termin avec succs ! Le paiement a t libr."),!P&&ie===0?U(!0):setTimeout(()=>{u(`/projects/${i}`)},1500)}catch(j){console.error("Error completing project:",j),b(`Erreur: ${j.message||"Erreur inconnue"}`)}finally{se(!1)}};if(ae)return t.jsx(Aa,{});if(!z||!m)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Tt,{size:48,className:"text-red-500 mx-auto mb-4"}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Donnes non trouves"}),t.jsx("button",{onClick:()=>u(`/projects/${i}`),className:"px-6 py-3 bg-brand-500 text-white rounded-xl font-bold mt-4",children:"Retour au projet"})]})});const T=z.status==="completion_requested",S=z.status==="in_progress"||T;return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsxs("header",{className:"sticky top-0 z-20 px-4 py-4 bg-white border-b border-gray-100 flex items-center gap-4",children:[t.jsx("button",{onClick:()=>u(`/projects/${i}`),className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:t.jsx(Mt,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h1",{className:"font-bold text-gray-900 truncate",children:"Clture du projet"}),t.jsx("p",{className:"text-xs text-gray-400 font-mono",children:z.project_number})]})]}),t.jsxs("main",{className:"max-w-lg mx-auto px-4 py-6 pb-32",children:[t.jsxs("div",{className:"bg-white rounded-2xl p-5 mb-6 border border-gray-100",children:[t.jsx("h2",{className:"font-bold text-lg text-gray-900 mb-4",children:z.title}),N&&t.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-4 border-b border-gray-100",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:N.avatar_url?t.jsx("img",{src:N.avatar_url,alt:"",className:"w-full h-full object-cover"}):t.jsx(tt,{size:20,className:"text-gray-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-bold text-sm text-gray-900",children:N.full_name||"Artisan"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Artisan slectionn"})]})]}),t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-green-700 font-medium",children:"Montant pay"}),t.jsxs("span",{className:"font-bold text-green-900",children:[Number(m.total_amount||0).toLocaleString("fr-FR")," FCFA"]})]})})]}),T&&t.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-2xl p-5 mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(St,{size:20,className:"text-yellow-600"}),t.jsx("h3",{className:"font-bold text-sm text-yellow-900",children:"En attente de confirmation"})]}),t.jsx("p",{className:"text-xs text-yellow-700 leading-relaxed",children:"L'artisan a t notifi de votre demande de clture. Vous pouvez confirmer la clture ds que vous tes satisfait."})]}),P&&t.jsxs("div",{className:"bg-white rounded-2xl p-5 mb-6 border border-gray-100",children:[t.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-4",children:"Donnez votre avis"}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Note"}),t.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(O=>t.jsx("button",{onClick:()=>Z(O),className:"focus:outline-none",children:t.jsx(Ma,{size:36,className:O<=ie?"text-yellow-400 fill-yellow-400":"text-gray-200"})},O))})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Commentaire (optionnel)"}),t.jsx("textarea",{value:me,onChange:O=>oe(O.target.value),rows:4,maxLength:500,className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-brand-500 focus:outline-none resize-none text-sm",placeholder:"Partagez votre exprience..."}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[me.length,"/500 caractres"]})]}),t.jsx("button",{onClick:Q,disabled:X,className:"w-full bg-brand-500 text-white font-bold py-3 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed",children:X?"Traitement...":"Envoyer l'avis et terminer"})]}),S&&!P&&t.jsxs("div",{className:"space-y-3",children:[T?t.jsxs("button",{onClick:()=>L(!0),disabled:X,className:"w-full bg-green-500 text-white font-bold py-4 rounded-2xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-green-600 transition-colors",children:[t.jsx(Oe,{size:20}),X?"Traitement...":"Confirmer la clture"]}):t.jsxs("button",{onClick:()=>F(),disabled:X,className:"w-full bg-brand-500 text-white font-bold py-4 rounded-2xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-brand-600 transition-colors",children:[t.jsx(Kh,{size:20}),X?"Traitement...":"Demander la clture"]}),t.jsxs("button",{onClick:()=>u(`/chat/${i}`),className:"w-full bg-gray-100 text-gray-700 font-bold py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-gray-200 transition-colors",children:[t.jsx(Wo,{size:18}),"Contacter l'artisan"]})]})]}),t.jsx(sd,{open:ue,onCancel:()=>L(!1),onConfirm:Q,title:"Confirmer la clture",message:"tes-vous sr de vouloir clturer ce projet ? Le paiement sera libr  l'artisan.",confirmText:"Oui, clturer",cancelText:"Annuler"})]})}function Gp(i){const[u,f]=o.useState([]),[d,h]=o.useState(!1),_=o.useCallback(async()=>{if(!i)return;h(!0);const{data:z,error:p}=await k.from("messages").select("*").eq("project_id",i).order("created_at",{ascending:!0});!p&&z&&f(z),h(!1)},[i]);return o.useEffect(()=>{if(_(),!i)return;const z=k.channel(`project-messages-${i}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`project_id=eq.${i}`},p=>{f(m=>[...m,p.new])}).subscribe();return()=>{k.removeChannel(z)}},[i,_]),{messages:u,loading:d,sendMessage:async z=>{const{error:p}=await k.from("messages").insert({project_id:z.project_id,sender_id:z.sender_id,content:z.content,audio_url:z.audio_url,type:z.type});if(p)throw p},refresh:_}}function Fp(){const{projectId:i}=Js(),u=bt(),f=ut(),{messages:d,sendMessage:h,loading:_}=Gp(i),[b,z]=o.useState(""),[p,m]=o.useState(!1),[y,g]=o.useState(null),[v,N]=o.useState(null),[H,ae]=o.useState(null),[Y,X]=o.useState(!1),[se,ie]=o.useState(!1),Z=o.useRef(null),me=o.useRef(new Map),oe=o.useRef(null);o.useEffect(()=>{(async()=>{var O,j;if(!i||!f.user)return;const{data:S}=await k.from("projects").select(`
          id, title, client_id,
          profiles!projects_client_id_fkey (full_name, avatar_url)
        `).eq("id",i).single();if(S)if(g(S),S.client_id===f.user.id){const{data:B}=await k.from("quotes").select(`
              artisan_id,
              profiles!quotes_artisan_id_fkey (full_name, avatar_url)
            `).eq("project_id",i).eq("status","accepted").single();B!=null&&B.profiles&&N({id:B.artisan_id,name:B.profiles.full_name,avatar:B.profiles.avatar_url,role:"artisan"})}else N({id:S.client_id,name:((O=S.profiles)==null?void 0:O.full_name)||"Client",avatar:((j=S.profiles)==null?void 0:j.avatar_url)||null,role:"client"})})()},[i,f.user]);const ue=()=>{var T;(T=Z.current)==null||T.scrollIntoView({behavior:"smooth"})};o.useEffect(()=>{ue()},[d]);const L=(T,S)=>{const O=me.current.get(T);if(H===T&&O)O.pause(),ae(null);else{me.current.forEach(A=>A.pause());let j=me.current.get(T);j||(j=new Audio(S),j.onended=()=>ae(null),me.current.set(T,j)),j.play(),ae(T)}},P=async()=>{var T;if(!(!b.trim()||!i||!f.user||se)){ie(!0);try{await h({project_id:i,sender_id:f.user.id,content:b,type:"text"}),v&&await Ho(i,v.id,((T=f.user.user_metadata)==null?void 0:T.full_name)||"Quelqu'un"),z("")}catch(S){console.error("Error sending message:",S)}finally{ie(!1)}}},U=async T=>{var S;if(!(!i||!f.user)){ie(!0);try{const O=`${f.user.id}/${Date.now()}.webm`,{data:j,error:A}=await k.storage.from("audio").upload(`messages/${O}`,T);if(A)throw A;const B=k.storage.from("audio").getPublicUrl(j.path).data.publicUrl;await h({project_id:i,sender_id:f.user.id,audio_url:B,type:"audio"}),v&&await Ho(i,v.id,((S=f.user.user_metadata)==null?void 0:S.full_name)||"Quelqu'un"),m(!1)}catch(O){console.error("Error sending audio:",O)}finally{ie(!1)}}},F=async T=>{var O,j;const S=(O=T.target.files)==null?void 0:O[0];if(!(!S||!i||!f.user)){ie(!0);try{const A=`${f.user.id}/${Date.now()}-${S.name}`,{data:B,error:K}=await k.storage.from("photos").upload(`messages/${A}`,S);if(K)throw K;const ge=k.storage.from("photos").getPublicUrl(B.path).data.publicUrl;await h({project_id:i,sender_id:f.user.id,content:ge,type:"image"}),v&&await Ho(i,v.id,((j=f.user.user_metadata)==null?void 0:j.full_name)||"Quelqu'un")}catch(A){console.error("Error sending image:",A)}finally{ie(!1),oe.current&&(oe.current.value="")}}},Q=d.reduce((T,S)=>{const O=new Date(S.created_at).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"}),j=T.find(A=>A.date===O);return j?j.messages.push(S):T.push({date:O,messages:[S]}),T},[]);return t.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[t.jsxs("header",{className:"px-4 py-3 bg-white border-b shadow-sm flex items-center justify-between sticky top-0 z-10",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:()=>u(-1),className:"w-10 h-10 rounded-xl bg-gray-100 flex items-center justify-center text-gray-600 hover:bg-gray-200 transition-colors",children:t.jsx(Mt,{size:20})}),v&&t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-100 flex items-center justify-center overflow-hidden",children:v.avatar?t.jsx("img",{src:v.avatar,alt:"",className:"w-full h-full object-cover"}):t.jsx(tt,{size:20,className:"text-brand-500"})}),t.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-gray-900 text-sm",children:v.name}),t.jsxs("p",{className:"text-[10px] text-green-500 font-bold uppercase tracking-wider flex items-center gap-1",children:[t.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),"En ligne"]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-gray-400 hover:bg-gray-100 transition-colors",children:t.jsx(Hn,{size:18})}),t.jsx("button",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-gray-400 hover:bg-gray-100 transition-colors",children:t.jsx(Ks,{size:18})}),t.jsx("button",{onClick:()=>X(!Y),className:"w-10 h-10 rounded-xl flex items-center justify-center text-gray-400 hover:bg-gray-100 transition-colors",children:t.jsx(Jo,{size:18})})]}),Y&&t.jsx("div",{className:"absolute right-4 top-16 w-48 bg-white rounded-xl shadow-lg border border-gray-100 py-1 z-20 animate-in fade-in slide-in-from-top-2 duration-200",children:t.jsxs("button",{onClick:()=>{u(`/projects/${i}`),X(!1)},className:"w-full px-4 py-3 text-left text-sm font-medium text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[t.jsx(Vn,{size:16}),"Voir le projet"]})})]}),y&&t.jsx("div",{className:"px-4 py-2 bg-brand-50 border-b border-brand-100",children:t.jsxs("p",{className:"text-xs text-brand-600 font-medium text-center",children:["Discussion pour : ",t.jsx("span",{className:"font-bold",children:y.title})]})}),t.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4",children:_?t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx("div",{className:"w-8 h-8 border-3 border-brand-500 border-t-transparent rounded-full animate-spin"})}):d.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:t.jsx(Bl,{size:24,className:"text-gray-300"})}),t.jsx("p",{className:"text-gray-400 font-medium",children:"Aucun message"}),t.jsx("p",{className:"text-xs text-gray-300 mt-1",children:"Commencez la conversation !"})]}):t.jsxs("div",{className:"space-y-6",children:[Q.map(T=>t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center justify-center mb-4",children:t.jsx("span",{className:"px-3 py-1 bg-gray-200 text-gray-500 text-[10px] font-bold uppercase tracking-wider rounded-full",children:T.date})}),t.jsx("div",{className:"space-y-3",children:T.messages.map(S=>{var A;const O=S.sender_id===((A=f.user)==null?void 0:A.id),j=H===S.id;return t.jsx("div",{className:`flex ${O?"justify-end":"justify-start"}`,children:t.jsxs("div",{className:`max-w-[80%] ${O?"order-2":"order-1"}`,children:[t.jsxs("div",{className:`rounded-2xl px-4 py-3 ${O?"bg-brand-500 text-white rounded-br-sm":"bg-white border border-gray-100 text-gray-800 rounded-bl-sm shadow-sm"}`,children:[S.type==="text"&&t.jsx("p",{className:"text-sm leading-relaxed",children:S.content}),S.type==="audio"&&S.audio_url&&t.jsxs("button",{onClick:()=>L(S.id,S.audio_url),className:`flex items-center gap-3 py-1 min-w-[140px] ${O?"text-white":"text-brand-600"}`,children:[t.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${O?"bg-white/20":"bg-brand-100"}`,children:j?t.jsx(Oh,{size:18,fill:"currentColor"}):t.jsx(Gl,{size:18,fill:"currentColor",className:"ml-0.5"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"flex items-center gap-1",children:[...Array(12)].map((B,K)=>t.jsx("div",{className:`w-1 rounded-full ${O?"bg-white/60":"bg-brand-300"} ${j?"animate-pulse":""}`,style:{height:`${8+Math.random()*12}px`,animationDelay:`${K*50}ms`}},K))}),t.jsx("p",{className:`text-[9px] font-bold uppercase tracking-wider mt-1 ${O?"text-white/70":"text-gray-400"}`,children:"Message vocal"})]})]}),S.type==="image"&&S.content&&t.jsx("img",{src:S.content,alt:"Image partage",className:"rounded-xl max-w-full max-h-60 object-cover cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(S.content,"_blank")})]}),t.jsxs("div",{className:`flex items-center gap-1 mt-1 ${O?"justify-end":"justify-start"}`,children:[t.jsx("span",{className:"text-[10px] text-gray-400",children:new Date(S.created_at).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}),O&&t.jsx(_0,{size:12,className:"text-brand-400"})]})]})},S.id)})})]},T.date)),t.jsx("div",{ref:Z})]})}),t.jsx("div",{className:"p-4 bg-white border-t safe-area-pb",children:p?t.jsx("div",{className:"animate-in slide-in-from-bottom-4 duration-300",children:t.jsx(ad,{onRecordingComplete:U,onDelete:()=>m(!1)})}):t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{ref:oe,type:"file",accept:"image/*",onChange:F,className:"hidden"}),t.jsx("button",{onClick:()=>{var T;return(T=oe.current)==null?void 0:T.click()},disabled:se,className:"w-12 h-12 rounded-xl bg-gray-100 text-gray-500 flex items-center justify-center hover:bg-gray-200 transition-colors disabled:opacity-50",children:t.jsx(Ss,{size:20})}),t.jsx("button",{onClick:()=>m(!0),disabled:se,className:"w-12 h-12 rounded-xl bg-brand-50 text-brand-500 flex items-center justify-center hover:bg-brand-100 transition-colors disabled:opacity-50",children:t.jsx(yi,{size:20})}),t.jsxs("div",{className:"flex-1 relative",children:[t.jsx("input",{type:"text",value:b,onChange:T=>z(T.target.value),onKeyPress:T=>T.key==="Enter"&&P(),placeholder:"Votre message...",disabled:se,className:"w-full pl-4 pr-12 py-3 bg-gray-100 rounded-xl focus:outline-none focus:ring-2 ring-brand-200 transition-all text-sm disabled:opacity-50"}),t.jsx("button",{onClick:P,disabled:!b.trim()||se,className:"absolute right-1.5 top-1/2 -translate-y-1/2 w-9 h-9 bg-brand-500 text-white rounded-lg flex items-center justify-center disabled:opacity-50 disabled:bg-gray-300 transition-colors",children:se?t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):t.jsx(Bl,{size:16})})]})]})}),Y&&t.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>X(!1)})]})}function Qp(){const{user:i}=ut(),[u,f]=o.useState([]),[d,h]=o.useState(0),[_,b]=o.useState(!0),z=o.useCallback(async()=>{if(!i){f([]),h(0),b(!1);return}try{const{data:g,error:v}=await k.from("notifications").select("*").eq("user_id",i.id).order("created_at",{ascending:!1}).limit(50);if(v)throw v;f(g||[]),h((g==null?void 0:g.filter(N=>!N.is_read).length)||0)}catch(g){console.error("Error fetching notifications:",g)}finally{b(!1)}},[i]),p=o.useCallback(async g=>{if(i)try{await k.from("notifications").update({is_read:!0}).eq("id",g),f(v=>v.map(N=>N.id===g?{...N,is_read:!0}:N)),h(v=>Math.max(0,v-1))}catch(v){console.error("Error marking notification as read:",v)}},[i]),m=o.useCallback(async()=>{if(i)try{await k.from("notifications").update({is_read:!0}).eq("user_id",i.id).eq("is_read",!1),f(g=>g.map(v=>({...v,is_read:!0}))),h(0)}catch(g){console.error("Error marking all notifications as read:",g)}},[i]),y=o.useCallback(async g=>{if(i)try{await k.from("notifications").delete().eq("id",g),f(v=>v.filter(N=>N.id!==g))}catch(v){console.error("Error deleting notification:",v)}},[i]);return o.useEffect(()=>{if(!i)return;z();const g=k.channel("notifications_realtime").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${i.id}`},v=>{const N=v.new;f(H=>[N,...H]),h(H=>H+1);try{const H=new Audio("/notification.mp3");H.volume=.3,H.play().catch(()=>{})}catch{}}).subscribe();return()=>{k.removeChannel(g)}},[i,z]),{notifications:u,unreadCount:d,loading:_,markAsRead:p,markAllAsRead:m,deleteNotification:y,refresh:z}}const j0={new_project:{icon:t.jsx(wt,{size:16}),color:"text-blue-600",bg:"bg-blue-100"},new_quote:{icon:t.jsx(zt,{size:16}),color:"text-purple-600",bg:"bg-purple-100"},quote_accepted:{icon:t.jsx(Sa,{size:16}),color:"text-green-600",bg:"bg-green-100"},quote_rejected:{icon:t.jsx(at,{size:16}),color:"text-red-600",bg:"bg-red-100"},project_completed:{icon:t.jsx(Sa,{size:16}),color:"text-green-600",bg:"bg-green-100"},payment_received:{icon:t.jsx(Wa,{size:16}),color:"text-green-600",bg:"bg-green-100"},verification_approved:{icon:t.jsx(At,{size:16}),color:"text-blue-600",bg:"bg-blue-100"},verification_rejected:{icon:t.jsx(At,{size:16}),color:"text-red-600",bg:"bg-red-100"},new_message:{icon:t.jsx(Wo,{size:16}),color:"text-brand-600",bg:"bg-brand-100"},system:{icon:t.jsx(gi,{size:16}),color:"text-gray-600",bg:"bg-gray-100"}},Yp=i=>{const u=new Date(i),d=new Date().getTime()-u.getTime(),h=Math.floor(d/(1e3*60)),_=Math.floor(d/(1e3*60*60)),b=Math.floor(d/(1e3*60*60*24));return h<1?" l'instant":h<60?`Il y a ${h} min`:_<24?`Il y a ${_}h`:b<7?`Il y a ${b}j`:u.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})};function Xp(){const i=bt(),{notifications:u,unreadCount:f,markAsRead:d,markAllAsRead:h,deleteNotification:_}=Qp(),[b,z]=o.useState(!1),p=o.useRef(null);o.useEffect(()=>{const y=g=>{p.current&&!p.current.contains(g.target)&&z(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const m=y=>{d(y.id);const{data:g}=y;switch(window.scrollTo({top:0,left:0,behavior:"instant"}),document.documentElement.scrollTop=0,document.body.scrollTop=0,y.type){case"new_project":case"quote_accepted":case"quote_rejected":case"project_completed":g!=null&&g.project_id&&i(`/projects/${g.project_id}`);break;case"new_quote":g!=null&&g.project_id&&i(`/projects/${g.project_id}`);break;case"payment_received":i("/dashboard");break;case"verification_approved":case"verification_rejected":i("/dashboard");break;case"new_message":g!=null&&g.project_id&&i(`/chat/${g.project_id}`);break;default:i("/dashboard")}z(!1)};return t.jsxs("div",{className:"relative",ref:p,children:[t.jsxs("button",{onClick:()=>z(!b),className:`relative w-11 h-11 rounded-xl flex items-center justify-center transition-colors ${b?"bg-brand-500 text-white":"bg-gray-100 text-gray-500 hover:bg-brand-50 hover:text-brand-500"}`,"aria-label":"Notifications",children:[t.jsx(gi,{size:20}),f>0&&t.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center border-2 border-white animate-pulse",children:f>9?"9+":f})]}),b&&t.jsxs("div",{className:"absolute right-0 mt-2 w-80 md:w-96 bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden z-50 animate-in fade-in slide-in-from-top-2 duration-200",children:[t.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 flex items-center justify-between bg-gray-50",children:[t.jsx("h3",{className:"font-bold text-gray-900",children:"Notifications"}),f>0&&t.jsxs("button",{onClick:()=>h(),className:"text-xs text-brand-500 font-bold hover:underline flex items-center gap-1",children:[t.jsx(_0,{size:14}),"Tout marquer comme lu"]})]}),t.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:u.length===0?t.jsxs("div",{className:"py-12 text-center",children:[t.jsx(gi,{size:32,className:"mx-auto text-gray-200 mb-3"}),t.jsx("p",{className:"text-gray-400 font-medium text-sm",children:"Aucune notification"})]}):t.jsx("div",{className:"divide-y divide-gray-50",children:u.slice(0,20).map(y=>{const g=j0[y.type]||j0.system;return t.jsxs("div",{className:`flex items-start gap-3 p-4 cursor-pointer transition-colors hover:bg-gray-50 ${y.is_read?"":"bg-brand-50/30"}`,children:[t.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${g.bg} ${g.color}`,children:g.icon}),t.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>m(y),children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsx("p",{className:`text-sm font-bold text-gray-900 ${y.is_read?"text-gray-700":""}`,children:y.title}),!y.is_read&&t.jsx("span",{className:"w-2 h-2 bg-brand-500 rounded-full flex-shrink-0 mt-1.5"})]}),y.message&&t.jsx("p",{className:"text-xs text-gray-500 mt-0.5 line-clamp-2",children:y.message}),t.jsx("p",{className:"text-[10px] text-gray-400 mt-1 font-medium",children:Yp(y.created_at)})]}),t.jsx("button",{onClick:v=>{v.stopPropagation(),_(y.id)},className:"p-1.5 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:t.jsx(td,{size:14})})]},y.id)})})}),u.length>0&&t.jsx("div",{className:"px-4 py-3 border-t border-gray-100 bg-gray-50",children:t.jsxs("button",{onClick:()=>{i("/notifications"),z(!1)},className:"w-full text-center text-xs text-brand-500 font-bold hover:underline flex items-center justify-center gap-1",children:["Voir toutes les notifications",t.jsx(Zs,{size:14})]})})]})]})}const Ol={open:{label:"En attente",color:"bg-blue-100 text-blue-700",icon:t.jsx(St,{size:14})},quote_received:{label:"Devis reu",color:"bg-purple-100 text-purple-700",icon:t.jsx(zt,{size:14})},quote_accepted:{label:"Accept",color:"bg-green-100 text-green-700",icon:t.jsx(Sa,{size:14})},in_progress:{label:"En cours",color:"bg-brand-100 text-brand-700",icon:t.jsx(Vl,{size:14})},completed:{label:"Termin",color:"bg-green-100 text-green-700",icon:t.jsx(Oe,{size:14})},pending:{label:"En attente",color:"bg-blue-100 text-blue-700",icon:t.jsx(St,{size:14})},accepted:{label:"Accept",color:"bg-green-100 text-green-700",icon:t.jsx(Sa,{size:14})},expired:{label:"Expir",color:"bg-gray-100 text-gray-500",icon:t.jsx(St,{size:14})},cancelled:{label:"Annul",color:"bg-gray-100 text-gray-500",icon:t.jsx(at,{size:14})}},Zp=()=>{const i=new Date().getHours();return i<12?"Bonjour":i<18?"Bon aprs-midi":"Bonsoir"};function Kp(){var W;const i=bt(),u=Ko(),f=ut(),{profile:d,loading:h}=Vt(),_=E=>!(!E||!["role","full_name","location"].every(he=>E[he]&&E[he].toString().trim().length>0)||E.role==="artisan"&&!E.category_id),[b,z]=o.useState(!1),[p,m]=o.useState("home"),[y,g]=o.useState([]),[v,N]=o.useState([]),[H,ae]=o.useState(!0),[Y,X]=o.useState(null),[se,ie]=o.useState(null),[Z,me]=o.useState(null),[oe,ue]=o.useState(!1),[L,P]=o.useState(!1),[U,F]=o.useState(!0),[Q,T]=o.useState(!1),[S,O]=o.useState("Tous");o.useEffect(()=>{f.loading||h||b||f.user&&d&&!_(d)&&(z(!0),i("/onboard?mode=signup&step=profile",{replace:!0}))},[f.user,f.loading,d,h,i,b]);const{signOut:j}=f;o.useEffect(()=>{if(!d)return;(async()=>{var xe;if(ae(!0),d.role==="artisan"){const{data:te}=await k.from("artisans").select("*, categories(*)").eq("id",d.id).single();if(te){ie(te),X(te.verification_status||"unverified"),me(((xe=te.categories)==null?void 0:xe.name)||null),F(te.is_available!==!1);const{data:we}=await k.from("projects").select("*, categories(*), profiles!projects_client_id_fkey(*)").eq("category_id",te.category_id).in("status",["open","quote_received"]).order("created_at",{ascending:!1}).limit(10);g(we||[])}const{data:he}=await k.from("quotes").select("*, projects(*, categories(*), profiles!projects_client_id_fkey(*))").eq("artisan_id",d.id).order("created_at",{ascending:!1});N(he||[])}else{const{data:te}=await k.from("projects").select("*, categories(*), quotes(*)").eq("client_id",d.id).neq("status","cancelled").order("created_at",{ascending:!1});g(te||[])}ae(!1)})()},[d,u.pathname]);const A=async()=>{await j(),i("/")},B=async()=>{if(!d||Q)return;T(!0);const E=!U,{error:xe}=await k.from("artisans").update({is_available:E,updated_at:new Date().toISOString()}).eq("id",d.id);xe||F(E),T(!1)};if(!d)return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Aa,{type:"header",className:"sticky top-0 z-30"}),t.jsxs("div",{className:"max-w-lg mx-auto px-5 py-6 space-y-4",children:[t.jsx(Aa,{type:"card"}),t.jsx(Aa,{type:"list"})]})]});const K=d.role==="artisan",ge=Y==="verified",de=((W=d.full_name)==null?void 0:W.split(" ")[0])||"Utilisateur",ce=K?v.filter(E=>E.status==="pending"&&!E.is_read).length:y.filter(E=>{var xe;return((xe=E.quotes)==null?void 0:xe.length)>0&&E.status==="open"}).length,re=K?v.filter(E=>["pending","accepted"].includes(E.status)).length:y.filter(E=>["open","in_progress"].includes(E.status)).length,ve=K?v.filter(E=>E.status==="accepted").length:y.filter(E=>E.status==="completed").length;return K?v.slice(0,5):y.slice(0,5),H?t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Aa,{type:"header",className:"sticky top-0 z-30"}),t.jsxs("div",{className:"max-w-lg mx-auto px-5 py-6 space-y-4",children:[t.jsx(Aa,{type:"card"}),t.jsx(Aa,{type:"list"}),t.jsx(Aa,{type:"card"})]})]}):t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsxs("header",{className:"bg-white sticky top-0 z-30 shadow-sm border-b border-gray-100",children:[t.jsxs("div",{className:"max-w-lg mx-auto px-5 py-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{onClick:()=>m("profile"),className:"relative",children:[t.jsx("div",{className:"w-11 h-11 rounded-xl bg-gradient-to-br from-brand-400 to-brand-600 p-0.5 shadow-md",children:t.jsx("div",{className:"w-full h-full rounded-xl bg-white flex items-center justify-center overflow-hidden",children:d.avatar_url?t.jsx("img",{src:d.avatar_url,alt:"",className:"w-full h-full object-cover"}):t.jsx(tt,{size:20,className:"text-brand-500"})})}),K&&ge&&t.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-4 h-4 bg-green-500 rounded-lg flex items-center justify-center border-2 border-white",children:t.jsx(Sa,{size:8,className:"text-white",strokeWidth:3})})]}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-base font-bold text-gray-900",children:[Zp(),", ",de]}),t.jsx("p",{className:"text-xs text-gray-500 font-medium flex items-center gap-1",children:K?t.jsxs(t.Fragment,{children:[t.jsx(wt,{size:10}),Z||"Artisan"]}):t.jsxs(t.Fragment,{children:[t.jsx(Gt,{size:10}),d.location||"Sngal"]})})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Xp,{}),t.jsx("button",{onClick:()=>i("/artisans"),className:"w-10 h-10 rounded-xl bg-gray-100 flex items-center justify-center text-gray-600 hover:bg-brand-100 hover:text-brand-600 transition-all","aria-label":"Explorer",title:"Explorer les projets/artisans",children:t.jsx(It,{size:18})}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>ue(!oe),className:"w-10 h-10 rounded-xl bg-gray-100 flex items-center justify-center text-gray-600 hover:bg-gray-200 transition-all","aria-label":"Options",children:oe?t.jsx(at,{size:18}):t.jsx(Io,{size:18})}),oe&&t.jsxs("div",{className:"absolute right-0 top-12 w-48 bg-white rounded-xl shadow-xl border border-gray-100 py-2 z-50 animate-in fade-in slide-in-from-top-2 duration-200",children:[t.jsxs("button",{onClick:()=>{i("/edit-profile"),ue(!1)},className:"w-full px-4 py-2.5 flex items-center gap-3 text-left hover:bg-gray-50 transition-colors text-sm",children:[t.jsx(tt,{size:16,className:"text-gray-400"}),t.jsx("span",{className:"font-medium text-gray-700",children:"Mon profil"})]}),K&&t.jsxs("button",{onClick:()=>{i("/edit-profile?tab=portfolio"),ue(!1)},className:"w-full px-4 py-2.5 flex items-center gap-3 text-left hover:bg-gray-50 transition-colors text-sm",children:[t.jsx(Ss,{size:16,className:"text-gray-400"}),t.jsx("span",{className:"font-medium text-gray-700",children:"Portfolio"})]}),t.jsx("div",{className:"h-px bg-gray-100 my-1"}),t.jsxs("button",{onClick:()=>{A(),ue(!1)},className:"w-full px-4 py-2.5 flex items-center gap-3 text-left hover:bg-red-50 transition-colors text-sm",children:[t.jsx(k0,{size:16,className:"text-red-500"}),t.jsx("span",{className:"font-medium text-red-500",children:"Dconnexion"})]})]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[!K&&t.jsxs("button",{onClick:()=>i("/create-project"),className:"flex items-center gap-2 px-4 py-2 bg-brand-500 text-white rounded-xl font-bold text-xs hover:bg-brand-600 transition-colors whitespace-nowrap flex-shrink-0 shadow-sm",children:[t.jsx(xi,{size:16}),"Nouveau projet"]}),K&&Y==="unverified"&&t.jsxs("button",{onClick:()=>i("/verification"),className:"flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-xl font-bold text-xs hover:bg-blue-100 transition-colors whitespace-nowrap flex-shrink-0 border border-blue-200",children:[t.jsx(At,{size:16}),"Se vrifier"]}),K&&t.jsxs("button",{onClick:()=>i("/edit-profile?tab=portfolio"),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-xl font-bold text-xs hover:bg-gray-200 transition-colors whitespace-nowrap flex-shrink-0",children:[t.jsx(Ss,{size:16}),"Portfolio"]}),t.jsxs("button",{onClick:()=>i("/artisans"),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-xl font-bold text-xs hover:bg-gray-200 transition-colors whitespace-nowrap flex-shrink-0",children:[t.jsx(It,{size:16}),"Explorer"]}),t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>P(!L),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-xl font-bold text-xs hover:bg-gray-200 transition-colors whitespace-nowrap flex-shrink-0",children:[t.jsx(Jo,{size:16}),"Plus"]}),L&&t.jsxs("div",{className:"absolute right-0 top-12 w-48 bg-white rounded-xl shadow-xl border border-gray-100 py-2 z-50 animate-in fade-in slide-in-from-top-2 duration-200",children:[t.jsxs("button",{onClick:()=>{i("/favorites"),P(!1)},className:"w-full px-4 py-2.5 flex items-center gap-3 text-left hover:bg-gray-50 transition-colors text-sm",children:[t.jsx(Hl,{size:16,className:"text-gray-400"}),t.jsx("span",{className:"font-medium text-gray-700",children:"Favoris"})]}),t.jsxs("button",{onClick:()=>{i("/expenses"),P(!1)},className:"w-full px-4 py-2.5 flex items-center gap-3 text-left hover:bg-gray-50 transition-colors text-sm",children:[t.jsx(E0,{size:16,className:"text-gray-400"}),t.jsx("span",{className:"font-medium text-gray-700",children:"Dpenses"})]}),t.jsxs("button",{onClick:()=>{i("/invoices"),P(!1)},className:"w-full px-4 py-2.5 flex items-center gap-3 text-left hover:bg-gray-50 transition-colors text-sm",children:[t.jsx(zt,{size:16,className:"text-gray-400"}),t.jsx("span",{className:"font-medium text-gray-700",children:"Factures"})]})]})]})]})]}),(oe||L)&&t.jsx("div",{className:"fixed inset-0 z-20",onClick:()=>{ue(!1),P(!1)}})]}),t.jsxs("main",{className:"max-w-lg mx-auto px-5 py-6 pb-32",children:[p==="home"&&t.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[ce>0&&t.jsxs("button",{onClick:()=>m("activity"),className:"w-full bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-2xl p-4 flex items-center gap-4 hover:shadow-md transition-all active:scale-[0.98]",children:[t.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center flex-shrink-0",children:t.jsx(Ta,{size:24,className:"text-yellow-600"})}),t.jsxs("div",{className:"flex-1 text-left",children:[t.jsxs("p",{className:"font-bold text-gray-900",children:[ce," action",ce>1?"s":""," en attente"]}),t.jsx("p",{className:"text-sm text-gray-500",children:"Devis  consulter"})]}),t.jsx(Zs,{size:20,className:"text-gray-400"})]}),K&&Y==="unverified"&&t.jsxs("button",{onClick:()=>i("/verification"),className:"w-full bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-2xl p-4 flex items-center gap-4 hover:shadow-md transition-all active:scale-[0.98]",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center flex-shrink-0",children:t.jsx(At,{size:24,className:"text-blue-600"})}),t.jsxs("div",{className:"flex-1 text-left",children:[t.jsx("p",{className:"font-bold text-gray-900",children:"Faites-vous certifier"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Gagnez en confiance et avantages"})]}),t.jsx(Zs,{size:20,className:"text-gray-400"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-gray-100 shadow-sm",children:[t.jsx("div",{className:"flex items-center gap-3 mb-3",children:t.jsx("div",{className:"w-10 h-10 bg-brand-100 rounded-xl flex items-center justify-center",children:K?t.jsx(Bl,{size:18,className:"text-brand-600"}):t.jsx(wt,{size:18,className:"text-brand-600"})})}),t.jsx("p",{className:"text-3xl font-black text-gray-900",children:re}),t.jsx("p",{className:"text-sm font-medium text-gray-500",children:K?"Devis actifs":"Projets en cours"})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-gray-100 shadow-sm",children:[t.jsx("div",{className:"flex items-center gap-3 mb-3",children:t.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:t.jsx(Oe,{size:18,className:"text-green-600"})})}),t.jsx("p",{className:"text-3xl font-black text-gray-900",children:ve}),t.jsx("p",{className:"text-sm font-medium text-gray-500",children:K?"Accepts":"Termins"})]})]}),K?t.jsxs("section",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Projets disponibles"}),t.jsxs("button",{onClick:()=>i("/artisans"),className:"text-sm text-brand-500 font-bold flex items-center gap-1",children:["Voir plus",t.jsx(Ys,{size:14})]})]}),H?t.jsx("div",{className:"bg-white rounded-2xl p-10 text-center border border-gray-100",children:t.jsx("div",{className:"w-10 h-10 border-3 border-brand-500 border-t-transparent rounded-full animate-spin mx-auto"})}):y.length===0?t.jsxs("div",{className:"bg-white rounded-2xl p-10 text-center border border-gray-100",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:t.jsx(wt,{size:28,className:"text-gray-300"})}),t.jsx("p",{className:"text-gray-500 font-medium",children:"Aucun projet pour l'instant"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Revenez bientt !"})]}):t.jsx("div",{className:"space-y-3",children:y.slice(0,3).map(E=>{var xe;return t.jsxs("button",{onClick:()=>{window.scrollTo({top:0,left:0,behavior:"instant"}),document.documentElement.scrollTop=0,document.body.scrollTop=0,i(`/projects/${E.id}`)},className:"w-full bg-white rounded-2xl p-4 border border-gray-100 text-left hover:border-brand-200 hover:shadow-md transition-all active:scale-[0.99]",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsx("span",{className:"px-3 py-1 bg-brand-50 text-brand-700 text-xs font-bold rounded-lg",children:(xe=E.categories)==null?void 0:xe.name}),t.jsx("span",{className:"text-xs text-gray-400 font-medium",children:new Date(E.created_at).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})})]}),t.jsx("h3",{className:"font-bold text-gray-900 mb-2 line-clamp-1",children:E.title}),t.jsx("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Gt,{size:14}),E.location||"Sngal"]})})]},E.id)})})]}):t.jsxs("section",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Mes projets"}),y.length>0&&t.jsxs("button",{onClick:()=>m("activity"),className:"text-sm text-brand-500 font-bold flex items-center gap-1",children:["Tout voir",t.jsx(Ys,{size:14})]})]}),H?t.jsx("div",{className:"bg-white rounded-2xl p-10 text-center border border-gray-100",children:t.jsx("div",{className:"w-10 h-10 border-3 border-brand-500 border-t-transparent rounded-full animate-spin mx-auto"})}):y.length===0?t.jsxs("div",{className:"bg-white rounded-2xl p-10 text-center border border-gray-100",children:[t.jsx("div",{className:"w-16 h-16 bg-brand-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:t.jsx(ed,{size:28,className:"text-brand-500"})}),t.jsx("p",{className:"text-gray-900 font-bold mb-1",children:"Crez votre premier projet"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Trouvez l'artisan parfait"})]}):t.jsx("div",{className:"space-y-3",children:y.slice(0,3).map(E=>{var he,we;const xe=Ol[E.status]||Ol.open,te=((he=E.quotes)==null?void 0:he.length)>0;return t.jsxs("button",{onClick:()=>{window.scrollTo({top:0,left:0,behavior:"instant"}),document.documentElement.scrollTop=0,document.body.scrollTop=0,i(`/projects/${E.id}`)},className:"w-full bg-white rounded-2xl p-4 border border-gray-100 text-left hover:border-brand-200 hover:shadow-md transition-all active:scale-[0.99]",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsx("span",{className:"px-3 py-1 bg-brand-50 text-brand-700 text-xs font-bold rounded-lg",children:(we=E.categories)==null?void 0:we.name}),t.jsxs("span",{className:`px-2 py-1 rounded-lg text-xs font-bold flex items-center gap-1 ${xe.color}`,children:[xe.icon,xe.label]})]}),t.jsx("h3",{className:"font-bold text-gray-900 mb-2 line-clamp-1",children:E.title}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("span",{className:"text-gray-500 flex items-center gap-1",children:[t.jsx(Ql,{size:14}),new Date(E.created_at).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]}),te&&t.jsxs("span",{className:"text-purple-600 font-bold flex items-center gap-1",children:[t.jsx(zt,{size:14}),E.quotes.length," devis"]})]})]},E.id)})})]})]}),p==="activity"&&t.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:K?"Mes devis":"Mes projets"}),K&&v.length>0&&t.jsx("div",{className:"flex gap-2",children:["Tous","En attente","Accepts","Refuss","Expirs"].map(E=>t.jsx("button",{className:"px-3 py-1 text-xs font-bold rounded-lg bg-gray-100 text-gray-600 hover:bg-brand-100 hover:text-brand-600 transition-colors",onClick:()=>{},children:E},E))})]}),K?v.length===0?t.jsxs("div",{className:"bg-white rounded-2xl p-12 text-center border border-gray-100",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:t.jsx(Bl,{size:28,className:"text-gray-300"})}),t.jsx("p",{className:"text-gray-500 font-medium",children:"Aucun devis envoy"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Consultez les projets disponibles"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 mb-4",children:[{key:"Tous",label:"Tous"},{key:"pending",label:"En attente"},{key:"accepted",label:"Accepts"},{key:"rejected",label:"Refuss"},{key:"expired",label:"Expirs"}].map(E=>t.jsxs("button",{onClick:()=>O(E.key),className:`px-4 py-2 text-xs font-bold rounded-xl whitespace-nowrap transition-all ${S===E.key?"bg-brand-500 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[E.label,E.key!=="Tous"&&t.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-white/20 rounded-full",children:v.filter(xe=>xe.status===E.key).length})]},E.key))}),t.jsxs("div",{className:"space-y-3",children:[v.filter(E=>S==="Tous"||E.status===S).map(E=>{var te,he;const xe=Ol[E.status]||Ol.pending;return t.jsxs("button",{onClick:()=>{window.scrollTo({top:0,left:0,behavior:"instant"}),document.documentElement.scrollTop=0,document.body.scrollTop=0,i(`/projects/${E.project_id}`)},className:"w-full bg-white rounded-2xl p-4 border border-gray-100 text-left hover:border-brand-200 hover:shadow-md transition-all active:scale-[0.99]",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsx("span",{className:"text-xs text-gray-400 font-mono bg-gray-50 px-2 py-1 rounded",children:E.quote_number}),t.jsxs("span",{className:`px-2 py-1 rounded-lg text-xs font-bold flex items-center gap-1 ${xe.color}`,children:[xe.icon,xe.label]})]}),t.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:(te=E.projects)==null?void 0:te.title}),E.status==="rejected"&&E.rejection_reason&&t.jsxs("div",{className:"mb-2 flex items-start gap-2 bg-red-50 border border-red-200 rounded-lg p-2",children:[t.jsx("span",{className:"text-xs font-bold text-red-700",children:" Refus"}),t.jsxs("span",{className:"text-xs text-red-700 line-clamp-2 flex-1",children:[": ",E.rejection_reason]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-lg font-black text-brand-600",children:[(he=E.amount)==null?void 0:he.toLocaleString("fr-FR")," FCFA"]}),t.jsx("span",{className:"text-xs text-gray-400",children:new Date(E.created_at).toLocaleDateString("fr-FR")})]})]},E.id)}),v.filter(E=>S==="Tous"||E.status===S).length===0&&t.jsx("div",{className:"bg-white rounded-2xl p-8 text-center border border-gray-100",children:t.jsx("p",{className:"text-gray-400 text-sm",children:"Aucun devis pour ce filtre"})})]})]}):y.length===0?t.jsxs("div",{className:"bg-white rounded-2xl p-12 text-center border border-gray-100",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:t.jsx(wt,{size:28,className:"text-gray-300"})}),t.jsx("p",{className:"text-gray-500 font-medium",children:"Aucun projet"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Crez votre premier projet"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 mb-4",children:[{key:"Tous",label:"Tous"},{key:"open",label:"Ouverts"},{key:"in_progress",label:"En cours"},{key:"completed",label:"Termins"},{key:"expired",label:"Expirs"},{key:"cancelled",label:"Annuls"}].map(E=>t.jsxs("button",{onClick:()=>O(E.key),className:`px-4 py-2 text-xs font-bold rounded-xl whitespace-nowrap transition-all ${S===E.key?"bg-brand-500 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[E.label,E.key!=="Tous"&&t.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-white/20 rounded-full",children:y.filter(xe=>xe.status===E.key).length})]},E.key))}),t.jsxs("div",{className:"space-y-3",children:[y.filter(E=>S==="Tous"||E.status===S).map(E=>{var te;const xe=Ol[E.status]||Ol.open;return t.jsxs("button",{onClick:()=>{window.scrollTo({top:0,left:0,behavior:"instant"}),document.documentElement.scrollTop=0,document.body.scrollTop=0,i(`/projects/${E.id}`)},className:"w-full bg-white rounded-2xl p-4 border border-gray-100 text-left hover:border-brand-200 hover:shadow-md transition-all active:scale-[0.99]",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsx("span",{className:"text-xs text-gray-400 font-mono bg-gray-50 px-2 py-1 rounded",children:E.project_number}),t.jsxs("span",{className:`px-2 py-1 rounded-lg text-xs font-bold flex items-center gap-1 ${xe.color}`,children:[xe.icon,xe.label]})]}),t.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:E.title}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-sm text-gray-500 flex items-center gap-1",children:[t.jsx(Gt,{size:14}),E.location||"Sngal"]}),((te=E.quotes)==null?void 0:te.length)>0&&t.jsxs("span",{className:"text-sm text-purple-600 font-bold",children:[E.quotes.length," devis"]})]})]},E.id)}),y.filter(E=>S==="Tous"||E.status===S).length===0&&t.jsx("div",{className:"bg-white rounded-2xl p-8 text-center border border-gray-100",children:t.jsx("p",{className:"text-gray-400 text-sm",children:"Aucun projet pour ce filtre"})})]})]})]}),p==="profile"&&t.jsx("div",{className:"space-y-6 animate-in fade-in duration-300",children:t.jsxs("div",{className:"bg-white rounded-3xl p-6 border border-gray-100 shadow-sm text-center",children:[t.jsxs("div",{className:"relative inline-block mb-4",children:[t.jsx("div",{className:"w-24 h-24 rounded-3xl bg-gradient-to-br from-brand-400 to-brand-600 p-1 shadow-lg shadow-brand-200/50",children:t.jsx("div",{className:"w-full h-full rounded-3xl bg-white flex items-center justify-center overflow-hidden",children:d.avatar_url?t.jsx("img",{src:d.avatar_url,alt:"",className:"w-full h-full object-cover"}):t.jsx(tt,{size:40,className:"text-brand-500"})})}),K&&ge&&t.jsx("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-green-500 rounded-xl flex items-center justify-center border-3 border-white shadow-lg",children:t.jsx(Sa,{size:16,className:"text-white",strokeWidth:3})})]}),t.jsx("h2",{className:"text-xl font-black text-gray-900 mb-1",children:d.full_name}),t.jsx("p",{className:"text-brand-600 font-bold mb-1",children:K?Z||"Artisan":"Client"}),t.jsxs("p",{className:"text-sm text-gray-400 flex items-center justify-center gap-1",children:[t.jsx(Gt,{size:14}),d.location||"Sngal"]}),d.member_id&&t.jsx("div",{className:"mt-4 inline-block px-4 py-2 bg-gray-100 rounded-xl",children:t.jsx("span",{className:"text-xs font-mono text-gray-500",children:d.member_id})}),K&&t.jsx("div",{className:"mt-6 space-y-4",children:t.jsxs("button",{onClick:B,disabled:Q,className:`w-full flex items-center justify-between px-5 py-4 rounded-xl transition-all ${U?"bg-green-50 border-2 border-green-200":"bg-gray-100 border-2 border-gray-200"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[Q?t.jsx(ca,{size:20,className:"animate-spin text-gray-500"}):U?t.jsx(Jh,{size:28,className:"text-green-500"}):t.jsx($h,{size:28,className:"text-gray-400"}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:`font-bold text-sm ${U?"text-green-700":"text-gray-600"}`,children:U?"Disponible":"Indisponible"}),t.jsx("p",{className:"text-xs text-gray-500",children:U?"Vous recevez les demandes":"Vous ne recevez pas de demandes"})]})]}),t.jsx("div",{className:`w-3 h-3 rounded-full ${U?"bg-green-500 animate-pulse":"bg-gray-300"}`})]})})]})})]}),!K&&p!=="profile"&&t.jsx("button",{onClick:()=>i("/create-project"),className:"fixed bottom-24 right-5 w-16 h-16 bg-brand-500 rounded-2xl shadow-2xl shadow-brand-500/40 flex items-center justify-center text-white hover:bg-brand-600 active:scale-95 transition-all z-20","aria-label":"Nouveau projet",children:t.jsx(C0,{size:28,strokeWidth:2.5})}),t.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-gray-200 z-30 safe-area-pb shadow-[0_-2px_10px_rgba(0,0,0,0.05)]",children:t.jsx("div",{className:"max-w-lg mx-auto px-4 py-2.5 flex items-center justify-around",children:[{id:"home",icon:Po,label:"Accueil"},{id:"activity",icon:K?Bl:wt,label:K?"Devis":"Projets",badge:ce},{id:"profile",icon:tt,label:"Profil"}].map(E=>{const xe=E.icon,te=p===E.id;return t.jsxs("button",{onClick:()=>m(E.id),className:`relative flex flex-col items-center justify-center gap-1 py-2.5 px-4 min-w-[70px] rounded-xl transition-all duration-200 ${te?"text-brand-600":"text-gray-400 hover:text-gray-600"}`,"aria-label":E.label,"aria-current":te?"page":void 0,children:[te&&t.jsx("div",{className:"absolute inset-0 bg-brand-50 rounded-xl -z-10 animate-in fade-in duration-200"}),t.jsxs("div",{className:`relative ${te?"scale-110":"scale-100"} transition-transform duration-200`,children:[t.jsx(xe,{size:22,strokeWidth:te?2.5:2,className:te?"text-brand-600":"text-gray-400"}),E.badge&&E.badge>0&&t.jsx("span",{className:`absolute -top-1.5 -right-1.5 min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full text-[10px] font-black text-white ${te?"bg-brand-500":"bg-red-500"} animate-pulse`,children:E.badge>9?"9+":E.badge})]}),t.jsx("span",{className:`text-[11px] font-bold transition-all duration-200 ${te?"text-brand-600 scale-105":"text-gray-400 scale-100"}`,children:E.label}),te&&t.jsx("div",{className:"absolute -bottom-0.5 left-1/2 transform -translate-x-1/2 w-8 h-1 bg-brand-500 rounded-full"})]},E.id)})})})]})}function $p(){const i=bt(),{user:u}=ut(),{profile:f}=Vt(),[d,h]=o.useState("intro"),[_,b]=o.useState(!1),[z,p]=o.useState(null),[m,y]=o.useState(null),[g,v]=o.useState(null),[N,H]=o.useState("cni"),[ae,Y]=o.useState(null),[X,se]=o.useState(""),[ie,Z]=o.useState(null),[me,oe]=o.useState(""),ue=async(Q,T)=>{try{const S=Q.name.split(".").pop(),O=`${u==null?void 0:u.id}/${T}/${Date.now()}.${S}`,{error:j}=await k.storage.from("photos").upload(O,Q);if(j)throw j;const{data:A}=k.storage.from("photos").getPublicUrl(O);return(A==null?void 0:A.publicUrl)||null}catch(S){return console.error("Upload error:",S),null}},L=async(Q,T,S)=>{var A;const O=(A=Q.target.files)==null?void 0:A[0];if(!O)return;b(!0);const j=await ue(O,S);T(j),b(!1)},P=async()=>{b(!0),p(null);try{const{error:Q}=await k.from("verification_documents").upsert({artisan_id:u==null?void 0:u.id,selfie_url:m,id_card_url:g,id_card_type:N,ninea_url:ae,ninea_number:X||null,registre_commerce_url:ie,registre_commerce_number:me||null,status:"pending"});if(Q)throw Q;const{error:T}=await k.from("artisans").update({verification_status:"pending"}).eq("id",u==null?void 0:u.id);if(T)throw T;h("review")}catch(Q){p(Q.message||"Erreur lors de la soumission")}b(!1)},U=[{id:"intro",title:"Introduction"},{id:"selfie",title:"Photo"},{id:"id",title:"Identit"},{id:"business",title:"Documents"}],F=U.findIndex(Q=>Q.id===d);return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsxs("header",{className:"bg-white border-b border-gray-100 sticky top-0 z-10",children:[t.jsxs("div",{className:"max-w-lg mx-auto px-4 py-4 flex items-center gap-4",children:[t.jsx("button",{onClick:()=>{var Q;return d==="intro"||d==="review"?i("/dashboard"):h((Q=U[F-1])==null?void 0:Q.id)},className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-600",children:t.jsx(Mt,{size:20})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"font-bold text-gray-900",children:"Vrification du compte"}),d!=="review"&&d!=="intro"&&t.jsxs("p",{className:"text-xs text-gray-400",children:["tape ",F," sur ",U.length-1]})]})]}),d!=="intro"&&d!=="review"&&t.jsx("div",{className:"h-1 bg-gray-100",children:t.jsx("div",{className:"h-full bg-brand-500 transition-all duration-300",style:{width:`${F/(U.length-1)*100}%`}})})]}),t.jsxs("main",{className:"max-w-lg mx-auto px-4 py-8",children:[d==="intro"&&t.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-20 h-20 bg-brand-100 rounded-full mx-auto mb-6 flex items-center justify-center",children:t.jsx(At,{size:40,className:"text-brand-500"})}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Devenez certifi"}),t.jsx("p",{className:"text-gray-500",children:"Gagnez en confiance et accdez  plus d'avantages"})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 space-y-4",children:[t.jsx("h3",{className:"font-bold text-gray-900",children:"Avantages de la certification"}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(Oe,{size:20,className:"text-green-500 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900 text-sm",children:"Badge vrifi"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Inspirez confiance aux clients"})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(Oe,{size:20,className:"text-green-500 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900 text-sm",children:"Avances sur paiement"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Recevez jusqu' 40% d'avance"})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(Oe,{size:20,className:"text-green-500 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900 text-sm",children:"Crdit fournisseur"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Accdez aux matriaux  crdit"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-100",children:[t.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Documents requis"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[t.jsx(bi,{size:18,className:"text-gray-400"}),t.jsx("span",{className:"text-gray-600",children:"Photo de vous (selfie)"})]}),t.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[t.jsx(Wa,{size:18,className:"text-gray-400"}),t.jsx("span",{className:"text-gray-600",children:"Pice d'identit (CNI, Passeport)"})]}),t.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[t.jsx(zt,{size:18,className:"text-gray-400"}),t.jsx("span",{className:"text-gray-600",children:"NINEA (optionnel)"})]}),t.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[t.jsx(Bn,{size:18,className:"text-gray-400"}),t.jsx("span",{className:"text-gray-600",children:"Registre de commerce (optionnel)"})]})]})]}),t.jsx("button",{onClick:()=>h("selfie"),className:"w-full bg-brand-500 text-white rounded-2xl py-4 font-bold hover:bg-brand-600 transition-colors",children:"Commencer la vrification"})]}),d==="selfie"&&t.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Votre photo"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"Prenez une photo claire de votre visage"})]}),t.jsxs("div",{className:"relative",children:[m?t.jsx("div",{className:"aspect-square rounded-2xl overflow-hidden bg-gray-100",children:t.jsx("img",{src:m,alt:"Selfie",className:"w-full h-full object-cover"})}):t.jsxs("label",{className:"aspect-square rounded-2xl border-2 border-dashed border-gray-200 bg-white flex flex-col items-center justify-center cursor-pointer hover:border-brand-300 hover:bg-brand-50/50 transition-all",children:[t.jsx("input",{type:"file",accept:"image/*",capture:"user",onChange:Q=>L(Q,y,"verification/selfie"),className:"hidden"}),_?t.jsx(ca,{size:40,className:"text-brand-500 animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:t.jsx(tt,{size:40,className:"text-gray-400"})}),t.jsx("p",{className:"font-bold text-gray-700",children:"Prendre une photo"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"ou choisir un fichier"})]})]}),m&&t.jsx("button",{onClick:()=>y(null),className:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center",children:""})]}),t.jsx("button",{onClick:()=>h("id"),disabled:!m,className:"w-full bg-brand-500 text-white rounded-2xl py-4 font-bold hover:bg-brand-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Continuer"})]}),d==="id"&&t.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Pice d'identit"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"Photo recto de votre document"})]}),t.jsx("div",{className:"flex gap-2",children:[{value:"cni",label:"CNI"},{value:"passport",label:"Passeport"},{value:"permis",label:"Permis"}].map(Q=>t.jsx("button",{onClick:()=>H(Q.value),className:`flex-1 py-3 rounded-xl font-bold text-sm transition-all ${N===Q.value?"bg-brand-500 text-white":"bg-white border border-gray-200 text-gray-600"}`,children:Q.label},Q.value))}),t.jsxs("div",{className:"relative",children:[g?t.jsx("div",{className:"aspect-video rounded-2xl overflow-hidden bg-gray-100",children:t.jsx("img",{src:g,alt:"ID Card",className:"w-full h-full object-cover"})}):t.jsxs("label",{className:"aspect-video rounded-2xl border-2 border-dashed border-gray-200 bg-white flex flex-col items-center justify-center cursor-pointer hover:border-brand-300 hover:bg-brand-50/50 transition-all",children:[t.jsx("input",{type:"file",accept:"image/*",onChange:Q=>L(Q,v,"verification/id"),className:"hidden"}),_?t.jsx(ca,{size:40,className:"text-brand-500 animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx(Wa,{size:40,className:"text-gray-400 mb-3"}),t.jsx("p",{className:"font-bold text-gray-700",children:"Ajouter le document"})]})]}),g&&t.jsx("button",{onClick:()=>v(null),className:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center",children:""})]}),t.jsx("button",{onClick:()=>h("business"),disabled:!g,className:"w-full bg-brand-500 text-white rounded-2xl py-4 font-bold hover:bg-brand-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Continuer"})]}),d==="business"&&t.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Documents professionnels"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"Optionnel mais recommand"})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-gray-100 space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(zt,{size:20,className:"text-gray-400"}),t.jsx("span",{className:"font-bold text-gray-900",children:"NINEA"})]}),t.jsx("input",{type:"text",value:X,onChange:Q=>se(Q.target.value),placeholder:"Numro NINEA",className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-brand-500 focus:outline-none"}),ae?t.jsxs("div",{className:"relative aspect-video rounded-xl overflow-hidden bg-gray-100",children:[t.jsx("img",{src:ae,alt:"NINEA",className:"w-full h-full object-cover"}),t.jsx("button",{onClick:()=>Y(null),className:"absolute top-2 right-2 w-6 h-6 bg-red-500 text-white rounded-full text-xs",children:""})]}):t.jsxs("label",{className:"block rounded-xl border border-dashed border-gray-200 p-4 text-center cursor-pointer hover:border-brand-300 transition-colors",children:[t.jsx("input",{type:"file",accept:"image/*",onChange:Q=>L(Q,Y,"verification/ninea"),className:"hidden"}),t.jsx(Fl,{size:20,className:"mx-auto text-gray-400 mb-1"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Ajouter le document"})]})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-gray-100 space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Bn,{size:20,className:"text-gray-400"}),t.jsx("span",{className:"font-bold text-gray-900",children:"Registre de Commerce"})]}),t.jsx("input",{type:"text",value:me,onChange:Q=>oe(Q.target.value),placeholder:"Numro RC",className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-brand-500 focus:outline-none"}),ie?t.jsxs("div",{className:"relative aspect-video rounded-xl overflow-hidden bg-gray-100",children:[t.jsx("img",{src:ie,alt:"RC",className:"w-full h-full object-cover"}),t.jsx("button",{onClick:()=>Z(null),className:"absolute top-2 right-2 w-6 h-6 bg-red-500 text-white rounded-full text-xs",children:""})]}):t.jsxs("label",{className:"block rounded-xl border border-dashed border-gray-200 p-4 text-center cursor-pointer hover:border-brand-300 transition-colors",children:[t.jsx("input",{type:"file",accept:"image/*",onChange:Q=>L(Q,Z,"verification/rc"),className:"hidden"}),t.jsx(Fl,{size:20,className:"mx-auto text-gray-400 mb-1"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Ajouter le document"})]})]}),z&&t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-start gap-3",children:[t.jsx(Ta,{size:20,className:"text-red-500 flex-shrink-0"}),t.jsx("p",{className:"text-sm text-red-600",children:z})]}),t.jsx("button",{onClick:P,disabled:_,className:"w-full bg-brand-500 text-white rounded-2xl py-4 font-bold hover:bg-brand-600 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:_?t.jsx(ca,{size:20,className:"animate-spin"}):"Soumettre la vrification"})]}),d==="review"&&t.jsxs("div",{className:"space-y-6 animate-in fade-in zoom-in duration-500 text-center",children:[t.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full mx-auto flex items-center justify-center",children:t.jsx(Oe,{size:48,className:"text-green-500"})}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Demande envoye !"}),t.jsx("p",{className:"text-gray-500",children:"Nous examinons vos documents. Vous recevrez une notification une fois la vrification termine."}),t.jsx("div",{className:"bg-blue-50 rounded-2xl p-4",children:t.jsx("p",{className:"text-sm text-blue-600",children:"Dlai estim : 24-48 heures"})}),t.jsx("button",{onClick:()=>i("/dashboard"),className:"w-full bg-gray-900 text-white rounded-2xl py-4 font-bold hover:bg-gray-800 transition-colors",children:"Retour  l'accueil"})]})]})]})}const ri=10,ii=5,Fo=5,Qo=50,Jp=["Dakar","This","Diourbel","Fatick","Kaolack","Kaffrine","Kolda","Ziguinchor","Sdhiou","Saint-Louis","Louga","Matam","Tambacounda","Kdougou"];function Pp(){const i=bt(),[u]=Fn(),{user:f}=ut(),{profile:d}=Vt(),{categories:h}=Zn(),{error:_}=Da(),[b,z]=o.useState(!1),[p,m]=o.useState(!1),[y,g]=o.useState(!1),[v,N]=o.useState(!1),[H,ae]=o.useState(!1),[Y,X]=o.useState(u.get("tab")==="portfolio"?"portfolio":"info"),[se,ie]=o.useState(""),[Z,me]=o.useState(""),[oe,ue]=o.useState(""),[L,P]=o.useState(null),[U,F]=o.useState(null),[Q,T]=o.useState(""),[S,O]=o.useState(""),[j,A]=o.useState([]),[B,K]=o.useState([]);o.useEffect(()=>{d&&(ie(d.full_name||""),me(d.phone||""),ue(d.location||""),P(d.avatar_url),d.role==="artisan"&&ge())},[d]);const ge=async()=>{if(!f)return;const{data:te}=await k.from("artisans").select("*").eq("id",f.id).single();te&&(F(te.category_id),T(te.specialty||""),O(te.bio||""),A(te.portfolio_urls||[]),K(te.video_urls||[]))},de=async te=>{const he=te.target.files;if(!(!he||!f)){if(j.length+he.length>ri){_(`Maximum ${ri} photos autorises`);return}g(!0);try{const we=[];for(const _e of Array.from(he)){if(_e.size>Fo*1024*1024){_(`Photo trop volumineuse (max ${Fo}MB)`);continue}if(!_e.type.startsWith("image/"))continue;const Se=_e.name.split(".").pop(),Ze=`${f.id}/portfolio/${Date.now()}-${Math.random().toString(36).substr(2,9)}.${Se}`,{error:Ce}=await k.storage.from("photos").upload(Ze,_e);if(Ce)continue;const{data:He}=k.storage.from("photos").getPublicUrl(Ze);He!=null&&He.publicUrl&&we.push(He.publicUrl)}if(we.length>0){const _e=[...j,...we];A(_e),await k.from("artisans").update({portfolio_urls:_e}).eq("id",f.id)}}catch(we){console.error("Portfolio upload error:",we)}g(!1),te.target.value=""}},ce=async te=>{if(!f)return;const he=j.filter((we,_e)=>_e!==te);A(he),await k.from("artisans").update({portfolio_urls:he}).eq("id",f.id)},re=async te=>{const he=te.target.files;if(!(!he||!f)){if(B.length+he.length>ii){_(`Maximum ${ii} vidos autorises`);return}N(!0);try{const we=[];for(const _e of Array.from(he)){if(_e.size>Qo*1024*1024){_(`Vido trop volumineuse (max ${Qo}MB)`);continue}if(!_e.type.startsWith("video/"))continue;const Se=_e.name.split(".").pop(),Ze=`${f.id}/videos/${Date.now()}-${Math.random().toString(36).substr(2,9)}.${Se}`,{error:Ce}=await k.storage.from("photos").upload(Ze,_e);if(Ce)continue;const{data:He}=k.storage.from("photos").getPublicUrl(Ze);He!=null&&He.publicUrl&&we.push(He.publicUrl)}if(we.length>0){const _e=[...B,...we];K(_e),await k.from("artisans").update({video_urls:_e}).eq("id",f.id)}}catch(we){console.error("Video upload error:",we)}N(!1),te.target.value=""}},ve=async te=>{if(!f)return;const he=B.filter((we,_e)=>_e!==te);K(he),await k.from("artisans").update({video_urls:he}).eq("id",f.id)},W=async te=>{var we;const he=(we=te.target.files)==null?void 0:we[0];if(!(!he||!f)){m(!0);try{const _e=he.name.split(".").pop(),Se=`${f.id}/avatar/${Date.now()}.${_e}`,{error:Ze}=await k.storage.from("photos").upload(Se,he);if(Ze)throw Ze;const{data:Ce}=k.storage.from("photos").getPublicUrl(Se);Ce!=null&&Ce.publicUrl&&(P(Ce.publicUrl),await k.from("profiles").update({avatar_url:Ce.publicUrl}).eq("id",f.id))}catch(_e){console.error("Photo upload error:",_e)}m(!1)}},E=async te=>{if(te.preventDefault(),!!f){z(!0);try{const{error:he}=await k.from("profiles").update({full_name:se,phone:Z||null,location:oe||null,avatar_url:L,updated_at:new Date().toISOString()}).eq("id",f.id);if(he)throw he;if((d==null?void 0:d.role)==="artisan"){const{error:we}=await k.from("artisans").update({category_id:U,specialty:Q||null,bio:S||null,location:oe||null,updated_at:new Date().toISOString()}).eq("id",f.id);if(we)throw we}ae(!0),setTimeout(()=>i("/dashboard"),1500)}catch(he){console.error("Save error:",he)}z(!1)}},xe=(d==null?void 0:d.role)==="artisan";return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("header",{className:"bg-white border-b border-gray-100 sticky top-0 z-10",children:t.jsxs("div",{className:"max-w-lg mx-auto px-4 py-4 flex items-center gap-4",children:[t.jsx("button",{onClick:()=>i("/dashboard"),className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-600",children:t.jsx(Mt,{size:20})}),t.jsx("h1",{className:"font-bold text-gray-900 flex-1",children:"Modifier mon profil"}),H&&t.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center animate-in zoom-in",children:t.jsx(Sa,{size:16,className:"text-white"})})]})}),t.jsxs("main",{className:"max-w-lg mx-auto px-4 py-6 pb-8",children:[xe&&t.jsxs("div",{className:"flex bg-gray-100 rounded-xl p-1 mb-6",children:[t.jsx("button",{type:"button",onClick:()=>X("info"),className:`flex-1 py-2.5 rounded-lg font-bold text-sm transition-all ${Y==="info"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Informations"}),t.jsx("button",{type:"button",onClick:()=>X("portfolio"),className:`flex-1 py-2.5 rounded-lg font-bold text-sm transition-all ${Y==="portfolio"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Portfolio"})]}),xe&&Y==="portfolio"&&t.jsxs("div",{className:"space-y-8 animate-in fade-in duration-300",children:[t.jsxs("section",{children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("h3",{className:"font-bold text-gray-900 flex items-center gap-2",children:[t.jsx(Ss,{size:18,className:"text-brand-500"}),"Photos (",j.length,"/",ri,")"]})}),t.jsxs("div",{className:"relative mb-4",children:[t.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:de,disabled:y||j.length>=ri,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),t.jsx("div",{className:`border-2 border-dashed rounded-2xl p-6 text-center transition-all ${y?"border-brand-300 bg-brand-50":"border-gray-200 hover:border-brand-300 hover:bg-brand-50/50"}`,children:y?t.jsxs("div",{className:"flex flex-col items-center gap-2",children:[t.jsx(ca,{size:28,className:"animate-spin text-brand-500"}),t.jsx("p",{className:"text-sm font-bold text-brand-600",children:"Upload en cours..."})]}):t.jsxs("div",{className:"flex flex-col items-center gap-2",children:[t.jsx(Fl,{size:28,className:"text-gray-400"}),t.jsx("p",{className:"font-bold text-gray-600",children:"Ajouter des photos"}),t.jsxs("p",{className:"text-xs text-gray-400",children:["JPG, PNG (max ",Fo,"MB par photo)"]})]})})]}),j.length>0&&t.jsx("div",{className:"grid grid-cols-3 gap-3",children:j.map((te,he)=>t.jsxs("div",{className:"relative aspect-square rounded-xl overflow-hidden group",children:[t.jsx("img",{src:te,alt:`Portfolio ${he+1}`,className:"w-full h-full object-cover"}),t.jsx("button",{type:"button",onClick:()=>ce(he),className:"absolute top-2 right-2 w-7 h-7 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg",children:t.jsx(at,{size:14})})]},he))})]}),t.jsxs("section",{children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("h3",{className:"font-bold text-gray-900 flex items-center gap-2",children:[t.jsx(Ks,{size:18,className:"text-brand-500"}),"Vidos (",B.length,"/",ii,")"]})}),t.jsxs("div",{className:"relative mb-4",children:[t.jsx("input",{type:"file",accept:"video/*",multiple:!0,onChange:re,disabled:v||B.length>=ii,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),t.jsx("div",{className:`border-2 border-dashed rounded-2xl p-6 text-center transition-all ${v?"border-brand-300 bg-brand-50":"border-gray-200 hover:border-brand-300 hover:bg-brand-50/50"}`,children:v?t.jsxs("div",{className:"flex flex-col items-center gap-2",children:[t.jsx(ca,{size:28,className:"animate-spin text-brand-500"}),t.jsx("p",{className:"text-sm font-bold text-brand-600",children:"Upload en cours..."})]}):t.jsxs("div",{className:"flex flex-col items-center gap-2",children:[t.jsx(Ks,{size:28,className:"text-gray-400"}),t.jsx("p",{className:"font-bold text-gray-600",children:"Ajouter des vidos"}),t.jsxs("p",{className:"text-xs text-gray-400",children:["MP4, MOV (max ",Qo,"MB par vido)"]})]})})]}),B.length>0&&t.jsx("div",{className:"grid grid-cols-2 gap-3",children:B.map((te,he)=>t.jsxs("div",{className:"relative aspect-video rounded-xl overflow-hidden group bg-gray-900",children:[t.jsx("video",{src:te,className:"w-full h-full object-cover"}),t.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center",children:t.jsx(Gl,{size:32,className:"text-white",fill:"white"})}),t.jsx("button",{type:"button",onClick:()=>ve(he),className:"absolute top-2 right-2 w-7 h-7 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg",children:t.jsx(at,{size:14})})]},he))})]}),t.jsx("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:t.jsx("p",{className:"text-sm text-blue-700",children:" Les photos et vidos sont visibles sur votre profil public et aident les clients  mieux connatre votre travail."})})]}),(!xe||Y==="info")&&t.jsxs("form",{onSubmit:E,className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-brand-400 to-brand-600 p-1",children:t.jsx("div",{className:"w-full h-full rounded-full bg-white flex items-center justify-center overflow-hidden",children:L?t.jsx("img",{src:L,alt:"",className:"w-full h-full object-cover"}):t.jsx(tt,{size:48,className:"text-brand-300"})})}),t.jsxs("label",{className:"absolute bottom-0 right-0 w-10 h-10 bg-brand-500 rounded-full flex items-center justify-center text-white shadow-lg cursor-pointer hover:bg-brand-600 transition-colors",children:[t.jsx("input",{type:"file",accept:"image/*",onChange:W,className:"hidden"}),p?t.jsx(ca,{size:18,className:"animate-spin"}):t.jsx(bi,{size:18})]})]}),t.jsx("p",{className:"text-xs text-gray-400 mt-3",children:"Appuyez pour changer la photo"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Nom complet"}),t.jsx("input",{type:"text",value:se,onChange:te=>ie(te.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-brand-500 focus:outline-none bg-white",placeholder:"Votre nom complet",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Tlphone"}),t.jsx("input",{type:"tel",value:Z,onChange:te=>me(te.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-brand-500 focus:outline-none bg-white",placeholder:"+221 77 000 00 00"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Rgion"}),t.jsxs("select",{value:oe,onChange:te=>ue(te.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-brand-500 focus:outline-none bg-white appearance-none",children:[t.jsx("option",{value:"",children:"Slectionnez une rgion"}),Jp.map(te=>t.jsx("option",{value:te,children:te},te))]})]}),xe&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"pt-4 border-t border-gray-100",children:t.jsx("p",{className:"text-xs font-bold text-brand-500 uppercase tracking-wider mb-4",children:"Informations professionnelles"})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Mtier"}),t.jsxs("select",{value:U??"",onChange:te=>F(Number(te.target.value)),className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-brand-500 focus:outline-none bg-white appearance-none",children:[t.jsx("option",{value:"",children:"Slectionnez un mtier"}),h.map(te=>t.jsx("option",{value:te.id,children:te.name},te.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Spcialit"}),t.jsx("input",{type:"text",value:Q,onChange:te=>T(te.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-brand-500 focus:outline-none bg-white",placeholder:"Ex: Rparation de fuites"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:" propos de vous"}),t.jsx("textarea",{value:S,onChange:te=>O(te.target.value),rows:4,className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-brand-500 focus:outline-none bg-white resize-none",placeholder:"Dcrivez votre exprience et savoir-faire..."})]})]}),t.jsx("button",{type:"submit",disabled:b,className:"w-full bg-gray-900 text-white rounded-xl py-4 font-bold hover:bg-gray-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:b?t.jsx(ca,{size:20,className:"animate-spin"}):"Enregistrer"})]})]})]})}const ci={materials:{label:"Matriaux",icon:t.jsx(Uh,{size:20}),color:"bg-blue-100 text-blue-600"},labor:{label:"Main d'uvre",icon:t.jsx($s,{size:20}),color:"bg-green-100 text-green-600"},transport:{label:"Transport",icon:t.jsx(T0,{size:20}),color:"bg-purple-100 text-purple-600"},equipment:{label:"quipement",icon:t.jsx(Io,{size:20}),color:"bg-orange-100 text-orange-600"},other:{label:"Autre",icon:t.jsx(zt,{size:20}),color:"bg-gray-100 text-gray-600"}};function Wp(){const i=bt(),{user:u}=ut(),{profile:f}=Vt(),{error:d}=Da(),[h,_]=o.useState([]),[b,z]=o.useState([]),[p,m]=o.useState(!0),[y,g]=o.useState(!1),[v,N]=o.useState(null),[H,ae]=o.useState(""),[Y,X]=o.useState("all"),[se,ie]=o.useState("all"),[Z,me]=o.useState(""),[oe,ue]=o.useState(""),[L,P]=o.useState("materials"),[U,F]=o.useState(""),[Q,T]=o.useState(new Date().toISOString().split("T")[0]),[S,O]=o.useState(null),[j,A]=o.useState(!1),[B,K]=o.useState(!1);o.useEffect(()=>{!u||!f||(ge(),de())},[u,f]);const ge=async()=>{if(!u)return;let W=k.from("expenses").select("*, projects(title, project_number)").eq("user_id",u.id).order("expense_date",{ascending:!1});Y!=="all"&&(W=W.eq("category",Y)),se!=="all"&&(W=W.eq("project_id",se));const{data:E,error:xe}=await W;xe?console.error("Error fetching expenses:",xe):_(E||[]),m(!1)},de=async()=>{if(!(!u||!f)){if(f.role==="client"){const{data:W}=await k.from("projects").select("id, title, project_number").eq("client_id",u.id).in("status",["open","quote_accepted","in_progress","completed"]).order("created_at",{ascending:!1});z(W||[])}else if(f.role==="artisan"){const{data:W}=await k.from("quotes").select("project_id, projects(id, title, project_number)").eq("artisan_id",u.id).eq("status","accepted"),E=(W==null?void 0:W.map(xe=>xe.projects).filter(Boolean))||[];z(E)}}};o.useEffect(()=>{ge()},[Y,se]);const ce=async W=>{if(!u)return null;A(!0);try{const E=W.name.split(".").pop(),xe=`${u.id}/expenses/${Date.now()}-${Math.random().toString(36).substr(2,9)}.${E}`,{error:te}=await k.storage.from("photos").upload(xe,W);if(te)throw te;const{data:he}=k.storage.from("photos").getPublicUrl(xe);return(he==null?void 0:he.publicUrl)||null}catch(E){return console.error("Error uploading receipt:",E),null}finally{A(!1)}},re=async W=>{if(W.preventDefault(),!!u){K(!0);try{let E=null;S&&(E=await ce(S));const xe={user_id:u.id,category:L,amount:parseFloat(Z),description:oe.trim()||null,expense_date:Q,receipt_url:E};U&&(xe.project_id=U);const{error:te}=await k.from("expenses").insert(xe);if(te)throw te;me(""),ue(""),P("materials"),F(""),T(new Date().toISOString().split("T")[0]),O(null),g(!1),await ge()}catch(E){d(`Erreur: ${E.message||"Impossible d'enregistrer la dpense"}`)}finally{K(!1)}}},ve=h.reduce((W,E)=>W+parseFloat(E.amount||0),0);return h.reduce((W,E)=>(W[E.category]=(W[E.category]||0)+parseFloat(E.amount||0),W),{}),p?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:t.jsx("div",{className:"w-12 h-12 border-4 border-brand-500 border-t-transparent rounded-full animate-spin"})}):t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsxs("header",{className:"sticky top-0 z-20 px-4 py-4 bg-white border-b border-gray-100 flex items-center gap-4",children:[t.jsx("button",{onClick:()=>i("/dashboard"),className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:t.jsx(Mt,{size:20,className:"text-gray-600"})}),t.jsx("div",{className:"flex-1",children:t.jsx("h1",{className:"font-bold text-gray-900",children:"Suivi des dpenses"})}),t.jsx("button",{onClick:()=>g(!0),className:"w-10 h-10 bg-brand-500 text-white rounded-full flex items-center justify-center",children:t.jsx(C0,{size:20})})]}),t.jsxs("main",{className:"max-w-lg mx-auto px-4 py-6 pb-32",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(_s,{size:18,className:"text-brand-500"}),t.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Total dpenses"})]}),t.jsxs("p",{className:"text-2xl font-black text-gray-900",children:[ve.toLocaleString("fr-FR")," FCFA"]})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Vl,{size:18,className:"text-green-500"}),t.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Nombre"})]}),t.jsx("p",{className:"text-2xl font-black text-gray-900",children:h.length})]})]}),t.jsxs("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:[t.jsxs("select",{value:Y,onChange:W=>X(W.target.value),className:"px-4 py-2 bg-white border border-gray-200 rounded-xl text-sm font-medium",children:[t.jsx("option",{value:"all",children:"Toutes catgories"}),Object.entries(ci).map(([W,E])=>t.jsx("option",{value:W,children:E.label},W))]}),t.jsxs("select",{value:se,onChange:W=>ie(W.target.value),className:"px-4 py-2 bg-white border border-gray-200 rounded-xl text-sm font-medium",children:[t.jsx("option",{value:"all",children:"Tous les projets"}),b.map(W=>t.jsx("option",{value:W.id,children:W.project_number||W.title},W.id))]})]}),h.length===0?t.jsxs("div",{className:"bg-white rounded-2xl p-12 text-center border border-gray-100",children:[t.jsx(E0,{size:48,className:"mx-auto text-gray-300 mb-4"}),t.jsx("p",{className:"text-gray-500 font-medium",children:"Aucune dpense enregistre"}),t.jsx("button",{onClick:()=>g(!0),className:"mt-4 px-6 py-2 bg-brand-500 text-white rounded-xl font-bold",children:"Ajouter une dpense"})]}):t.jsx("div",{className:"space-y-3",children:h.map(W=>{const E=ci[W.category]||ci.other;return t.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${E.color}`,children:E.icon}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-gray-900",children:E.label}),t.jsx("p",{className:"text-xs text-gray-400",children:new Date(W.expense_date).toLocaleDateString("fr-FR")})]})]}),t.jsxs("p",{className:"text-lg font-black text-gray-900",children:[parseFloat(W.amount||0).toLocaleString("fr-FR")," FCFA"]})]}),W.description&&t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:W.description}),W.projects&&t.jsxs("p",{className:"text-xs text-gray-400 mb-2",children:["Projet: ",W.projects.project_number||W.projects.title]}),W.receipt_url&&t.jsxs("a",{href:W.receipt_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-xs text-brand-500 font-medium",children:[t.jsx(Ss,{size:14}),"Voir justificatif"]})]},W.id)})})]}),y&&t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-end z-50",children:t.jsxs("div",{className:"w-full max-w-lg mx-auto bg-white rounded-t-3xl p-6 max-h-[90vh] overflow-y-auto animate-in slide-in-from-bottom duration-300",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Nouvelle dpense"}),t.jsx("button",{onClick:()=>g(!1),className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:t.jsx(at,{size:20})})]}),t.jsxs("form",{onSubmit:re,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:"Montant (FCFA)"}),t.jsx("input",{type:"number",value:Z,onChange:W=>me(W.target.value),required:!0,min:"0",step:"0.01",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-brand-500 focus:outline-none",placeholder:"0.00"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:"Catgorie"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(ci).map(([W,E])=>t.jsxs("button",{type:"button",onClick:()=>P(W),className:`p-3 rounded-xl border-2 transition-all ${L===W?"border-brand-500 bg-brand-50":"border-gray-200 bg-white"}`,children:[t.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center mb-2 ${E.color}`,children:E.icon}),t.jsx("p",{className:"text-xs font-bold text-gray-900",children:E.label})]},W))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:"Projet (optionnel)"}),t.jsxs("select",{value:U,onChange:W=>F(W.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-brand-500 focus:outline-none",children:[t.jsx("option",{value:"",children:"Aucun projet"}),b.map(W=>t.jsx("option",{value:W.id,children:W.project_number||W.title},W.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:"Date"}),t.jsx("input",{type:"date",value:Q,onChange:W=>T(W.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-brand-500 focus:outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:"Description (optionnel)"}),t.jsx("textarea",{value:oe,onChange:W=>ue(W.target.value),rows:3,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-brand-500 focus:outline-none resize-none",placeholder:"Dtails de la dpense..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:"Justificatif (optionnel)"}),t.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-4 text-center",children:[t.jsx("input",{type:"file",accept:"image/*",onChange:W=>{var E;return O(((E=W.target.files)==null?void 0:E[0])||null)},className:"hidden",id:"receipt-upload"}),t.jsx("label",{htmlFor:"receipt-upload",className:"cursor-pointer flex flex-col items-center gap-2",children:S?t.jsxs(t.Fragment,{children:[t.jsx(Ss,{size:32,className:"text-brand-500"}),t.jsx("p",{className:"text-sm font-medium text-gray-900",children:S.name}),t.jsx("button",{type:"button",onClick:W=>{W.stopPropagation(),O(null)},className:"text-xs text-red-500",children:"Supprimer"})]}):t.jsxs(t.Fragment,{children:[t.jsx(Fl,{size:32,className:"text-gray-400"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Ajouter une photo du justificatif"})]})})]})]}),t.jsx("button",{type:"submit",disabled:B||j||!Z,className:"w-full bg-brand-500 text-white font-bold py-4 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed",children:B?"Enregistrement...":j?"Upload...":"Enregistrer la dpense"})]})]})})]})}const ws={draft:{label:"Brouillon",color:"bg-gray-100 text-gray-600",icon:t.jsx(zt,{size:16})},sent:{label:"Envoye",color:"bg-blue-100 text-blue-600",icon:t.jsx(Xn,{size:16})},paid:{label:"Paye",color:"bg-green-100 text-green-600",icon:t.jsx(Oe,{size:16})},overdue:{label:"En retard",color:"bg-red-100 text-red-600",icon:t.jsx(Ta,{size:16})},cancelled:{label:"Annule",color:"bg-gray-100 text-gray-500",icon:t.jsx(at,{size:16})}};function Ip(){var ie,Z,me,oe,ue;const i=bt(),{user:u}=ut(),{profile:f}=Vt(),{info:d}=Da(),[h,_]=o.useState([]),[b,z]=o.useState(!0),[p,m]=o.useState("all"),[y,g]=o.useState(null);o.useEffect(()=>{!u||!f||v()},[u,f,p]);const v=async()=>{if(!u||!f)return;z(!0);let L;if(f.role==="client")L=k.from("invoices").select("*, projects(title, project_number), profiles!invoices_artisan_id_fkey(full_name)").eq("client_id",u.id);else if(f.role==="artisan")L=k.from("invoices").select("*, projects(title, project_number), profiles!invoices_client_id_fkey(full_name)").eq("artisan_id",u.id);else{z(!1);return}p!=="all"&&(L=L.eq("status",p));const{data:P,error:U}=await L.order("issue_date",{ascending:!1});U?console.error("Error fetching invoices:",U):_(P||[]),z(!1)},N=async L=>{var F,Q,T,S;if(L.pdf_url){window.open(L.pdf_url,"_blank");return}const{downloadInvoicePDF:P}=await B0(async()=>{const{downloadInvoicePDF:O}=await import("./invoicePdfGenerator-BPAlzXJP.js");return{downloadInvoicePDF:O}},__vite__mapDeps([4,1,2,3])),U={invoice_number:L.invoice_number||`INV-${L.id.slice(0,8).toUpperCase()}`,issue_date:L.issue_date||L.created_at,due_date:L.due_date||null,client_name:(f==null?void 0:f.role)==="client"?f.full_name:(F=L.profiles)==null?void 0:F.full_name,client_address:null,client_phone:(f==null?void 0:f.role)==="client"?f.phone:null,client_email:(u==null?void 0:u.email)||null,artisan_name:(f==null?void 0:f.role)==="artisan"?f.full_name:(Q=L.profiles)==null?void 0:Q.full_name,artisan_address:null,artisan_phone:(f==null?void 0:f.role)==="artisan"?f.phone:null,artisan_email:null,project_title:((T=L.projects)==null?void 0:T.title)||"Projet",project_number:((S=L.projects)==null?void 0:S.project_number)||null,items:null,subtotal:parseFloat(L.subtotal_amount||L.total_amount||0),tax_amount:parseFloat(L.tax_amount||0),tax_percent:L.tax_percent||null,total_amount:parseFloat(L.total_amount||0),status:L.status||"sent",notes:L.notes||null};P(U)},H=async L=>{d("Envoi email  implmenter")},ae=h.length,Y=h.reduce((L,P)=>L+parseFloat(P.total_amount||0),0),X=h.filter(L=>L.status==="paid").reduce((L,P)=>L+parseFloat(P.total_amount||0),0),se=h.filter(L=>["sent","overdue"].includes(L.status)).reduce((L,P)=>L+parseFloat(P.total_amount||0),0);return b?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:t.jsx("div",{className:"w-12 h-12 border-4 border-brand-500 border-t-transparent rounded-full animate-spin"})}):t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsxs("header",{className:"sticky top-0 z-20 px-4 py-4 bg-white border-b border-gray-100 flex items-center gap-4",children:[t.jsx("button",{onClick:()=>i("/dashboard"),className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:t.jsx(Mt,{size:20,className:"text-gray-600"})}),t.jsx("div",{className:"flex-1",children:t.jsx("h1",{className:"font-bold text-gray-900",children:"Mes factures"})})]}),t.jsxs("main",{className:"max-w-lg mx-auto px-4 py-6 pb-32",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(zt,{size:18,className:"text-brand-500"}),t.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Total factures"})]}),t.jsx("p",{className:"text-2xl font-black text-gray-900",children:ae}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[Y.toLocaleString("fr-FR")," FCFA"]})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Oe,{size:18,className:"text-green-500"}),t.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Payes"})]}),t.jsxs("p",{className:"text-2xl font-black text-green-600",children:[X.toLocaleString("fr-FR")," FCFA"]}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[h.filter(L=>L.status==="paid").length," facture(s)"]})]})]}),se>0&&t.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-2xl p-4 mb-6 flex items-start gap-3",children:[t.jsx(Ta,{size:20,className:"text-yellow-600 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-yellow-800 text-sm",children:"En attente de paiement"}),t.jsxs("p",{className:"text-sm text-yellow-700",children:[se.toLocaleString("fr-FR")," FCFA"]})]})]}),t.jsxs("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:[t.jsx("button",{onClick:()=>m("all"),className:`px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap transition-all ${p==="all"?"bg-brand-500 text-white":"bg-white border border-gray-200 text-gray-600"}`,children:"Toutes"}),Object.entries(ws).map(([L,P])=>t.jsxs("button",{onClick:()=>m(L),className:`px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap transition-all flex items-center gap-2 ${p===L?"bg-brand-500 text-white":"bg-white border border-gray-200 text-gray-600"}`,children:[P.icon,P.label]},L))]}),h.length===0?t.jsxs("div",{className:"bg-white rounded-2xl p-12 text-center border border-gray-100",children:[t.jsx(zt,{size:48,className:"mx-auto text-gray-300 mb-4"}),t.jsx("p",{className:"text-gray-500 font-medium",children:"Aucune facture"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Les factures seront gnres automatiquement aprs la fin des projets"})]}):t.jsx("div",{className:"space-y-3",children:h.map(L=>{var U,F;const P=ws[L.status]||ws.draft;return t.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("p",{className:"font-bold text-gray-900",children:L.invoice_number}),t.jsxs("span",{className:`px-2 py-1 rounded-lg text-xs font-bold flex items-center gap-1 ${P.color}`,children:[P.icon,P.label]})]}),t.jsx("p",{className:"text-sm text-gray-600",children:((U=L.projects)==null?void 0:U.title)||((F=L.projects)==null?void 0:F.project_number)||"Projet"}),(f==null?void 0:f.role)==="client"&&L.profiles&&t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Artisan: ",L.profiles.full_name]}),(f==null?void 0:f.role)==="artisan"&&L.profiles&&t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Client: ",L.profiles.full_name]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-lg font-black text-gray-900",children:[parseFloat(L.total_amount||0).toLocaleString("fr-FR")," FCFA"]}),t.jsx("p",{className:"text-xs text-gray-400",children:new Date(L.issue_date).toLocaleDateString("fr-FR")})]})]}),t.jsxs("div",{className:"border-t border-gray-50 pt-3 mt-3 space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-xs",children:[t.jsx("span",{className:"text-gray-500",children:"Montant HT:"}),t.jsxs("span",{className:"font-medium",children:[parseFloat(L.base_amount||0).toLocaleString("fr-FR")," FCFA"]})]}),t.jsxs("div",{className:"flex justify-between text-xs",children:[t.jsxs("span",{className:"text-gray-500",children:["TVA (",L.tva_percent||18,"%):"]}),t.jsxs("span",{className:"font-medium",children:[parseFloat(L.tva_amount||0).toLocaleString("fr-FR")," FCFA"]})]}),L.due_date&&t.jsxs("div",{className:"flex justify-between text-xs",children:[t.jsx("span",{className:"text-gray-500",children:"chance:"}),t.jsx("span",{className:`font-medium ${L.status==="overdue"?"text-red-600":"text-gray-700"}`,children:new Date(L.due_date).toLocaleDateString("fr-FR")})]}),L.payment_date&&t.jsxs("div",{className:"flex justify-between text-xs",children:[t.jsx("span",{className:"text-gray-500",children:"Paye le:"}),t.jsx("span",{className:"font-medium text-green-600",children:new Date(L.payment_date).toLocaleDateString("fr-FR")})]})]}),t.jsxs("div",{className:"flex gap-2 mt-4",children:[t.jsxs("button",{onClick:()=>g(L),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-xl font-bold text-sm flex items-center justify-center gap-2",children:[t.jsx(S0,{size:16}),"Dtails"]}),L.pdf_url&&t.jsxs("button",{onClick:()=>N(L),className:"px-4 py-2 bg-brand-500 text-white rounded-xl font-bold text-sm flex items-center justify-center gap-2",children:[t.jsx(r0,{size:16}),"PDF"]}),L.status==="sent"&&(f==null?void 0:f.role)==="artisan"&&t.jsxs("button",{onClick:()=>H(),className:"px-4 py-2 bg-blue-500 text-white rounded-xl font-bold text-sm flex items-center justify-center gap-2",children:[t.jsx(Xn,{size:16}),"Envoyer"]})]})]},L.id)})})]}),y&&t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-end z-50",children:t.jsxs("div",{className:"w-full max-w-lg mx-auto bg-white rounded-t-3xl p-6 max-h-[90vh] overflow-y-auto animate-in slide-in-from-bottom duration-300",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Dtails facture"}),t.jsx("button",{onClick:()=>g(null),className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:t.jsx(at,{size:20})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold mb-1",children:"Numro"}),t.jsx("p",{className:"text-lg font-bold text-gray-900",children:y.invoice_number})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold mb-1",children:"Projet"}),t.jsx("p",{className:"text-gray-900",children:((ie=y.projects)==null?void 0:ie.title)||((Z=y.projects)==null?void 0:Z.project_number)})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold mb-1",children:"Date d'mission"}),t.jsx("p",{className:"text-gray-900",children:new Date(y.issue_date).toLocaleDateString("fr-FR")})]}),y.due_date&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold mb-1",children:"Date d'chance"}),t.jsx("p",{className:`font-medium ${y.status==="overdue"?"text-red-600":"text-gray-900"}`,children:new Date(y.due_date).toLocaleDateString("fr-FR")})]})]}),t.jsxs("div",{className:"border-t border-gray-100 pt-4 space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Montant HT"}),t.jsxs("span",{className:"font-bold",children:[parseFloat(y.base_amount||0).toLocaleString("fr-FR")," FCFA"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{className:"text-gray-600",children:["TVA (",y.tva_percent||18,"%)"]}),t.jsxs("span",{className:"font-bold",children:[parseFloat(y.tva_amount||0).toLocaleString("fr-FR")," FCFA"]})]}),t.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-100",children:[t.jsx("span",{className:"font-bold text-gray-900",children:"Total TTC"}),t.jsxs("span",{className:"text-xl font-black text-brand-600",children:[parseFloat(y.total_amount||0).toLocaleString("fr-FR")," FCFA"]})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold mb-1",children:"Statut"}),t.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-lg text-sm font-bold ${((me=ws[y.status])==null?void 0:me.color)||ws.draft.color}`,children:[((oe=ws[y.status])==null?void 0:oe.icon)||ws.draft.icon,((ue=ws[y.status])==null?void 0:ue.label)||y.status]})]}),y.payment_date&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold mb-1",children:"Date de paiement"}),t.jsx("p",{className:"text-green-600 font-medium",children:new Date(y.payment_date).toLocaleDateString("fr-FR")})]}),y.payment_method&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold mb-1",children:"Mthode de paiement"}),t.jsx("p",{className:"text-gray-900 capitalize",children:y.payment_method})]}),y.notes&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold mb-1",children:"Notes"}),t.jsx("p",{className:"text-gray-700",children:y.notes})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-100",children:[y.pdf_url&&t.jsxs("button",{onClick:()=>N(y),className:"flex-1 bg-brand-500 text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2",children:[t.jsx(r0,{size:18}),"Tlcharger PDF"]}),t.jsx("button",{onClick:()=>window.print(),className:"px-6 py-3 bg-gray-100 text-gray-700 font-bold rounded-xl flex items-center justify-center gap-2",children:t.jsx(Bh,{size:18})})]})]})]})})]})}function H0(){const{user:i}=ut(),[u,f]=o.useState([]),[d,h]=o.useState(new Set),[_,b]=o.useState(!0),z=o.useCallback(async()=>{if(!i){f([]),h(new Set),b(!1);return}b(!0);const{data:v,error:N}=await k.from("favorites").select(`
        id, artisan_id, created_at,
        profiles!favorites_artisan_id_fkey (
          id, full_name, avatar_url, location, specialty,
          categories (name)
        )
      `).eq("client_id",i.id).order("created_at",{ascending:!1});if(N)console.error("Error fetching favorites:",N);else{const H=(v||[]).map(ae=>({id:ae.id,artisan_id:ae.artisan_id,created_at:ae.created_at,artisan:ae.profiles?{id:ae.profiles.id,full_name:ae.profiles.full_name,avatar_url:ae.profiles.avatar_url,location:ae.profiles.location,specialty:ae.profiles.specialty,category:ae.profiles.categories}:null}));f(H),h(new Set(H.map(ae=>ae.artisan_id)))}b(!1)},[i]);o.useEffect(()=>{z()},[z]);const p=o.useCallback(v=>d.has(v),[d]),m=o.useCallback(async v=>{if(!i)return!1;const{error:N}=await k.from("favorites").insert({client_id:i.id,artisan_id:v});return N?(console.error("Error adding favorite:",N),!1):(h(H=>new Set([...H,v])),z(),!0)},[i,z]),y=o.useCallback(async v=>{if(!i)return!1;const{error:N}=await k.from("favorites").delete().eq("client_id",i.id).eq("artisan_id",v);return N?(console.error("Error removing favorite:",N),!1):(h(H=>{const ae=new Set(H);return ae.delete(v),ae}),f(H=>H.filter(ae=>ae.artisan_id!==v)),!0)},[i]),g=o.useCallback(async v=>p(v)?y(v):m(v),[p,m,y]);return{favorites:u,favoriteIds:d,loading:_,isFavorite:p,addFavorite:m,removeFavorite:y,toggleFavorite:g,refresh:z}}function eb(){var O,j,A,B,K,ge,de;const{id:i}=Js(),u=bt(),{user:f}=ut(),{profile:d}=Vt(),[h,_]=o.useState(null),[b,z]=o.useState([]),[p,m]=o.useState({count:0,avg:0,projectsCount:0,tier:"Bronze"}),[y,g]=o.useState(!0),[v,N]=o.useState(null),{isFavorite:H,toggleFavorite:ae}=H0(),Y=i?H(i):!1,[X,se]=o.useState(!1),[ie,Z]=o.useState(0),[me,oe]=o.useState("photo");o.useEffect(()=>{(async()=>{if(!i)return;g(!0),N(null);const{data:re,error:ve}=await k.from("artisans").select(`
          bio, specialty, portfolio_urls, video_urls, verification_status, rating_avg, is_available,
          categories (id, name, icon_name)
        `).eq("id",i).maybeSingle();if(ve){console.error("Error fetching artisan details:",ve),N("Artisan non trouv"),g(!1);return}if(!re){N("Artisan non trouv"),g(!1);return}const{data:W,error:E}=await k.from("profiles").select(`
          id, full_name, email, phone, avatar_url, location, member_id, created_at, role
        `).eq("id",i).maybeSingle();if(E){console.error("Error fetching profile:",E),N("Artisan non trouv"),g(!1);return}if(!W){N("Artisan non trouv"),g(!1);return}_({...W,artisan:re?{bio:re.bio,specialty:re.specialty,portfolio_urls:re.portfolio_urls||[],video_urls:re.video_urls||[],verification_status:re.verification_status,rating_avg:re.rating_avg,is_available:re.is_available,category:re.categories}:null});const{data:xe}=await k.from("reviews").select(`
          id, rating, comment, created_at,
          profiles!reviews_client_id_fkey (full_name, avatar_url)
        `).eq("artisan_id",i).order("created_at",{ascending:!1}).limit(10);if(xe){const te=xe.map(Ce=>({id:Ce.id,rating:Ce.rating,comment:Ce.comment,created_at:Ce.created_at,client:Ce.profiles?{full_name:Ce.profiles.full_name,avatar_url:Ce.profiles.avatar_url}:null}));z(te);const he=te.length,we=(re==null?void 0:re.rating_avg)??0,_e=he>0?te.reduce((Ce,He)=>Ce+He.rating,0)/he:we,{count:Se}=await k.from("quotes").select("*",{count:"exact",head:!0}).eq("artisan_id",i).eq("status","accepted"),Ze=U0(Se||0);m({count:he,avg:_e||0,projectsCount:Se||0,tier:Ze})}g(!1)})()},[i]);const ue=(ce,re)=>{oe(ce),Z(re),se(!0)},L=()=>{se(!1)},P=()=>{var re,ve;const ce=me==="photo"?((re=h==null?void 0:h.artisan)==null?void 0:re.portfolio_urls)||[]:((ve=h==null?void 0:h.artisan)==null?void 0:ve.video_urls)||[];Z(W=>(W+1)%ce.length)},U=()=>{var re,ve;const ce=me==="photo"?((re=h==null?void 0:h.artisan)==null?void 0:re.portfolio_urls)||[]:((ve=h==null?void 0:h.artisan)==null?void 0:ve.video_urls)||[];Z(W=>(W-1+ce.length)%ce.length)},F=()=>{if(!f){u("/onboard?mode=signup&role=client");return}if((d==null?void 0:d.role)!=="client"){u("/onboard?mode=signup&role=client");return}u(`/create-project?artisan=${i}`)},Q=((O=h==null?void 0:h.artisan)==null?void 0:O.verification_status)==="verified",T=((j=h==null?void 0:h.artisan)==null?void 0:j.portfolio_urls)||[],S=((A=h==null?void 0:h.artisan)==null?void 0:A.video_urls)||[];return d==null||d.role,y?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-brand-500 border-t-transparent rounded-full animate-spin"}),t.jsx("p",{className:"text-gray-500 font-medium",children:"Chargement du profil..."})]})}):v||!h?t.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:t.jsx(wt,{size:40,className:"text-gray-300"})}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Artisan non trouv"}),t.jsx("p",{className:"text-gray-500 mb-6",children:"Ce profil n'existe pas ou n'est plus disponible"}),t.jsx("button",{onClick:()=>u(-1),className:"px-6 py-3 bg-brand-500 text-white font-bold rounded-xl hover:bg-brand-600 transition-colors",children:"Retour"})]})}):t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("header",{className:"bg-white border-b sticky top-0 z-40",children:t.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-3 flex items-center justify-between",children:[t.jsx("button",{onClick:()=>u(-1),className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:t.jsx(Mt,{size:20,className:"text-gray-600"})}),t.jsx("h1",{className:"font-bold text-gray-900",children:"Profil artisan"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>i&&ae(i),className:`p-2 rounded-xl transition-colors ${Y?"bg-red-50 text-red-500":"hover:bg-gray-100 text-gray-400"}`,children:t.jsx(Hl,{size:20,fill:Y?"currentColor":"none"})}),t.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-xl transition-colors text-gray-400",children:t.jsx(Qh,{size:20})})]})]})}),t.jsxs("main",{className:"max-w-2xl mx-auto pb-32",children:[t.jsx("div",{className:"bg-white border-b",children:t.jsxs("div",{className:"px-6 py-8",children:[t.jsxs("div",{className:"flex items-start gap-5",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"w-24 h-24 rounded-2xl bg-gradient-to-br from-brand-400 to-brand-600 p-0.5 shadow-lg",children:t.jsx("div",{className:"w-full h-full rounded-2xl bg-white flex items-center justify-center overflow-hidden",children:h.avatar_url?t.jsx("img",{src:h.avatar_url,alt:"",className:"w-full h-full object-cover"}):t.jsx(wt,{size:32,className:"text-brand-500"})})}),Q&&t.jsx("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-green-500 rounded-xl flex items-center justify-center border-2 border-white shadow-lg",children:t.jsx(Oe,{size:16,className:"text-white"})})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"flex items-center gap-2 mb-1",children:t.jsx("h2",{className:"text-xl font-black text-gray-900",children:h.full_name})}),t.jsx("p",{className:"text-brand-600 font-bold text-sm mb-2",children:((K=(B=h.artisan)==null?void 0:B.category)==null?void 0:K.name)||"Artisan"}),((ge=h.artisan)==null?void 0:ge.specialty)&&t.jsx("p",{className:"text-gray-500 text-sm mb-2",children:h.artisan.specialty}),t.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-1 text-yellow-500",children:[t.jsx(Ma,{size:16,fill:"currentColor"}),t.jsx("span",{className:"font-bold text-gray-900",children:p.avg.toFixed(1)}),t.jsxs("span",{className:"text-gray-400",children:["(",p.count," avis)"]})]}),h.location&&t.jsxs("div",{className:"flex items-center gap-1 text-gray-400",children:[t.jsx(Gt,{size:14}),t.jsx("span",{children:h.location})]})]})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 mt-6",children:[Q&&t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-green-50 text-green-700 rounded-full text-xs font-bold",children:[t.jsx(At,{size:14}),"Certifi"]}),h.artisan&&t.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-bold ${h.artisan.is_available!==!1?"bg-green-50 text-green-700":"bg-gray-100 text-gray-600"}`,children:[t.jsx(St,{size:14}),h.artisan.is_available!==!1?"Disponible":"Occup"]}),h.member_id&&t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-gray-100 text-gray-600 rounded-full text-xs font-mono",children:[t.jsx(Th,{size:12}),h.member_id]}),t.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-bold ${L0[p.tier]}`,children:[t.jsx(Qn,{size:14}),p.tier]}),t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-50 text-blue-700 rounded-full text-xs font-bold",children:[t.jsx(Ql,{size:14}),"Membre depuis ",new Date(h.created_at).getFullYear()]})]})]})}),((de=h.artisan)==null?void 0:de.bio)&&t.jsxs("section",{className:"bg-white border-b px-6 py-6",children:[t.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:" propos"}),t.jsx("p",{className:"text-gray-600 leading-relaxed",children:h.artisan.bio})]}),T.length>0&&t.jsxs("section",{className:"bg-white border-b px-6 py-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h3",{className:"font-bold text-gray-900 flex items-center gap-2",children:[t.jsx(Ss,{size:18,className:"text-brand-500"}),"Portfolio Photos"]}),t.jsxs("span",{className:"text-xs text-gray-400 font-bold",children:[T.length,"/10"]})]}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:T.slice(0,6).map((ce,re)=>t.jsxs("button",{onClick:()=>ue("photo",re),className:"relative aspect-square rounded-xl overflow-hidden group",children:[t.jsx("img",{src:ce,alt:`Portfolio ${re+1}`,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),t.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors"}),re===5&&T.length>6&&t.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:t.jsxs("span",{className:"text-white font-bold text-lg",children:["+",T.length-6]})})]},re))})]}),S.length>0&&t.jsxs("section",{className:"bg-white border-b px-6 py-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h3",{className:"font-bold text-gray-900 flex items-center gap-2",children:[t.jsx(Ks,{size:18,className:"text-brand-500"}),"Portfolio Vidos"]}),t.jsxs("span",{className:"text-xs text-gray-400 font-bold",children:[S.length,"/5"]})]}),t.jsx("div",{className:"grid grid-cols-2 gap-3",children:S.map((ce,re)=>t.jsxs("button",{onClick:()=>ue("video",re),className:"relative aspect-video rounded-xl overflow-hidden group bg-gray-900",children:[t.jsx("video",{src:ce,className:"w-full h-full object-cover"}),t.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center group-hover:bg-black/60 transition-colors",children:t.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center",children:t.jsx(Gl,{size:24,className:"text-white ml-1",fill:"white"})})})]},re))})]}),t.jsxs("section",{className:"bg-white border-b px-6 py-6",children:[t.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Contact"}),t.jsxs("div",{className:"space-y-3",children:[h.phone&&t.jsxs("div",{className:"flex items-center gap-3 text-gray-400",children:[t.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center",children:t.jsx(Hn,{size:18,className:"text-gray-400"})}),t.jsx("span",{className:"font-medium text-sm",children:"Numro masqu pour la confidentialit"})]}),t.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[t.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center",children:t.jsx(Xn,{size:18,className:"text-gray-500"})}),t.jsx("span",{className:"font-medium",children:h.email})]}),h.location&&t.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[t.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center",children:t.jsx(Gt,{size:18,className:"text-gray-500"})}),t.jsx("span",{className:"font-medium",children:h.location})]})]})]}),t.jsx("section",{className:"bg-white px-6 py-6",children:t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-2xl",children:[t.jsx("p",{className:"text-2xl font-black text-gray-900",children:p.projectsCount}),t.jsx("p",{className:"text-xs text-gray-500 font-bold uppercase",children:"Projets"})]}),t.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-2xl",children:[t.jsx("p",{className:"text-2xl font-black text-gray-900",children:p.avg.toFixed(1)}),t.jsx("p",{className:"text-xs text-gray-500 font-bold uppercase",children:"Note"})]}),t.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-2xl",children:[t.jsx("p",{className:"text-2xl font-black text-gray-900",children:p.count}),t.jsx("p",{className:"text-xs text-gray-500 font-bold uppercase",children:"Avis"})]})]})}),t.jsxs("section",{className:"bg-white border-b px-6 py-6",children:[t.jsxs("h3",{className:"font-bold text-gray-900 flex items-center gap-2 mb-4",children:[t.jsx(Vh,{size:18,className:"text-brand-500"}),"Avis clients (",p.count,")"]}),b.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-14 h-14 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:t.jsx(Ma,{size:24,className:"text-gray-300"})}),t.jsx("p",{className:"text-gray-500 font-medium",children:"Pas encore d'avis"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Soyez le premier  donner votre avis !"})]}):t.jsxs("div",{className:"space-y-4",children:[b.map(ce=>{var re,ve;return t.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4",children:[t.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-200 flex items-center justify-center overflow-hidden flex-shrink-0",children:(re=ce.client)!=null&&re.avatar_url?t.jsx("img",{src:ce.client.avatar_url,alt:"",className:"w-full h-full object-cover"}):t.jsx(tt,{size:18,className:"text-gray-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"font-bold text-gray-900 truncate",children:((ve=ce.client)==null?void 0:ve.full_name)||"Client"}),t.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-2",children:new Date(ce.created_at).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"})})]}),t.jsx("div",{className:"flex items-center gap-0.5 mt-1",children:[...Array(5)].map((W,E)=>t.jsx(Ma,{size:14,className:E<ce.rating?"text-yellow-400 fill-yellow-400":"text-gray-300"},E))})]})]}),ce.comment&&t.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:ce.comment})]},ce.id)}),b.length>5&&t.jsxs("button",{className:"w-full py-3 text-center text-brand-600 font-bold text-sm hover:bg-brand-50 rounded-xl transition-colors",children:["Voir tous les avis (",p.count,")"]})]})]})]}),t.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t px-4 py-4 z-40",children:t.jsxs("div",{className:"max-w-2xl mx-auto flex gap-3",children:[t.jsxs("button",{className:"flex-1 py-4 bg-gray-100 text-gray-700 font-bold rounded-2xl flex items-center justify-center gap-2 hover:bg-gray-200 transition-colors",children:[t.jsx(Wo,{size:20}),"Message"]}),t.jsxs("button",{onClick:F,className:"flex-[2] py-4 bg-brand-500 text-white font-black rounded-2xl flex items-center justify-center gap-2 hover:bg-brand-600 active:scale-[0.98] transition-all shadow-lg shadow-brand-200",children:[t.jsx(wt,{size:20}),f&&(d==null?void 0:d.role)==="client"?"Demander un projet":"Se connecter pour demander"]})]})}),X&&t.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex items-center justify-center",children:[t.jsx("button",{onClick:L,className:"absolute top-4 right-4 w-12 h-12 bg-white/10 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors z-10",children:t.jsx(at,{size:24})}),t.jsx("button",{onClick:U,className:"absolute left-4 w-12 h-12 bg-white/10 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors",children:t.jsx(Sh,{size:28})}),t.jsx("button",{onClick:P,className:"absolute right-4 w-12 h-12 bg-white/10 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors",children:t.jsx(Zs,{size:28})}),t.jsx("div",{className:"max-w-4xl max-h-[80vh] w-full mx-4",children:me==="photo"?t.jsx("img",{src:T[ie],alt:`Portfolio ${ie+1}`,className:"w-full h-full object-contain"}):t.jsx("video",{src:S[ie],controls:!0,autoPlay:!0,className:"w-full h-full object-contain"})}),t.jsxs("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 text-white text-sm font-bold bg-black/50 px-4 py-2 rounded-full",children:[ie+1," / ",me==="photo"?T.length:S.length]})]})]})}function tb(){const i=bt(),{favorites:u,loading:f,removeFavorite:d}=H0(),h=async(_,b)=>{b.stopPropagation(),await d(_)};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("header",{className:"bg-white border-b border-gray-100 sticky top-0 z-10",children:t.jsxs("div",{className:"max-w-lg mx-auto px-4 py-4 flex items-center gap-4",children:[t.jsx("button",{onClick:()=>i(-1),className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-600",children:t.jsx(Mt,{size:20})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"font-bold text-gray-900",children:"Mes favoris"}),t.jsxs("p",{className:"text-xs text-gray-400",children:[u.length," artisan",u.length>1?"s":""," sauvegard",u.length>1?"s":""]})]}),t.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:t.jsx(Hl,{size:20,className:"text-red-500 fill-red-500"})})]})}),t.jsx("main",{className:"max-w-lg mx-auto px-4 py-6",children:f?t.jsx("div",{className:"py-12 text-center",children:t.jsx("div",{className:"w-8 h-8 border-2 border-brand-500 border-t-transparent rounded-full animate-spin mx-auto"})}):u.length===0?t.jsxs("div",{className:"py-12 text-center",children:[t.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full mx-auto mb-4 flex items-center justify-center",children:t.jsx(Hl,{size:40,className:"text-gray-300"})}),t.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Aucun favori"}),t.jsx("p",{className:"text-gray-500 text-sm mb-6",children:"Sauvegardez vos artisans prfrs pour les retrouver facilement"}),t.jsx("button",{onClick:()=>i("/dashboard"),className:"px-6 py-3 bg-brand-500 text-white font-bold rounded-xl",children:"Dcouvrir les artisans"})]}):t.jsx("div",{className:"space-y-3",children:u.map(_=>{var b,z,p,m;return t.jsx("div",{className:"bg-white rounded-2xl p-4 border border-gray-100 hover:shadow-md transition-all cursor-pointer",onClick:()=>i(`/artisan/${_.artisan_id}`),children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 rounded-xl bg-brand-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:(b=_.artisan)!=null&&b.avatar_url?t.jsx("img",{src:_.artisan.avatar_url,alt:"",className:"w-full h-full object-cover"}):t.jsx(tt,{size:28,className:"text-brand-500"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-bold text-gray-900 truncate",children:(z=_.artisan)==null?void 0:z.full_name}),((p=_.artisan)==null?void 0:p.category)&&t.jsxs("div",{className:"flex items-center gap-1 text-sm text-brand-600 mt-0.5",children:[t.jsx(wt,{size:12}),t.jsx("span",{children:_.artisan.category.name})]}),((m=_.artisan)==null?void 0:m.location)&&t.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400 mt-1",children:[t.jsx(Gt,{size:12}),t.jsx("span",{children:_.artisan.location})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:y=>h(_.artisan_id,y),className:"w-10 h-10 rounded-xl bg-red-50 flex items-center justify-center text-red-500 hover:bg-red-100 transition-colors",children:t.jsx(td,{size:18})}),t.jsx(Zs,{size:20,className:"text-gray-300"})]})]})},_.id)})})})]})}function ab(){const i=bt(),[u,f]=fi.useState(!1),[d,h]=fi.useState(!1),_=()=>{window.open("https://wa.me/221788324069","_blank")};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("header",{className:"bg-white border-b sticky top-0 z-50",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-6 py-4 flex items-center justify-between",children:[t.jsx("button",{onClick:()=>i(-1),className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:t.jsx(Mt,{size:20,className:"text-gray-600"})}),t.jsx("h1",{className:"text-xl font-black text-gray-900",children:" propos"}),t.jsx("button",{onClick:()=>i("/"),className:"p-2 hover:bg-brand-50 rounded-xl transition-colors group",title:"Retour  l'accueil",children:t.jsx(Po,{size:20,className:"text-gray-600 group-hover:text-brand-500 transition-colors"})})]})}),t.jsxs("main",{className:"max-w-5xl mx-auto px-4 md:px-6 py-12",children:[t.jsxs("section",{className:"text-center mb-16",children:[t.jsxs("h2",{className:"text-4xl md:text-5xl font-black text-gray-900 mb-4 tracking-tight",children:["Mboura",t.jsx("span",{className:"text-brand-500",children:"k"})]}),t.jsx("p",{className:"text-xl text-gray-600 font-medium max-w-2xl mx-auto leading-relaxed",children:"La plateforme qui connecte les meilleurs artisans du Sngal avec des clients exigeants, ancre dans la culture sngalaise et tourne vers l'excellence."})]}),t.jsx("section",{className:"mb-16",children:t.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-100",children:[t.jsx("div",{className:"w-16 h-16 bg-brand-50 rounded-2xl flex items-center justify-center mb-6",children:t.jsx(Zh,{size:28,className:"text-brand-500"})}),t.jsx("h3",{className:"text-2xl font-black text-gray-900 mb-4",children:"Notre Mission"}),t.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Faciliter la mise en relation entre artisans qualifis et clients  la recherche d'excellence. Nous crons un cosystme de confiance o chaque projet trouve l'artisan parfait, et o chaque artisan peut dvelopper son activit en toute srnit."})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-100",children:[t.jsx("div",{className:"w-16 h-16 bg-purple-50 rounded-2xl flex items-center justify-center mb-6",children:t.jsx(z0,{size:28,className:"text-purple-500"})}),t.jsx("h3",{className:"text-2xl font-black text-gray-900 mb-4",children:"Notre Vision"}),t.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Devenir la rfrence au Sngal pour la mise en relation artisanale, en valorisant le savoir-faire local et en promouvant l'excellence. Nous visons  transformer le secteur artisanal sngalais en le rendant plus accessible, transparent et performant."})]})]})}),t.jsxs("section",{className:"mb-16",children:[t.jsxs("div",{className:"text-center mb-12",children:[t.jsx("h2",{className:"text-3xl md:text-4xl font-black text-gray-900 mb-4",children:"Notre Impact"}),t.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Mbourak transforme la faon dont les Sngalais trouvent et travaillent avec des artisans."})]}),t.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[t.jsxs("div",{className:"bg-gradient-to-br from-brand-50 to-orange-50 rounded-2xl p-6 text-center border border-brand-100 shadow-sm",children:[t.jsx(Xs,{size:32,className:"text-brand-500 mx-auto mb-4"}),t.jsx("div",{className:"text-3xl font-black text-gray-900 mb-2",children:"500K"}),t.jsx("p",{className:"text-gray-600 font-medium text-sm",children:"Jeunes artisans cibls en 2026"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 text-center border border-green-100 shadow-sm",children:[t.jsx(Vl,{size:32,className:"text-green-500 mx-auto mb-4"}),t.jsx("div",{className:"text-xl font-black text-gray-900 mb-2",children:"Formation"}),t.jsx("p",{className:"text-gray-600 font-medium text-sm",children:"Accompagnement & Digitalisation"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl p-6 text-center border border-blue-100 shadow-sm",children:[t.jsx(c0,{size:32,className:"text-blue-500 mx-auto mb-4"}),t.jsx("div",{className:"text-3xl font-black text-gray-900 mb-2",children:"2026"}),t.jsx("p",{className:"text-gray-600 font-medium text-sm",children:"Objectif annuel"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6 text-center border border-purple-100 shadow-sm",children:[t.jsx(Ma,{size:32,className:"text-purple-500 mx-auto mb-4"}),t.jsx("div",{className:"text-xl font-black text-gray-900 mb-2",children:"Impact"}),t.jsx("p",{className:"text-gray-600 font-medium text-sm",children:"Transformation du secteur"})]})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-100",children:[t.jsxs("h3",{className:"text-2xl font-black text-gray-900 mb-6 flex items-center gap-3",children:[t.jsx(Vl,{size:28,className:"text-brand-500"}),"Nos Objectifs"]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx(Oe,{size:24,className:"text-green-500 flex-shrink-0 mt-1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-black text-gray-900 mb-2",children:"Valoriser l'artisanat local"}),t.jsx("p",{className:"text-gray-600 text-sm",children:"Mettre en avant le savoir-faire sngalais et crer des opportunits conomiques pour les artisans locaux."})]})]}),t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx(Oe,{size:24,className:"text-green-500 flex-shrink-0 mt-1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-black text-gray-900 mb-2",children:"Garantir la qualit"}),t.jsx("p",{className:"text-gray-600 text-sm",children:"Systme de vrification et d'avis pour assurer la confiance entre clients et artisans."})]})]}),t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx(Oe,{size:24,className:"text-green-500 flex-shrink-0 mt-1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-black text-gray-900 mb-2",children:"Faciliter l'accs"}),t.jsx("p",{className:"text-gray-600 text-sm",children:"Rendre les services artisanaux accessibles  tous, partout au Sngal, avec une interface simple et intuitive."})]})]}),t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx(Oe,{size:24,className:"text-green-500 flex-shrink-0 mt-1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-black text-gray-900 mb-2",children:"Promouvoir l'excellence"}),t.jsx("p",{className:"text-gray-600 text-sm",children:"Systme de niveaux et de badges pour rcompenser les artisans les plus performants et encourager l'amlioration continue."})]})]})]})]})]}),t.jsxs("section",{className:"mb-16",children:[t.jsxs("div",{className:"text-center mb-12",children:[t.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-brand-50 rounded-full mb-6",children:[t.jsx(Oo,{size:18,className:"text-brand-500"}),t.jsx("span",{className:"text-sm font-black text-brand-600 uppercase tracking-widest",children:"Technologie"})]}),t.jsx("h2",{className:"text-3xl md:text-4xl font-black text-gray-900 mb-4",children:"L'innovation au service de l'excellence"}),t.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto text-lg leading-relaxed",children:"Mbourak est le fruit d'une collaboration entre vision et expertise technique, porte par une quipe passionne d'innovation made in Africa."})]}),t.jsxs("div",{className:"bg-gradient-to-br from-brand-500 to-orange-600 rounded-3xl p-8 md:p-12 text-white shadow-2xl shadow-brand-200/50 mb-8",children:[t.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-8 mb-8",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-32 h-32 bg-white/20 backdrop-blur-md rounded-3xl flex items-center justify-center border-2 border-white/30 shadow-xl",children:u?t.jsx(Oo,{size:40,className:"text-white"}):t.jsx("img",{src:"/logo-impulcia-afrique.jpg",alt:"IMPULCIA AFRIQUE Logo",className:"w-24 h-24 object-contain",onError:()=>f(!0)})})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"text-3xl md:text-4xl font-black mb-2",children:"IMPULCIA AFRIQUE"}),t.jsx("p",{className:"text-white/90 font-bold text-lg mb-4",children:"Ingnierie & Solution Informatique  Made in Africa"})]}),t.jsxs("p",{className:"text-white/90 leading-relaxed mb-4 text-lg",children:[t.jsx("strong",{children:"IMPULCIA AFRIQUE"})," est un leader de l'innovation technologique en Afrique, reconnu pour son expertise exceptionnelle en ingnierie logicielle, intelligence artificielle et transformation digitale. Nous matrisons les technologies les plus avances et repoussons constamment les limites de l'innovation pour crer des solutions qui transforment rellement les entreprises, les organisations et les gouvernements."]}),t.jsxs("p",{className:"text-white/90 leading-relaxed mb-6 text-lg",children:["Notre approche unique combine ",t.jsx("strong",{children:"excellence technique"}),", ",t.jsx("strong",{children:"matrise des nouvelles technologies"}),",",t.jsx("strong",{children:" intelligence artificielle"})," et ",t.jsx("strong",{children:"vision stratgique"}),". Nous ne nous contentons pas de dvelopper des solutions : nous crons des cosystmes digitaux complets qui permettent  nos clients de baser leur fonctionnement sur la ",t.jsx("strong",{children:"performance"}),", la ",t.jsx("strong",{children:"traabilit"}),", l'",t.jsx("strong",{children:"automatisation"})," et la ",t.jsx("strong",{children:"culture de la data"})," avec des objectifs mesurables, quantifiables et vrifiables."]})]})]}),t.jsxs("div",{className:"border-t border-white/30 pt-8 mb-8",children:[t.jsxs("h4",{className:"text-xl font-black mb-6 flex items-center gap-2",children:[t.jsx(Hh,{size:24}),"Nos Services"]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/20",children:[t.jsx(Oo,{size:20,className:"text-white flex-shrink-0"}),t.jsx("span",{className:"text-sm font-bold",children:"Ingnierie Informatique"})]}),t.jsxs("div",{className:"flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/20",children:[t.jsx(q0,{size:20,className:"text-white flex-shrink-0"}),t.jsx("span",{className:"text-sm font-bold",children:"Dveloppement de Logiciels"})]}),t.jsxs("div",{className:"flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/20",children:[t.jsx(Yh,{size:20,className:"text-white flex-shrink-0"}),t.jsx("span",{className:"text-sm font-bold",children:"Applications Mobiles"})]}),t.jsxs("div",{className:"flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/20",children:[t.jsx(On,{size:20,className:"text-white flex-shrink-0"}),t.jsx("span",{className:"text-sm font-bold",children:"Sites Web Institutionnels"})]}),t.jsxs("div",{className:"flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/20",children:[t.jsx(wt,{size:20,className:"text-white flex-shrink-0"}),t.jsx("span",{className:"text-sm font-bold",children:"Applications Mtiers"})]}),t.jsxs("div",{className:"flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/20",children:[t.jsx(Xs,{size:20,className:"text-white flex-shrink-0"}),t.jsx("span",{className:"text-sm font-bold",children:"SIRH"})]}),t.jsxs("div",{className:"flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/20",children:[t.jsx(Rh,{size:20,className:"text-white flex-shrink-0"}),t.jsx("span",{className:"text-sm font-bold",children:"Systmes d'Information"})]}),t.jsxs("div",{className:"flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/20",children:[t.jsx(Fh,{size:20,className:"text-white flex-shrink-0"}),t.jsx("span",{className:"text-sm font-bold",children:"Hbergement & Plateformes"})]}),t.jsxs("div",{className:"flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/20",children:[t.jsx(zt,{size:20,className:"text-white flex-shrink-0"}),t.jsx("span",{className:"text-sm font-bold",children:"Formulaires de Collecte"})]}),t.jsxs("div",{className:"flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/20",children:[t.jsx(wh,{size:20,className:"text-white flex-shrink-0"}),t.jsx("span",{className:"text-sm font-bold",children:"Data Analysis"})]}),t.jsxs("div",{className:"flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/20",children:[t.jsx(Vl,{size:20,className:"text-white flex-shrink-0"}),t.jsx("span",{className:"text-sm font-bold",children:"Solutions Performance"})]}),t.jsxs("div",{className:"flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/20",children:[t.jsx(vh,{size:20,className:"text-white flex-shrink-0"}),t.jsx("span",{className:"text-sm font-bold",children:"Conseil & Stratgie"})]})]})]}),t.jsxs("div",{className:"border-t border-white/30 pt-8",children:[t.jsxs("h4",{className:"text-xl font-black mb-4 flex items-center gap-2",children:[t.jsx(Qn,{size:24}),"Expertise & Engagement"]}),t.jsxs("p",{className:"text-white/90 leading-relaxed mb-4",children:["Notre quipe combine une expertise technique de niveau mondial, une comprhension profonde des enjeux locaux et une passion inbranlable pour l'innovation. Nous matrisons les technologies les plus rcentes :",t.jsx("strong",{children:" intelligence artificielle"}),", ",t.jsx("strong",{children:"machine learning"}),", ",t.jsx("strong",{children:"cloud computing"}),",",t.jsx("strong",{children:" architectures microservices"}),", et bien plus encore."]}),t.jsxs("p",{className:"text-white/90 leading-relaxed mb-6",children:["Au-del de l'ingnierie, nous offrons une ",t.jsx("strong",{children:"expertise managriale"})," en stratgie d'entreprise, combinant ",t.jsx("strong",{children:"conseil"}),", ",t.jsx("strong",{children:"accompagnement"})," et ",t.jsx("strong",{children:"excution"}),". Nous dveloppons des systmes de notation de projet, des solutions de gestion de performance, et accompagnons nos clients dans leur transformation digitale complte. Chaque ligne de code, chaque architecture, chaque solution est conue pour crer un impact rel et mesurable."]}),t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-6 py-3 bg-green-500 hover:bg-green-600 rounded-xl transition-all text-sm font-black shadow-lg",children:[t.jsx(pi,{size:18}),"WhatsApp",t.jsx(mi,{size:14})]}),t.jsxs("a",{href:"mailto:impulcia-afrique@outlook.com",className:"flex items-center gap-2 px-6 py-3 bg-white/20 hover:bg-white/30 rounded-xl transition-all text-sm font-black border border-white/30",children:[t.jsx(Xn,{size:18}),"Email"]}),t.jsxs("a",{href:"https://impulcia-afrique.com/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-6 py-3 bg-white/20 hover:bg-white/30 rounded-xl transition-all text-sm font-black border border-white/30",children:[t.jsx(On,{size:18}),"Site Web",t.jsx(mi,{size:14})]})]})]})]})]}),t.jsxs("section",{className:"mb-16",children:[t.jsxs("div",{className:"text-center mb-12",children:[t.jsx("h2",{className:"text-3xl md:text-4xl font-black text-gray-900 mb-4",children:"Notre Partenaire"}),t.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Mbourak est une initiative porte par une organisation engage pour la transparence et la bonne gouvernance au Sngal."})]}),t.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-8 md:p-12 border border-blue-100 shadow-sm",children:t.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-6",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-24 h-24 bg-white rounded-2xl flex items-center justify-center border-2 border-blue-200 shadow-lg",children:d?t.jsx(Bn,{size:32,className:"text-blue-500"}):t.jsx("img",{src:"/logo-senegel.png",alt:"SENEGEL Logo",className:"w-20 h-20 object-contain",onError:()=>h(!0)})})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-2xl font-black text-gray-900 mb-3",children:"SENEGEL"}),t.jsx("p",{className:"text-gray-700 font-bold mb-2",children:"Senegalese Next Generation of Leaders"}),t.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:"SENEGEL est une plateforme de donnes ouvertes qui permet  tous de suivre la lgislation, la diplomatie, l'conomie et la culture sngalaise. Engage pour des pratiques thiques et une bonne gouvernance, SENEGEL a initi le projet Mbourak pour valoriser l'artisanat local et crer un cosystme de confiance entre artisans et clients."}),t.jsx("div",{className:"flex flex-wrap gap-4",children:t.jsxs("a",{href:"https://www.senegel.org/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-white hover:bg-blue-50 rounded-xl transition-all text-sm font-bold text-gray-700 border border-blue-200 shadow-sm",children:[t.jsx(On,{size:18}),"Visiter SENEGEL",t.jsx(mi,{size:14})]})})]})]})})]}),t.jsx("section",{className:"mb-16",children:t.jsxs("div",{className:"bg-gradient-to-br from-brand-50 to-orange-50 rounded-2xl p-8 md:p-12",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"w-16 h-16 bg-brand-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:t.jsx(Hl,{size:28,className:"text-white",fill:"currentColor"})}),t.jsx("h2",{className:"text-3xl md:text-4xl font-black text-gray-900 mb-4",children:"Remerciements"})]}),t.jsxs("div",{className:"max-w-3xl mx-auto",children:[t.jsx("p",{className:"text-gray-700 leading-relaxed text-center mb-6",children:"Nous tenons  remercier tous ceux qui ont contribu  faire de Mbourak une ralit :"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-start gap-4 bg-white/50 rounded-xl p-4",children:[t.jsx(Xs,{size:24,className:"text-brand-500 flex-shrink-0 mt-1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-black text-gray-900 mb-1",children:"Les Artisans"}),t.jsx("p",{className:"text-gray-600 text-sm",children:"Pour leur confiance et leur engagement  offrir des services de qualit."})]})]}),t.jsxs("div",{className:"flex items-start gap-4 bg-white/50 rounded-xl p-4",children:[t.jsx(c0,{size:24,className:"text-brand-500 flex-shrink-0 mt-1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-black text-gray-900 mb-1",children:"Les Clients"}),t.jsx("p",{className:"text-gray-600 text-sm",children:"Pour leur confiance et leurs retours prcieux qui nous permettent d'amliorer continuellement la plateforme."})]})]}),t.jsxs("div",{className:"flex items-start gap-4 bg-white/50 rounded-xl p-4",children:[t.jsx(Bn,{size:24,className:"text-brand-500 flex-shrink-0 mt-1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-black text-gray-900 mb-1",children:"SENEGEL"}),t.jsx("p",{className:"text-gray-600 text-sm",children:"Pour avoir initi ce projet et pour leur engagement en faveur de la transparence et de la bonne gouvernance au Sngal."})]})]}),t.jsxs("div",{className:"flex items-start gap-4 bg-white/50 rounded-xl p-4",children:[t.jsx(On,{size:24,className:"text-brand-500 flex-shrink-0 mt-1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-black text-gray-900 mb-1",children:"L'cosystme Tech Sngalais"}),t.jsx("p",{className:"text-gray-600 text-sm",children:"Pour l'inspiration et les changes qui enrichissent notre vision de la tech made in Africa."})]})]})]})]})]})}),t.jsx("section",{className:"text-center",children:t.jsxs("div",{className:"bg-white rounded-2xl p-8 md:p-12 shadow-sm border border-gray-100",children:[t.jsx("h2",{className:"text-3xl font-black text-gray-900 mb-4",children:"Rejoignez l'aventure"}),t.jsx("p",{className:"text-gray-600 mb-8 max-w-2xl mx-auto",children:"Que vous soyez artisan ou client, Mbourak est l pour vous accompagner dans vos projets. Ensemble, construisons l'avenir de l'artisanat sngalais."}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[t.jsx("button",{onClick:()=>i("/onboard?mode=signup"),className:"px-8 py-4 bg-brand-500 text-white font-black rounded-xl hover:bg-brand-600 transition-all uppercase tracking-widest text-xs shadow-lg",children:"S'inscrire maintenant"}),t.jsx("button",{onClick:()=>i("/artisans"),className:"px-8 py-4 bg-gray-100 text-gray-700 font-black rounded-xl hover:bg-gray-200 transition-all uppercase tracking-widest text-xs",children:"Dcouvrir les artisans"})]})]})})]}),t.jsx("footer",{className:"bg-white border-t mt-16 py-8",children:t.jsxs("div",{className:"max-w-5xl mx-auto px-4 md:px-6 text-center",children:[t.jsx("p",{className:"text-gray-400 text-sm font-medium mb-2",children:" 2026 Mbourak - L'alliance de l'excellence artisanale"}),t.jsxs("p",{className:"text-gray-500 text-xs",children:["Dvelopp par"," ",t.jsx("a",{href:"https://impulcia-afrique.com/",target:"_blank",rel:"noopener noreferrer",className:"font-black text-brand-500 hover:text-brand-600 transition-colors underline underline-offset-2",children:"IMPULCIA AFRIQUE"})," ","au Sngal"]})]})})]})}function sb(){var H,ae;const i=bt(),u=Ko(),f=ut(),{profile:d}=Vt(),[h,_]=o.useState({totalUsers:0,totalArtisans:0,totalClients:0,totalProjects:0,openProjects:0,completedProjects:0,totalEscrowHeld:0,pendingVerifications:0,disputedProjects:0}),[b,z]=o.useState(!0),[p,m]=o.useState([]),[y,g]=o.useState([]);o.useEffect(()=>{d&&d.role!=="admin"&&i("/dashboard",{replace:!0})},[d,i]),o.useEffect(()=>{(async()=>{z(!0);const{count:X}=await k.from("profiles").select("*",{count:"exact",head:!0}),{count:se}=await k.from("profiles").select("*",{count:"exact",head:!0}).eq("role","artisan"),{count:ie}=await k.from("profiles").select("*",{count:"exact",head:!0}).eq("role","client"),{count:Z}=await k.from("projects").select("*",{count:"exact",head:!0}),{count:me}=await k.from("projects").select("*",{count:"exact",head:!0}).eq("status","open"),{count:oe}=await k.from("projects").select("*",{count:"exact",head:!0}).eq("status","completed"),{data:ue}=await k.from("escrows").select("total_amount").eq("status","held"),L=(ue==null?void 0:ue.reduce((B,K)=>B+(K.total_amount||0),0))||0,{count:P}=await k.from("artisans").select("*",{count:"exact",head:!0}).eq("verification_status","pending"),{count:U}=await k.from("projects").select("*",{count:"exact",head:!0}).eq("status","disputed"),F=new Date;F.setDate(F.getDate()-30);const{data:Q}=await k.from("projects").select("created_at").gte("created_at",F.toISOString()).order("created_at",{ascending:!0}),T=new Map;Q==null||Q.forEach(B=>{const K=new Date(B.created_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"});T.set(K,(T.get(K)||0)+1)});const S=Array.from(T.entries()).map(([B,K])=>({date:B,count:K})).slice(-14);m(S);const{data:O}=await k.from("projects").select("status"),j=new Map;O==null||O.forEach(B=>{const K=B.status||"unknown";j.set(K,(j.get(K)||0)+1)});const A=Array.from(j.entries()).map(([B,K])=>({status:B.charAt(0).toUpperCase()+B.slice(1),count:K}));g(A),_({totalUsers:X||0,totalArtisans:se||0,totalClients:ie||0,totalProjects:Z||0,openProjects:me||0,completedProjects:oe||0,totalEscrowHeld:L,pendingVerifications:P||0,disputedProjects:U||0}),z(!1)})()},[]);const v=[{id:"overview",path:"/admin",icon:t.jsx(Dh,{size:20}),label:"Vue d'ensemble"},{id:"users",path:"/admin/users",icon:t.jsx(Xs,{size:20}),label:"Utilisateurs"},{id:"projects",path:"/admin/projects",icon:t.jsx(wt,{size:20}),label:"Projets"},{id:"escrows",path:"/admin/escrows",icon:t.jsx(_s,{size:20}),label:"Paiements"},{id:"verifications",path:"/admin/verifications",icon:t.jsx(At,{size:20}),label:"Vrifications"},{id:"disputes",path:"/admin/disputes",icon:t.jsx(Tt,{size:20}),label:"Litiges"}],N=Y=>Y==="/admin"?u.pathname==="/admin":u.pathname.startsWith(Y);return t.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[t.jsxs("aside",{className:"w-72 bg-gray-900 text-white flex flex-col",children:[t.jsxs("div",{className:"p-6 border-b border-white/10",children:[t.jsxs("h1",{className:"text-2xl font-black tracking-tight",children:["Mboura",t.jsx("span",{className:"text-brand-500",children:"k"})]}),t.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest font-bold mt-1",children:"Panel Admin"})]}),t.jsx("nav",{className:"flex-1 p-4 space-y-2",children:v.map(Y=>t.jsxs(sh,{to:Y.path,className:`flex items-center gap-3 px-4 py-3 rounded-xl font-bold text-sm transition-all ${N(Y.path)?"bg-brand-500 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[Y.icon,Y.label,Y.id==="verifications"&&h.pendingVerifications>0&&t.jsx("span",{className:"ml-auto bg-red-500 text-white text-[10px] font-black px-2 py-0.5 rounded-full",children:h.pendingVerifications}),Y.id==="disputes"&&h.disputedProjects>0&&t.jsx("span",{className:"ml-auto bg-red-500 text-white text-[10px] font-black px-2 py-0.5 rounded-full animate-pulse",children:h.disputedProjects})]},Y.id))}),t.jsxs("div",{className:"p-4 border-t border-white/10",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-10 h-10 bg-brand-500 rounded-xl flex items-center justify-center font-black",children:((H=d==null?void 0:d.full_name)==null?void 0:H[0])||"A"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-bold text-sm truncate",children:d==null?void 0:d.full_name}),t.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:"Administrateur"})]})]}),t.jsxs("button",{onClick:async()=>{await f.signOut(),i("/")},className:"w-full flex items-center justify-center gap-2 py-3 bg-white/5 hover:bg-white/10 rounded-xl text-gray-400 hover:text-white font-bold text-sm transition-all",children:[t.jsx(k0,{size:18}),"Dconnexion"]})]})]}),t.jsxs("main",{className:"flex-1 flex flex-col",children:[t.jsxs("header",{className:"bg-white border-b px-8 py-4 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-black text-gray-900",children:((ae=v.find(Y=>N(Y.path)))==null?void 0:ae.label)||"Dashboard"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Grez votre plateforme Mbourake"})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("button",{className:"p-2 text-gray-400 hover:text-gray-600 relative",children:[t.jsx(gi,{size:22}),t.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),t.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:t.jsx(Io,{size:22})})]})]}),t.jsx("div",{className:"flex-1 p-8 overflow-auto",children:u.pathname==="/admin"?t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx(oi,{icon:t.jsx(Xs,{className:"text-blue-500"}),label:"Utilisateurs",value:h.totalUsers,subtext:`${h.totalArtisans} artisans  ${h.totalClients} clients`,color:"blue"}),t.jsx(oi,{icon:t.jsx(wt,{className:"text-brand-500"}),label:"Projets",value:h.totalProjects,subtext:`${h.openProjects} ouverts  ${h.completedProjects} termins`,color:"orange"}),t.jsx(oi,{icon:t.jsx(_s,{className:"text-green-500"}),label:"Escrow Actif",value:`${h.totalEscrowHeld.toLocaleString()} FCFA`,subtext:"Fonds en garantie",color:"green"}),t.jsx(oi,{icon:t.jsx(At,{className:"text-purple-500"}),label:"Vrifications",value:h.pendingVerifications,subtext:"En attente",color:"purple",alert:h.pendingVerifications>0})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsx(di,{icon:t.jsx(At,{}),title:"Vrifier les artisans",description:"Examinez les demandes de certification",count:h.pendingVerifications,onClick:()=>i("/admin/verifications")}),t.jsx(di,{icon:t.jsx(wt,{}),title:"Projets en cours",description:"Suivez l'avancement des projets",count:h.openProjects,onClick:()=>i("/admin/projects")}),t.jsx(di,{icon:t.jsx(_s,{}),title:"Paiements Escrow",description:"Grez les garanties et librations",onClick:()=>i("/admin/escrows")}),h.disputedProjects>0&&t.jsx(di,{icon:t.jsx(Tt,{}),title:"Litiges  rsoudre",description:"Des projets ncessitent votre attention",count:h.disputedProjects,onClick:()=>i("/admin/disputes")})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border",children:[t.jsx("h3",{className:"font-black text-gray-900 mb-4",children:"Activit Rcente"}),t.jsxs("div",{className:"space-y-4",children:[t.jsx(ui,{icon:t.jsx(Oe,{className:"text-green-500"}),text:"Nouveau projet cr: Rparation plomberie",time:"Il y a 5 min"}),t.jsx(ui,{icon:t.jsx(Xs,{className:"text-blue-500"}),text:"Nouvel artisan inscrit: Moussa Diop",time:"Il y a 15 min"}),t.jsx(ui,{icon:t.jsx(_s,{className:"text-green-500"}),text:"Paiement escrow reu: 25,000 FCFA",time:"Il y a 1h"}),t.jsx(ui,{icon:t.jsx(At,{className:"text-purple-500"}),text:"Demande de vrification: Fatou Ciss",time:"Il y a 2h"})]})]})]}):t.jsx(lh,{})})]})]})}function oi({icon:i,label:u,value:f,subtext:d,color:h,alert:_}){const b={blue:"bg-blue-50",orange:"bg-orange-50",green:"bg-green-50",purple:"bg-purple-50"};return t.jsxs("div",{className:`${b[h]} rounded-2xl p-6 relative overflow-hidden`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-white rounded-xl flex items-center justify-center shadow-sm",children:i}),_&&t.jsxs("span",{className:"flex items-center gap-1 text-red-500 text-xs font-bold",children:[t.jsx(Ta,{size:14}),"Action requise"]})]}),t.jsx("p",{className:"text-3xl font-black text-gray-900 mb-1",children:f}),t.jsx("p",{className:"text-sm text-gray-500 font-medium",children:u}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:d})]})}function di({icon:i,title:u,description:f,count:d,onClick:h}){return t.jsxs("button",{onClick:h,className:"bg-white rounded-2xl p-6 shadow-sm border text-left hover:shadow-md hover:border-brand-200 transition-all group",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-brand-50 rounded-xl flex items-center justify-center text-brand-500 group-hover:bg-brand-500 group-hover:text-white transition-all",children:i}),d!==void 0&&d>0&&t.jsx("span",{className:"bg-brand-500 text-white text-xs font-black px-2 py-1 rounded-full",children:d})]}),t.jsx("h4",{className:"font-black text-gray-900 mb-1",children:u}),t.jsx("p",{className:"text-sm text-gray-500",children:f}),t.jsxs("div",{className:"flex items-center gap-1 text-brand-500 text-sm font-bold mt-4 group-hover:gap-2 transition-all",children:["Accder ",t.jsx(Zs,{size:16})]})]})}function ui({icon:i,text:u,time:f}){return t.jsxs("div",{className:"flex items-center gap-4 py-3 border-b border-gray-50 last:border-0",children:[t.jsx("div",{className:"w-10 h-10 bg-gray-50 rounded-xl flex items-center justify-center",children:i}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:u}),t.jsx("p",{className:"text-xs text-gray-400",children:f})]})]})}function lb(){const[i,u]=o.useState([]),[f,d]=o.useState(!0),[h,_]=o.useState(""),[b,z]=o.useState("all"),[p,m]=o.useState(null);o.useEffect(()=>{y()},[]);const y=async()=>{d(!0);const{data:N,error:H}=await k.from("profiles").select("*").order("created_at",{ascending:!1});!H&&N&&u(N),d(!1)},g=i.filter(N=>{var Y,X;const H=((Y=N.full_name)==null?void 0:Y.toLowerCase().includes(h.toLowerCase()))||((X=N.email)==null?void 0:X.toLowerCase().includes(h.toLowerCase())),ae=b==="all"||N.role===b;return H&&ae}),v=async(N,H)=>{await k.from("profiles").update({role:H}).eq("id",N),y(),m(null)};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(It,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),t.jsx("input",{type:"text",value:h,onChange:N=>_(N.target.value),placeholder:"Rechercher par nom ou email...",className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:border-brand-500 focus:outline-none"})]}),t.jsxs("select",{value:b,onChange:N=>z(N.target.value),className:"px-4 py-3 bg-white border border-gray-200 rounded-xl focus:border-brand-500 focus:outline-none font-medium",children:[t.jsx("option",{value:"all",children:"Tous les rles"}),t.jsx("option",{value:"client",children:"Clients"}),t.jsx("option",{value:"artisan",children:"Artisans"}),t.jsx("option",{value:"admin",children:"Admins"})]})]}),t.jsx("div",{className:"bg-white rounded-2xl shadow-sm border overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-6 py-4 text-xs font-black text-gray-500 uppercase tracking-widest",children:"Utilisateur"}),t.jsx("th",{className:"text-left px-6 py-4 text-xs font-black text-gray-500 uppercase tracking-widest",children:"Rle"}),t.jsx("th",{className:"text-left px-6 py-4 text-xs font-black text-gray-500 uppercase tracking-widest",children:"Contact"}),t.jsx("th",{className:"text-left px-6 py-4 text-xs font-black text-gray-500 uppercase tracking-widest",children:"Inscription"}),t.jsx("th",{className:"text-right px-6 py-4 text-xs font-black text-gray-500 uppercase tracking-widest",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-50",children:f?t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-400",children:t.jsx("div",{className:"w-8 h-8 border-2 border-brand-500 border-t-transparent rounded-full animate-spin mx-auto"})})}):g.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-400",children:"Aucun utilisateur trouv"})}):g.map(N=>t.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-100 flex items-center justify-center overflow-hidden",children:N.avatar_url?t.jsx("img",{src:N.avatar_url,alt:"",className:"w-full h-full object-cover"}):t.jsx(tt,{size:18,className:"text-brand-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-gray-900",children:N.full_name||"Sans nom"}),t.jsx("p",{className:"text-sm text-gray-500",children:N.email})]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-black uppercase tracking-wider ${N.role==="admin"?"bg-purple-100 text-purple-700":N.role==="artisan"?"bg-brand-100 text-brand-700":"bg-blue-100 text-blue-700"}`,children:[N.role==="artisan"&&t.jsx(wt,{size:12}),N.role==="admin"&&t.jsx(At,{size:12}),N.role==="client"&&t.jsx(tt,{size:12}),N.role]})}),t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("p",{className:"text-sm text-gray-900",children:N.phone||"-"}),t.jsx("p",{className:"text-xs text-gray-400",children:N.location||"-"})]}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("p",{className:"text-sm text-gray-500",children:new Date(N.created_at).toLocaleDateString("fr-FR")})}),t.jsx("td",{className:"px-6 py-4 text-right",children:t.jsx("button",{onClick:()=>m(N),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(Jo,{size:18})})})]},N.id))})]})}),p&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-6",children:t.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 shadow-2xl",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[t.jsx("div",{className:"w-16 h-16 rounded-full bg-brand-100 flex items-center justify-center overflow-hidden",children:p.avatar_url?t.jsx("img",{src:p.avatar_url,alt:"",className:"w-full h-full object-cover"}):t.jsx(tt,{size:28,className:"text-brand-600"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-black text-gray-900",children:p.full_name}),t.jsx("p",{className:"text-sm text-gray-500",children:p.email})]})]}),t.jsxs("div",{className:"space-y-4 mb-6",children:[t.jsxs("div",{className:"flex justify-between py-2 border-b",children:[t.jsx("span",{className:"text-gray-500",children:"Rle actuel"}),t.jsx("span",{className:"font-bold text-gray-900 capitalize",children:p.role})]}),t.jsxs("div",{className:"flex justify-between py-2 border-b",children:[t.jsx("span",{className:"text-gray-500",children:"Tlphone"}),t.jsx("span",{className:"font-bold text-gray-900",children:p.phone||"-"})]}),t.jsxs("div",{className:"flex justify-between py-2 border-b",children:[t.jsx("span",{className:"text-gray-500",children:"Rgion"}),t.jsx("span",{className:"font-bold text-gray-900",children:p.location||"-"})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("p",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Changer le rle"}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:["client","artisan","admin"].map(N=>t.jsx("button",{onClick:()=>v(p.id,N),disabled:p.role===N,className:`py-2 rounded-xl font-bold text-sm capitalize transition-all ${p.role===N?"bg-brand-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:N},N))})]}),t.jsx("button",{onClick:()=>m(null),className:"w-full mt-6 py-3 bg-gray-100 text-gray-600 font-bold rounded-xl hover:bg-gray-200 transition-colors",children:"Fermer"})]})})]})}function nb(){var ae,Y;const[i,u]=o.useState([]),[f,d]=o.useState(!0),[h,_]=o.useState(""),[b,z]=o.useState("all"),[p,m]=o.useState(null);o.useEffect(()=>{y()},[]);const y=async()=>{d(!0);const{data:X,error:se}=await k.from("projects").select("*, profiles(*), categories(*)").order("created_at",{ascending:!1});!se&&X&&u(X),d(!1)},g=i.filter(X=>{var Z,me,oe;const se=((Z=X.title)==null?void 0:Z.toLowerCase().includes(h.toLowerCase()))||((oe=(me=X.profiles)==null?void 0:me.full_name)==null?void 0:oe.toLowerCase().includes(h.toLowerCase())),ie=b==="all"||X.status===b;return se&&ie}),v=async(X,se)=>{await k.from("projects").update({status:se}).eq("id",X),y(),m(null)},N=X=>({open:"bg-green-100 text-green-700",quote_accepted:"bg-blue-100 text-blue-700",in_progress:"bg-yellow-100 text-yellow-700",completed:"bg-purple-100 text-purple-700",cancelled:"bg-red-100 text-red-700"})[X]||"bg-gray-100 text-gray-700",H=X=>({open:"Ouvert",quote_accepted:"Devis accept",in_progress:"En cours",completed:"Termin",cancelled:"Annul"})[X]||X;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(It,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),t.jsx("input",{type:"text",value:h,onChange:X=>_(X.target.value),placeholder:"Rechercher un projet...",className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:border-brand-500 focus:outline-none"})]}),t.jsxs("select",{value:b,onChange:X=>z(X.target.value),className:"px-4 py-3 bg-white border border-gray-200 rounded-xl focus:border-brand-500 focus:outline-none font-medium",children:[t.jsx("option",{value:"all",children:"Tous les statuts"}),t.jsx("option",{value:"open",children:"Ouvert"}),t.jsx("option",{value:"quote_accepted",children:"Devis accept"}),t.jsx("option",{value:"in_progress",children:"En cours"}),t.jsx("option",{value:"completed",children:"Termin"}),t.jsx("option",{value:"cancelled",children:"Annul"})]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:["open","quote_accepted","in_progress","completed","cancelled"].map(X=>t.jsxs("button",{onClick:()=>z(X),className:`p-4 rounded-xl border transition-all ${b===X?"border-brand-500 bg-brand-50":"border-gray-100 bg-white hover:border-gray-200"}`,children:[t.jsx("p",{className:"text-2xl font-black text-gray-900",children:i.filter(se=>se.status===X).length}),t.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:H(X)})]},X))}),t.jsx("div",{className:"bg-white rounded-2xl shadow-sm border overflow-hidden",children:t.jsx("div",{className:"divide-y divide-gray-50",children:f?t.jsx("div",{className:"px-6 py-12 text-center text-gray-400",children:t.jsx("div",{className:"w-8 h-8 border-2 border-brand-500 border-t-transparent rounded-full animate-spin mx-auto"})}):g.length===0?t.jsx("div",{className:"px-6 py-12 text-center text-gray-400",children:"Aucun projet trouv"}):g.map(X=>{var se,ie,Z;return t.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>m(X),children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:`px-2 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider ${N(X.status)}`,children:H(X.status)}),t.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded-lg text-[10px] font-black uppercase tracking-wider",children:((se=X.categories)==null?void 0:se.name)||"Sans catgorie"})]}),t.jsx("h4",{className:"font-bold text-gray-900 mb-1",children:X.title}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Gt,{size:14}),X.location||"Non spcifi"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(St,{size:14}),new Date(X.created_at).toLocaleDateString("fr-FR")]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm font-bold text-gray-900",children:(ie=X.profiles)==null?void 0:ie.full_name}),t.jsx("p",{className:"text-xs text-gray-400",children:(Z=X.profiles)==null?void 0:Z.email})]})]})},X.id)})})}),p&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-6",children:t.jsxs("div",{className:"bg-white rounded-2xl max-w-lg w-full p-6 shadow-2xl",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("span",{className:`inline-block px-3 py-1 rounded-lg text-xs font-black uppercase tracking-wider mb-3 ${N(p.status)}`,children:H(p.status)}),t.jsx("h3",{className:"text-xl font-black text-gray-900",children:p.title}),t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Par ",(ae=p.profiles)==null?void 0:ae.full_name,"  ",(Y=p.categories)==null?void 0:Y.name]})]}),t.jsxs("div",{className:"space-y-4 mb-6",children:[t.jsxs("div",{className:"flex justify-between py-2 border-b",children:[t.jsx("span",{className:"text-gray-500",children:"ID Projet"}),t.jsxs("span",{className:"font-mono text-sm text-gray-900",children:[p.id.slice(0,8),"..."]})]}),t.jsxs("div",{className:"flex justify-between py-2 border-b",children:[t.jsx("span",{className:"text-gray-500",children:"Localisation"}),t.jsx("span",{className:"font-bold text-gray-900",children:p.location||"-"})]}),t.jsxs("div",{className:"flex justify-between py-2 border-b",children:[t.jsx("span",{className:"text-gray-500",children:"Date cration"}),t.jsx("span",{className:"font-bold text-gray-900",children:new Date(p.created_at).toLocaleString("fr-FR")})]})]}),t.jsxs("div",{className:"space-y-3 mb-6",children:[t.jsx("p",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Changer le statut"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:["open","quote_accepted","in_progress","completed","cancelled"].map(X=>t.jsx("button",{onClick:()=>v(p.id,X),disabled:p.status===X,className:`py-2 px-3 rounded-xl font-bold text-xs uppercase transition-all ${p.status===X?"bg-brand-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:H(X)},X))})]}),t.jsx("button",{onClick:()=>m(null),className:"w-full py-3 bg-gray-100 text-gray-600 font-bold rounded-xl hover:bg-gray-200 transition-colors",children:"Fermer"})]})})]})}function rb(){var Z,me,oe,ue,L,P,U;const[i,u]=o.useState([]),[f,d]=o.useState(!0),[h,_]=o.useState(""),[b,z]=o.useState("all"),[p,m]=o.useState(null);o.useEffect(()=>{y()},[]);const y=async()=>{d(!0);const{data:F,error:Q}=await k.from("escrows").select("*, projects(*, profiles(*))").order("created_at",{ascending:!1});!Q&&F&&u(F),d(!1)},g=i.filter(F=>F.refund_status==="pending"),v=i.filter(F=>{var S,O,j,A;const Q=((O=(S=F.projects)==null?void 0:S.title)==null?void 0:O.toLowerCase().includes(h.toLowerCase()))||((A=(j=F.projects)==null?void 0:j.project_number)==null?void 0:A.toLowerCase().includes(h.toLowerCase())),T=b==="all"||F.status===b||b==="refund_pending"&&F.refund_status==="pending";return Q&&T}),N=i.filter(F=>F.status==="held").reduce((F,Q)=>F+(Q.total_amount||0),0),H=i.filter(F=>F.status==="released").reduce((F,Q)=>F+(Q.total_amount||0),0),ae=i.filter(F=>F.status==="released").reduce((F,Q)=>F+(Q.platform_commission||0),0),Y=async F=>{await k.from("escrows").update({status:"released"}).eq("id",F),y(),m(null)},X=async(F,Q)=>{i.find(S=>S.id===F)&&(await k.from("escrows").update({advance_paid:Q}).eq("id",F),y())},se=F=>({pending:"bg-yellow-100 text-yellow-700",held:"bg-blue-100 text-blue-700",advance_paid:"bg-purple-100 text-purple-700",released:"bg-green-100 text-green-700",refunded:"bg-red-100 text-red-700"})[F]||"bg-gray-100 text-gray-700",ie=F=>({pending:"En attente",held:"En garantie",advance_paid:"Avance verse",released:"Libr",refunded:"Rembours"})[F]||F;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-6 text-white",children:t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:t.jsx(At,{size:24})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white/70 text-sm font-medium",children:"Fonds en garantie"}),t.jsxs("p",{className:"text-2xl font-black",children:[N.toLocaleString()," FCFA"]})]})]})}),t.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-6 text-white",children:t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:t.jsx(Oe,{size:24})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white/70 text-sm font-medium",children:"Total libr"}),t.jsxs("p",{className:"text-2xl font-black",children:[H.toLocaleString()," FCFA"]})]})]})}),t.jsx("div",{className:"bg-gradient-to-br from-brand-500 to-brand-600 rounded-2xl p-6 text-white",children:t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:t.jsx(_s,{size:24})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white/70 text-sm font-medium",children:"Commissions gagnes"}),t.jsxs("p",{className:"text-2xl font-black",children:[ae.toLocaleString()," FCFA"]})]})]})})]}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(It,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),t.jsx("input",{type:"text",value:h,onChange:F=>_(F.target.value),placeholder:"Rechercher un projet...",className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:border-brand-500 focus:outline-none"})]}),t.jsxs("select",{value:b,onChange:F=>z(F.target.value),className:"px-4 py-3 bg-white border border-gray-200 rounded-xl focus:border-brand-500 focus:outline-none font-medium",children:[t.jsx("option",{value:"all",children:"Tous les statuts"}),t.jsx("option",{value:"pending",children:"En attente"}),t.jsx("option",{value:"held",children:"En garantie"}),t.jsx("option",{value:"advance_paid",children:"Avance verse"}),t.jsx("option",{value:"released",children:"Libr"}),t.jsx("option",{value:"refunded",children:"Rembours"}),t.jsxs("option",{value:"refund_pending",children:["Remboursements en attente (",g.length,")"]})]})]}),t.jsx("div",{className:"bg-white rounded-2xl shadow-sm border overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-6 py-4 text-xs font-black text-gray-500 uppercase tracking-widest",children:"Projet"}),t.jsx("th",{className:"text-left px-6 py-4 text-xs font-black text-gray-500 uppercase tracking-widest",children:"Montant"}),t.jsx("th",{className:"text-left px-6 py-4 text-xs font-black text-gray-500 uppercase tracking-widest",children:"Commission"}),t.jsx("th",{className:"text-left px-6 py-4 text-xs font-black text-gray-500 uppercase tracking-widest",children:"Statut"}),t.jsx("th",{className:"text-left px-6 py-4 text-xs font-black text-gray-500 uppercase tracking-widest",children:"Date"}),t.jsx("th",{className:"text-right px-6 py-4 text-xs font-black text-gray-500 uppercase tracking-widest",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-50",children:f?t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:t.jsx("div",{className:"w-8 h-8 border-2 border-brand-500 border-t-transparent rounded-full animate-spin mx-auto"})})}):v.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:"Aucun escrow trouv"})}):v.map(F=>{var Q,T,S,O,j;return t.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-gray-900",children:(Q=F.projects)==null?void 0:Q.title}),t.jsx("p",{className:"text-sm text-gray-500",children:(S=(T=F.projects)==null?void 0:T.profiles)==null?void 0:S.full_name})]})}),t.jsxs("td",{className:"px-6 py-4",children:[t.jsxs("p",{className:"font-black text-gray-900",children:[(O=F.total_amount)==null?void 0:O.toLocaleString()," FCFA"]}),F.advance_paid>0&&t.jsxs("p",{className:"text-xs text-purple-600 font-bold",children:["Avance: ",F.advance_paid.toLocaleString()," FCFA"]})]}),t.jsxs("td",{className:"px-6 py-4",children:[t.jsxs("p",{className:"font-bold text-brand-600",children:[(j=F.platform_commission)==null?void 0:j.toLocaleString()," FCFA"]}),t.jsxs("p",{className:"text-xs text-gray-400",children:["(",Math.round(F.platform_commission/F.total_amount*100),"%)"]})]}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-black uppercase tracking-wider ${se(F.status)}`,children:ie(F.status)}),F.refund_status==="pending"&&t.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-bold bg-red-100 text-red-700",children:"Remboursement demand"})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("p",{className:"text-sm text-gray-500",children:new Date(F.created_at).toLocaleDateString("fr-FR")})}),t.jsx("td",{className:"px-6 py-4 text-right",children:t.jsx("button",{onClick:()=>m(F),className:"px-4 py-2 bg-brand-50 text-brand-600 font-bold text-sm rounded-lg hover:bg-brand-100 transition-colors",children:"Grer"})})]},F.id)})})]})}),p&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-6",children:t.jsxs("div",{className:"bg-white rounded-2xl max-w-lg w-full p-6 shadow-2xl",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("span",{className:`inline-block px-3 py-1 rounded-lg text-xs font-black uppercase tracking-wider mb-3 ${se(p.status)}`,children:ie(p.status)}),t.jsx("h3",{className:"text-xl font-black text-gray-900",children:(Z=p.projects)==null?void 0:Z.title}),t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Client: ",(oe=(me=p.projects)==null?void 0:me.profiles)==null?void 0:oe.full_name]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 space-y-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"Montant total"}),t.jsxs("span",{className:"font-black text-gray-900",children:[(ue=p.total_amount)==null?void 0:ue.toLocaleString()," FCFA"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{className:"text-gray-500",children:["Commission (",Math.round(p.platform_commission/p.total_amount*100),"%)"]}),t.jsxs("span",{className:"font-bold text-brand-600",children:[(L=p.platform_commission)==null?void 0:L.toLocaleString()," FCFA"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-500",children:"Paiement artisan"}),t.jsxs("span",{className:"font-bold text-green-600",children:[(P=p.artisan_payout)==null?void 0:P.toLocaleString()," FCFA"]})]}),p.advance_paid>0&&t.jsxs("div",{className:"flex justify-between pt-2 border-t",children:[t.jsx("span",{className:"text-gray-500",children:"Avance verse"}),t.jsxs("span",{className:"font-bold text-purple-600",children:[p.advance_paid.toLocaleString()," FCFA"]})]})]}),p.status==="held"&&t.jsxs("div",{className:"space-y-3 mb-6",children:[t.jsx("p",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Actions disponibles"}),p.advance_paid===0&&t.jsxs("button",{onClick:()=>X(p.id,p.total_amount*.4),className:"w-full flex items-center justify-between p-4 bg-purple-50 text-purple-700 rounded-xl hover:bg-purple-100 transition-colors",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-bold",children:"Verser l'avance (40%)"}),t.jsxs("p",{className:"text-sm text-purple-500",children:[Math.round(p.total_amount*.4).toLocaleString()," FCFA"]})]}),t.jsx(w0,{size:20})]}),t.jsxs("button",{onClick:()=>Y(p.id),className:"w-full flex items-center justify-between p-4 bg-green-50 text-green-700 rounded-xl hover:bg-green-100 transition-colors",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-bold",children:"Librer le paiement complet"}),t.jsxs("p",{className:"text-sm text-green-500",children:[(U=p.artisan_payout)==null?void 0:U.toLocaleString()," FCFA  l'artisan"]})]}),t.jsx(Oe,{size:20})]})]}),p.refund_status==="approved"&&t.jsxs("div",{className:"p-4 bg-green-50 rounded-xl mb-6 flex items-center gap-3",children:[t.jsx(Oe,{className:"text-green-500",size:24}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-green-700",children:"Remboursement approuv"}),t.jsx("p",{className:"text-sm text-green-600",children:"Le remboursement a t trait"})]})]}),p.refund_status==="rejected"&&p.refund_notes&&t.jsxs("div",{className:"p-4 bg-red-50 rounded-xl mb-6 flex items-start gap-3",children:[t.jsx(at,{className:"text-red-500 mt-0.5",size:24}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-red-700",children:"Remboursement refus"}),t.jsxs("p",{className:"text-sm text-red-600 mt-1",children:["Raison: ",p.refund_notes]})]})]}),p.status==="released"&&!p.refund_status&&t.jsxs("div",{className:"p-4 bg-green-50 rounded-xl mb-6 flex items-center gap-3",children:[t.jsx(Oe,{className:"text-green-500",size:24}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-green-700",children:"Paiement libr"}),t.jsx("p",{className:"text-sm text-green-600",children:"L'artisan a reu son paiement"})]})]}),t.jsx("button",{onClick:()=>m(null),className:"w-full py-3 bg-gray-100 text-gray-600 font-bold rounded-xl hover:bg-gray-200 transition-colors",children:"Fermer"})]})})]})}function ib(){var me,oe,ue,L,P,U,F,Q;const[i,u]=o.useState([]),[f,d]=o.useState(!0),[h,_]=o.useState(""),[b,z]=o.useState("pending"),[p,m]=o.useState(null),[y,g]=o.useState(null),[v,N]=o.useState("");o.useEffect(()=>{H()},[]);const H=async()=>{d(!0);const{data:T,error:S}=await k.from("artisans").select(`
        id, is_verified, verification_status, certification_number, experience_years, created_at,
        profiles!artisans_id_fkey (
          id, full_name, email, phone, location, avatar_url, specialty, bio,
          categories (name)
        )
      `).order("created_at",{ascending:!1});if(S){console.error("Error fetching artisans:",S),d(!1);return}const{data:O}=await k.from("verification_documents").select("*"),j=(T==null?void 0:T.map(A=>{var K;const B=O==null?void 0:O.find(ge=>ge.artisan_id===A.id);return{id:A.id,user_id:A.id,is_verified:A.is_verified||!1,verification_status:A.verification_status||"unverified",certification_number:A.certification_number||null,experience_years:A.experience_years||null,created_at:A.created_at,verification_documents:B||null,profiles:A.profiles,categories:((K=A.profiles)==null?void 0:K.categories)||null}}))||[];u(j),d(!1)},ae=i.filter(T=>{var j,A,B,K;const S=((A=(j=T.profiles)==null?void 0:j.full_name)==null?void 0:A.toLowerCase().includes(h.toLowerCase()))||((K=(B=T.profiles)==null?void 0:B.email)==null?void 0:K.toLowerCase().includes(h.toLowerCase())),O=b==="all"||b==="verified"&&T.verification_status==="verified"||b==="pending"&&T.verification_status==="pending"||b==="unverified"&&T.verification_status==="unverified";return S&&O}),Y=i.filter(T=>T.verification_status==="pending").length,X=i.filter(T=>T.verification_status==="verified").length,se=i.filter(T=>T.verification_status==="unverified").length,ie=async T=>{try{await k.from("artisans").update({is_verified:!0,verification_status:"verified",can_receive_advance:!0,updated_at:new Date().toISOString()}).eq("id",T),await k.from("verification_documents").update({status:"approved"}).eq("artisan_id",T),await k.from("notifications").insert({user_id:T,type:"verification_approved",title:"Flicitations ! Vous tes certifi",message:"Votre compte a t vrifi. Vous bnficiez maintenant du badge certifi et pouvez recevoir des avances sur paiement.",data:{}}),H(),m(null)}catch(S){console.error("Error verifying artisan:",S)}},Z=async T=>{try{await k.from("artisans").update({is_verified:!1,verification_status:"rejected",updated_at:new Date().toISOString()}).eq("id",T),await k.from("verification_documents").update({status:"rejected",rejection_reason:v||"Documents non conformes"}).eq("artisan_id",T),await k.from("notifications").insert({user_id:T,type:"verification_rejected",title:"Vrification refuse",message:v||"Vos documents n'ont pas pu tre valids. Veuillez soumettre de nouveaux documents.",data:{}}),H(),m(null),N("")}catch(S){console.error("Error rejecting artisan:",S)}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsx("button",{onClick:()=>z("all"),className:`p-5 rounded-2xl border transition-all ${b==="all"?"border-brand-500 bg-brand-50":"border-gray-100 bg-white hover:border-gray-200"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center",children:t.jsx(tt,{size:20,className:"text-gray-600"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"text-2xl font-black text-gray-900",children:i.length}),t.jsx("p",{className:"text-xs font-bold text-gray-500",children:"Total"})]})]})}),t.jsxs("button",{onClick:()=>z("pending"),className:`p-5 rounded-2xl border transition-all relative ${b==="pending"?"border-brand-500 bg-brand-50":"border-gray-100 bg-white hover:border-gray-200"}`,children:[Y>0&&t.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white text-xs font-bold",children:Y})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-xl flex items-center justify-center",children:t.jsx(St,{size:20,className:"text-yellow-600"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"text-2xl font-black text-gray-900",children:Y}),t.jsx("p",{className:"text-xs font-bold text-gray-500",children:"En attente"})]})]})]}),t.jsx("button",{onClick:()=>z("verified"),className:`p-5 rounded-2xl border transition-all ${b==="verified"?"border-brand-500 bg-brand-50":"border-gray-100 bg-white hover:border-gray-200"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:t.jsx(At,{size:20,className:"text-green-600"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"text-2xl font-black text-gray-900",children:X}),t.jsx("p",{className:"text-xs font-bold text-gray-500",children:"Certifis"})]})]})}),t.jsx("button",{onClick:()=>z("unverified"),className:`p-5 rounded-2xl border transition-all ${b==="unverified"?"border-brand-500 bg-brand-50":"border-gray-100 bg-white hover:border-gray-200"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center",children:t.jsx(tt,{size:20,className:"text-gray-400"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"text-2xl font-black text-gray-900",children:se}),t.jsx("p",{className:"text-xs font-bold text-gray-500",children:"Non vrifis"})]})]})})]}),t.jsxs("div",{className:"relative",children:[t.jsx(It,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),t.jsx("input",{type:"text",value:h,onChange:T=>_(T.target.value),placeholder:"Rechercher un artisan...",className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:border-brand-500 focus:outline-none"})]}),t.jsx("div",{className:"bg-white rounded-2xl shadow-sm border overflow-hidden",children:t.jsx("div",{className:"divide-y divide-gray-50",children:f?t.jsx("div",{className:"px-6 py-12 text-center text-gray-400",children:t.jsx("div",{className:"w-8 h-8 border-2 border-brand-500 border-t-transparent rounded-full animate-spin mx-auto"})}):ae.length===0?t.jsx("div",{className:"px-6 py-12 text-center text-gray-400",children:b==="pending"?"Aucune vrification en attente":"Aucun artisan trouv"}):ae.map(T=>{var j,A,B,K,ge,de;const S=T.verification_documents!==null,O={verified:{label:"Certifi",color:"bg-green-100 text-green-700"},pending:{label:"En attente",color:"bg-yellow-100 text-yellow-700"},rejected:{label:"Refus",color:"bg-red-100 text-red-700"},unverified:{label:"Non vrifi",color:"bg-gray-100 text-gray-500"}}[T.verification_status]||{label:"Inconnu",color:"bg-gray-100 text-gray-500"};return t.jsx("div",{className:`p-6 hover:bg-gray-50 transition-colors cursor-pointer ${T.verification_status==="pending"?"bg-yellow-50/50":""}`,onClick:()=>m(T),children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"w-14 h-14 rounded-full bg-brand-100 flex items-center justify-center overflow-hidden relative",children:[(j=T.profiles)!=null&&j.avatar_url?t.jsx("img",{src:T.profiles.avatar_url,alt:"",className:"w-full h-full object-cover"}):t.jsx(tt,{size:24,className:"text-brand-600"}),T.verification_status==="verified"&&t.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center border-2 border-white",children:t.jsx(Oe,{size:12,className:"text-white"})})]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[t.jsx("h4",{className:"font-bold text-gray-900",children:(A=T.profiles)==null?void 0:A.full_name}),t.jsx("span",{className:`px-2 py-0.5 text-[10px] font-black rounded-full uppercase ${O.color}`,children:O.label}),S&&T.verification_status==="pending"&&t.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-[10px] font-black rounded-full uppercase flex items-center gap-1",children:[t.jsx(zt,{size:10}),"Documents soumis"]})]}),t.jsx("p",{className:"text-sm text-gray-500",children:((B=T.categories)==null?void 0:B.name)||((K=T.profiles)==null?void 0:K.specialty)||"Non spcifi"}),t.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-400",children:[((ge=T.profiles)==null?void 0:ge.location)&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Gt,{size:12}),T.profiles.location]}),((de=T.profiles)==null?void 0:de.phone)&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Hn,{size:12}),T.profiles.phone]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-xs text-gray-400",children:["Inscrit le ",new Date(T.created_at).toLocaleDateString("fr-FR")]}),S&&t.jsx("p",{className:"text-xs text-blue-500 font-bold mt-1",children:"Voir les documents "})]})]})},T.user_id)})})}),p&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full shadow-2xl max-h-[90vh] overflow-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white border-b p-4 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-14 h-14 rounded-full bg-brand-100 flex items-center justify-center overflow-hidden relative",children:(me=p.profiles)!=null&&me.avatar_url?t.jsx("img",{src:p.profiles.avatar_url,alt:"",className:"w-full h-full object-cover"}):t.jsx(tt,{size:28,className:"text-brand-600"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-black text-gray-900",children:(oe=p.profiles)==null?void 0:oe.full_name}),t.jsx("p",{className:"text-sm text-gray-500",children:(ue=p.profiles)==null?void 0:ue.email})]})]}),t.jsx("button",{onClick:()=>m(null),className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-500 hover:bg-gray-200",children:t.jsx(at,{size:20})})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx("div",{className:"flex items-center gap-2",children:p.verification_status==="verified"?t.jsxs("span",{className:"inline-flex items-center gap-1 px-4 py-2 bg-green-100 text-green-700 text-sm font-black rounded-full",children:[t.jsx(At,{size:16})," Certifi"]}):p.verification_status==="pending"?t.jsxs("span",{className:"inline-flex items-center gap-1 px-4 py-2 bg-yellow-100 text-yellow-700 text-sm font-black rounded-full",children:[t.jsx(St,{size:16})," En attente de vrification"]}):p.verification_status==="rejected"?t.jsxs("span",{className:"inline-flex items-center gap-1 px-4 py-2 bg-red-100 text-red-700 text-sm font-black rounded-full",children:[t.jsx(hi,{size:16})," Refus"]}):t.jsxs("span",{className:"inline-flex items-center gap-1 px-4 py-2 bg-gray-100 text-gray-600 text-sm font-black rounded-full",children:[t.jsx(tt,{size:16})," Non vrifi"]})}),t.jsx("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(wt,{size:18,className:"text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400 uppercase",children:"Mtier"}),t.jsx("p",{className:"font-bold text-gray-900",children:((L=p.categories)==null?void 0:L.name)||"Non spcifi"})]})]}),((P=p.profiles)==null?void 0:P.location)&&t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Gt,{size:18,className:"text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400 uppercase",children:"Localisation"}),t.jsx("p",{className:"font-bold text-gray-900",children:p.profiles.location})]})]}),((U=p.profiles)==null?void 0:U.phone)&&t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Hn,{size:18,className:"text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400 uppercase",children:"Tlphone"}),t.jsx("p",{className:"font-bold text-gray-900",children:p.profiles.phone})]})]})]})}),p.verification_documents?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h4",{className:"font-black text-gray-900 uppercase text-xs tracking-widest flex items-center gap-2",children:[t.jsx(zt,{size:14}),"Documents soumis"]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.verification_documents.selfie_url&&t.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-gray-700",children:[t.jsx(bi,{size:16,className:"text-blue-500"}),"Photo (Selfie)"]}),t.jsxs("button",{onClick:()=>g(p.verification_documents.selfie_url),className:"relative w-full aspect-square rounded-lg overflow-hidden bg-gray-100 hover:opacity-90 transition-opacity",children:[t.jsx("img",{src:p.verification_documents.selfie_url,alt:"Selfie",className:"w-full h-full object-cover"}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/0 hover:bg-black/20 transition-colors",children:t.jsx(mi,{size:24,className:"text-white opacity-0 hover:opacity-100"})})]})]}),p.verification_documents.id_card_url&&t.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-gray-700",children:[t.jsx(Wa,{size:16,className:"text-purple-500"}),"Pice d'identit (",((F=p.verification_documents.id_card_type)==null?void 0:F.toUpperCase())||"CNI",")"]}),t.jsx("button",{onClick:()=>g(p.verification_documents.id_card_url),className:"relative w-full aspect-video rounded-lg overflow-hidden bg-gray-100 hover:opacity-90 transition-opacity",children:t.jsx("img",{src:p.verification_documents.id_card_url,alt:"ID Card",className:"w-full h-full object-cover"})})]}),p.verification_documents.ninea_url&&t.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-gray-700",children:[t.jsx(zt,{size:16,className:"text-green-500"}),"NINEA",p.verification_documents.ninea_number&&t.jsxs("span",{className:"text-xs text-gray-400 font-mono",children:["(",p.verification_documents.ninea_number,")"]})]}),t.jsx("button",{onClick:()=>g(p.verification_documents.ninea_url),className:"relative w-full aspect-video rounded-lg overflow-hidden bg-gray-100 hover:opacity-90 transition-opacity",children:t.jsx("img",{src:p.verification_documents.ninea_url,alt:"NINEA",className:"w-full h-full object-cover"})})]}),p.verification_documents.registre_commerce_url&&t.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-gray-700",children:[t.jsx(Bn,{size:16,className:"text-orange-500"}),"Registre Commerce",p.verification_documents.registre_commerce_number&&t.jsxs("span",{className:"text-xs text-gray-400 font-mono",children:["(",p.verification_documents.registre_commerce_number,")"]})]}),t.jsx("button",{onClick:()=>g(p.verification_documents.registre_commerce_url),className:"relative w-full aspect-video rounded-lg overflow-hidden bg-gray-100 hover:opacity-90 transition-opacity",children:t.jsx("img",{src:p.verification_documents.registre_commerce_url,alt:"RC",className:"w-full h-full object-cover"})})]})]})]}):t.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 text-center",children:[t.jsx(zt,{size:32,className:"mx-auto text-gray-300 mb-2"}),t.jsx("p",{className:"text-gray-500 font-medium",children:"Aucun document soumis"}),t.jsx("p",{className:"text-xs text-gray-400",children:"L'artisan n'a pas encore envoy de demande de vrification"})]}),p.verification_status==="pending"&&p.verification_documents&&t.jsxs("div",{className:"space-y-4 border-t pt-6",children:[t.jsx("h4",{className:"font-black text-gray-900 uppercase text-xs tracking-widest",children:"Actions de vrification"}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Raison du refus (si applicable)"}),t.jsx("input",{type:"text",value:v,onChange:T=>N(T.target.value),placeholder:"Ex: Photo floue, document expir...",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-brand-500 focus:outline-none"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("button",{onClick:()=>ie(p.user_id),className:"flex items-center justify-center gap-2 py-4 bg-green-500 text-white font-bold rounded-xl hover:bg-green-600 transition-colors",children:[t.jsx(Oe,{size:20}),"Approuver"]}),t.jsxs("button",{onClick:()=>Z(p.user_id),className:"flex items-center justify-center gap-2 py-4 bg-red-500 text-white font-bold rounded-xl hover:bg-red-600 transition-colors",children:[t.jsx(hi,{size:20}),"Rejeter"]})]})]}),p.verification_status==="verified"&&t.jsxs("div",{className:"p-4 bg-green-50 rounded-xl flex items-center gap-3",children:[t.jsx(At,{className:"text-green-500",size:24}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-green-700",children:"Artisan certifi"}),t.jsx("p",{className:"text-sm text-green-600",children:"Ce professionnel bnficie du badge certifi et des avantages associs."})]})]}),p.verification_status==="rejected"&&((Q=p.verification_documents)==null?void 0:Q.rejection_reason)&&t.jsxs("div",{className:"p-4 bg-red-50 rounded-xl",children:[t.jsx("p",{className:"font-bold text-red-700 text-sm mb-1",children:"Raison du refus"}),t.jsx("p",{className:"text-red-600",children:p.verification_documents.rejection_reason})]})]})]})}),y&&t.jsxs("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[60] p-4",children:[t.jsx("button",{onClick:()=>g(null),className:"absolute top-4 right-4 w-12 h-12 bg-white/10 rounded-full flex items-center justify-center text-white hover:bg-white/20",children:t.jsx(at,{size:24})}),t.jsx("img",{src:y,alt:"Preview",className:"max-w-full max-h-[90vh] object-contain rounded-lg"})]})]})}function cb(){var Z,me,oe,ue,L,P,U,F,Q,T;const{error:i}=Da(),[u,f]=o.useState([]),[d,h]=o.useState(!0),[_,b]=o.useState(null),[z,p]=o.useState("pay_artisan"),[m,y]=o.useState(50),[g,v]=o.useState(""),[N,H]=o.useState(!1),[ae,Y]=o.useState("");o.useEffect(()=>{X()},[]);const X=async()=>{h(!0);const{data:S,error:O}=await k.from("projects").select(`
        id, title, project_number, status, created_at, location,
        categories (name),
        profiles!projects_client_id_fkey (id, full_name, email, phone, avatar_url)
      `).eq("status","disputed").order("created_at",{ascending:!1});if(O){console.error("Error fetching disputes:",O),h(!1);return}const j=await Promise.all((S||[]).map(async A=>{const{data:B}=await k.from("quotes").select(`
            artisan_id,
            profiles!quotes_artisan_id_fkey (id, full_name, email, phone, avatar_url)
          `).eq("project_id",A.id).eq("status","accepted").single(),{data:K}=await k.from("escrows").select("*").eq("project_id",A.id).single();return{id:A.id,title:A.title,project_number:A.project_number,status:A.status,created_at:A.created_at,location:A.location,client:A.profiles,artisan:(B==null?void 0:B.profiles)||null,escrow:K,category:A.categories}}));f(j),h(!1)},se=async()=>{var S,O;if(!(!_||!_.escrow)){H(!0);try{const j=_.escrow;let A=0,B=0,K="completed";switch(z){case"refund_client":A=j.total_amount,B=0,K="refunded";break;case"pay_artisan":A=0,B=j.artisan_payout,K="completed";break;case"split":const ge=j.total_amount*(m/100);A=ge,B=j.total_amount-ge-j.commission_amount,K="completed";break}await k.from("escrows").update({status:K,updated_at:new Date().toISOString()}).eq("id",j.id),await k.from("projects").update({status:"completed",updated_at:new Date().toISOString()}).eq("id",_.id),await k.from("notifications").insert({user_id:(S=_.client)==null?void 0:S.id,type:"system",title:"Litige rsolu",message:g||`Le litige pour "${_.title}" a t rsolu.`+(A>0?` Remboursement: ${A.toLocaleString("fr-FR")} FCFA.`:""),data:{project_id:_.id}}),(O=_.artisan)!=null&&O.id&&await k.from("notifications").insert({user_id:_.artisan.id,type:"system",title:"Litige rsolu",message:g||`Le litige pour "${_.title}" a t rsolu.`+(B>0?` Paiement: ${B.toLocaleString("fr-FR")} FCFA.`:""),data:{project_id:_.id}}),X(),b(null),v("")}catch(j){console.error("Error resolving dispute:",j),i("Erreur lors de la rsolution du litige")}H(!1)}},ie=u.filter(S=>{var O,j,A,B,K;return S.title.toLowerCase().includes(ae.toLowerCase())||((O=S.project_number)==null?void 0:O.toLowerCase().includes(ae.toLowerCase()))||((A=(j=S.client)==null?void 0:j.full_name)==null?void 0:A.toLowerCase().includes(ae.toLowerCase()))||((K=(B=S.artisan)==null?void 0:B.full_name)==null?void 0:K.toLowerCase().includes(ae.toLowerCase()))});return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx("div",{className:"bg-red-50 border border-red-100 rounded-2xl p-6",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center",children:t.jsx(Tt,{size:24,className:"text-red-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-3xl font-black text-red-700",children:u.length}),t.jsx("p",{className:"text-sm font-bold text-red-600",children:"Litiges en cours"})]})]})}),t.jsx("div",{className:"bg-yellow-50 border border-yellow-100 rounded-2xl p-6",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center",children:t.jsx(Wa,{size:24,className:"text-yellow-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-3xl font-black text-yellow-700",children:u.reduce((S,O)=>{var j;return S+(((j=O.escrow)==null?void 0:j.total_amount)||0)},0).toLocaleString("fr-FR")}),t.jsx("p",{className:"text-sm font-bold text-yellow-600",children:"FCFA bloqus"})]})]})}),t.jsx("div",{className:"bg-blue-50 border border-blue-100 rounded-2xl p-6",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:t.jsx(St,{size:24,className:"text-blue-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-3xl font-black text-blue-700",children:u.length>0?Math.floor((Date.now()-new Date(((Z=u[u.length-1])==null?void 0:Z.created_at)||Date.now()).getTime())/(1e3*60*60*24)):0}),t.jsx("p",{className:"text-sm font-bold text-blue-600",children:"Jours (plus ancien)"})]})]})})]}),t.jsxs("div",{className:"relative",children:[t.jsx(It,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),t.jsx("input",{type:"text",value:ae,onChange:S=>Y(S.target.value),placeholder:"Rechercher par projet, client ou artisan...",className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:border-brand-500 focus:outline-none"})]}),t.jsx("div",{className:"bg-white rounded-2xl shadow-sm border overflow-hidden",children:d?t.jsx("div",{className:"px-6 py-12 text-center",children:t.jsx(ca,{size:32,className:"text-brand-500 animate-spin mx-auto"})}):ie.length===0?t.jsxs("div",{className:"px-6 py-12 text-center",children:[t.jsx(Tt,{size:48,className:"text-gray-200 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500 font-medium",children:"Aucun litige en cours"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Tous les projets se passent bien !"})]}):t.jsx("div",{className:"divide-y divide-gray-50",children:ie.map(S=>{var O,j,A,B;return t.jsx("div",{className:"p-6 hover:bg-red-50/30 transition-colors cursor-pointer",onClick:()=>b(S),children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center flex-shrink-0",children:t.jsx(Tt,{size:24,className:"text-red-600"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-gray-900 mb-1",children:S.title}),t.jsx("p",{className:"text-xs text-gray-400 font-mono",children:S.project_number})]}),t.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 text-xs font-bold rounded-full",children:"En litige"})]}),t.jsxs("div",{className:"mt-3 flex items-center gap-6 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden",children:(O=S.client)!=null&&O.avatar_url?t.jsx("img",{src:S.client.avatar_url,alt:"",className:"w-full h-full object-cover"}):t.jsx(tt,{size:12,className:"text-gray-400"})}),t.jsx("span",{className:"text-gray-600",children:((j=S.client)==null?void 0:j.full_name)||"Client"})]}),t.jsx(Ys,{size:14,className:"text-gray-300"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden",children:(A=S.artisan)!=null&&A.avatar_url?t.jsx("img",{src:S.artisan.avatar_url,alt:"",className:"w-full h-full object-cover"}):t.jsx(tt,{size:12,className:"text-gray-400"})}),t.jsx("span",{className:"text-gray-600",children:((B=S.artisan)==null?void 0:B.full_name)||"Artisan"})]})]}),S.escrow&&t.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[t.jsxs("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-700 text-xs font-bold rounded-full flex items-center gap-1",children:[t.jsx(_s,{size:12}),S.escrow.total_amount.toLocaleString("fr-FR")," FCFA bloqus"]}),t.jsxs("span",{className:"text-xs text-gray-400",children:["Depuis ",new Date(S.created_at).toLocaleDateString("fr-FR")]})]})]}),t.jsx(Zs,{size:20,className:"text-gray-300"})]})},S.id)})})}),_&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full shadow-2xl max-h-[90vh] overflow-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white border-b p-4 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-black text-gray-900",children:"Rsolution du litige"}),t.jsx("p",{className:"text-sm text-gray-500",children:_.project_number})]}),t.jsx("button",{onClick:()=>b(null),className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-500 hover:bg-gray-200",children:t.jsx(at,{size:20})})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[t.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:_.title}),t.jsxs("p",{className:"text-sm text-gray-500",children:[(me=_.category)==null?void 0:me.name,"  ",_.location]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-blue-50 rounded-xl p-4",children:[t.jsx("p",{className:"text-xs font-bold text-blue-600 uppercase mb-3",children:"Client"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center overflow-hidden",children:(oe=_.client)!=null&&oe.avatar_url?t.jsx("img",{src:_.client.avatar_url,alt:"",className:"w-full h-full object-cover"}):t.jsx(tt,{size:20,className:"text-blue-500"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-gray-900",children:(ue=_.client)==null?void 0:ue.full_name}),t.jsx("p",{className:"text-xs text-gray-500",children:(L=_.client)==null?void 0:L.phone})]})]})]}),t.jsxs("div",{className:"bg-orange-50 rounded-xl p-4",children:[t.jsx("p",{className:"text-xs font-bold text-orange-600 uppercase mb-3",children:"Artisan"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center overflow-hidden",children:(P=_.artisan)!=null&&P.avatar_url?t.jsx("img",{src:_.artisan.avatar_url,alt:"",className:"w-full h-full object-cover"}):t.jsx(tt,{size:20,className:"text-orange-500"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-gray-900",children:(U=_.artisan)==null?void 0:U.full_name}),t.jsx("p",{className:"text-xs text-gray-500",children:(F=_.artisan)==null?void 0:F.phone})]})]})]})]}),_.escrow&&t.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4",children:[t.jsx("p",{className:"text-xs font-bold text-yellow-700 uppercase mb-3",children:"Fonds bloqus"}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-black text-yellow-700",children:_.escrow.total_amount.toLocaleString("fr-FR")}),t.jsx("p",{className:"text-xs text-yellow-600",children:"Total FCFA"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-black text-gray-600",children:((Q=_.escrow.commission_amount)==null?void 0:Q.toLocaleString("fr-FR"))||"0"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Commission"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-black text-green-600",children:((T=_.escrow.artisan_payout)==null?void 0:T.toLocaleString("fr-FR"))||"0"}),t.jsx("p",{className:"text-xs text-green-600",children:"Part artisan"})]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase",children:"Dcision"}),t.jsxs("label",{className:`block p-4 rounded-xl border-2 cursor-pointer transition-all ${z==="refund_client"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[t.jsx("input",{type:"radio",name:"resolution",value:"refund_client",checked:z==="refund_client",onChange:()=>p("refund_client"),className:"sr-only"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${z==="refund_client"?"bg-blue-500 text-white":"bg-gray-100 text-gray-400"}`,children:t.jsx(Ys,{size:20,className:"rotate-180"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-gray-900",children:"Rembourser le client"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Le client rcupre 100% des fonds"})]})]})]}),t.jsxs("label",{className:`block p-4 rounded-xl border-2 cursor-pointer transition-all ${z==="pay_artisan"?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:[t.jsx("input",{type:"radio",name:"resolution",value:"pay_artisan",checked:z==="pay_artisan",onChange:()=>p("pay_artisan"),className:"sr-only"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${z==="pay_artisan"?"bg-green-500 text-white":"bg-gray-100 text-gray-400"}`,children:t.jsx(Ys,{size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-gray-900",children:"Payer l'artisan"}),t.jsx("p",{className:"text-xs text-gray-500",children:"L'artisan reoit son paiement normal"})]})]})]}),t.jsxs("label",{className:`block p-4 rounded-xl border-2 cursor-pointer transition-all ${z==="split"?"border-yellow-500 bg-yellow-50":"border-gray-200 hover:border-gray-300"}`,children:[t.jsx("input",{type:"radio",name:"resolution",value:"split",checked:z==="split",onChange:()=>p("split"),className:"sr-only"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${z==="split"?"bg-yellow-500 text-white":"bg-gray-100 text-gray-400"}`,children:t.jsx(_s,{size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-gray-900",children:"Partager les fonds"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Rpartition personnalise"})]})]})]}),z==="split"&&t.jsx("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-bold text-gray-700",children:"% pour le client"}),t.jsx("input",{type:"range",min:"0",max:"100",value:m,onChange:S=>y(Number(S.target.value)),className:"w-full mt-2"}),t.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[t.jsxs("span",{children:["Client: ",m,"%"]}),t.jsxs("span",{children:["Artisan: ",100-m,"%"]})]})]})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Note de rsolution (envoye aux deux parties)"}),t.jsx("textarea",{value:g,onChange:S=>v(S.target.value),placeholder:"Expliquez la dcision...",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-brand-500 focus:outline-none min-h-24"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>b(null),className:"flex-1 py-4 bg-gray-100 text-gray-600 font-bold rounded-xl hover:bg-gray-200 transition-colors",children:"Annuler"}),t.jsx("button",{onClick:se,disabled:N,className:"flex-1 py-4 bg-brand-500 text-white font-bold rounded-xl hover:bg-brand-600 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:N?t.jsx(ca,{size:20,className:"animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx(Oe,{size:20}),"Rsoudre le litige"]})})]})]})]})})]})}function ob(){const i=bt();return fi.useEffect(()=>{console.warn("404 - Route non trouve:",window.location.pathname)},[]),t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:t.jsxs("div",{className:"text-center max-w-md",children:[t.jsx("div",{className:"mb-6",children:t.jsx("div",{className:"w-24 h-24 bg-brand-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("span",{className:"text-4xl font-black text-brand-600",children:"404"})})}),t.jsx("h1",{className:"text-2xl font-black text-gray-900 mb-2",children:"Page non trouve"}),t.jsx("p",{className:"text-gray-600 mb-8",children:"La page que vous cherchez n'existe pas ou a t dplace."}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[t.jsx("button",{onClick:()=>i("/"),className:"px-6 py-3 bg-brand-500 text-white rounded-xl font-bold hover:bg-brand-600 transition-colors",children:"Retour  l'accueil"}),t.jsx("button",{onClick:()=>i(-1),className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-bold hover:bg-gray-300 transition-colors",children:"Page prcdente"})]})]})})}function db(){const{toasts:i,removeToast:u}=Da();return t.jsxs(t.Fragment,{children:[t.jsx(lp,{}),t.jsx(sp,{}),t.jsxs(nh,{children:[t.jsx(ot,{path:"/",element:t.jsx(ip,{})}),t.jsx(ot,{path:"/about",element:t.jsx(ab,{})}),t.jsx(ot,{path:"/onboard",element:t.jsx(xp,{})}),t.jsx(ot,{path:"/artisans",element:t.jsx(mp,{})}),t.jsx(ot,{path:"/artisans/:id",element:t.jsx(eb,{})}),t.jsx(ot,{path:"/favorites",element:t.jsx(tb,{})}),t.jsx(ot,{path:"/category/:slug",element:t.jsx(fp,{})}),t.jsx(ot,{path:"/dashboard",element:t.jsx(_a,{children:t.jsx(Kp,{})})}),t.jsx(ot,{path:"/create-project",element:t.jsx(_a,{children:t.jsx(_p,{})})}),t.jsx(ot,{path:"/projects/:id",element:t.jsx(_a,{children:t.jsx(Op,{})})}),t.jsx(ot,{path:"/projects/:id/payment",element:t.jsx(_a,{children:t.jsx(Bp,{})})}),t.jsx(ot,{path:"/projects/:id/work",element:t.jsx(_a,{children:t.jsx(Vp,{})})}),t.jsx(ot,{path:"/projects/:id/completion",element:t.jsx(_a,{children:t.jsx(Hp,{})})}),t.jsx(ot,{path:"/chat/:projectId",element:t.jsx(_a,{children:t.jsx(Fp,{})})}),t.jsx(ot,{path:"/verification",element:t.jsx(_a,{children:t.jsx($p,{})})}),t.jsx(ot,{path:"/edit-profile",element:t.jsx(_a,{children:t.jsx(Pp,{})})}),t.jsx(ot,{path:"/expenses",element:t.jsx(_a,{children:t.jsx(Wp,{})})}),t.jsx(ot,{path:"/invoices",element:t.jsx(_a,{children:t.jsx(Ip,{})})}),t.jsx(ot,{path:"/admin",element:t.jsx(Ll,{children:t.jsx(sb,{})})}),t.jsx(ot,{path:"/admin/users",element:t.jsx(Ll,{children:t.jsx(lb,{})})}),t.jsx(ot,{path:"/admin/projects",element:t.jsx(Ll,{children:t.jsx(nb,{})})}),t.jsx(ot,{path:"/admin/escrows",element:t.jsx(Ll,{children:t.jsx(rb,{})})}),t.jsx(ot,{path:"/admin/verifications",element:t.jsx(Ll,{children:t.jsx(ib,{})})}),t.jsx(ot,{path:"/admin/disputes",element:t.jsx(Ll,{children:t.jsx(cb,{})})}),t.jsx(ot,{path:"*",element:t.jsx(ob,{})})]}),t.jsx(ap,{toasts:i,onRemove:u})]})}function ub(){return t.jsx(db,{})}"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");fh.createRoot(document.getElementById("root")).render(t.jsx(fi.StrictMode,{children:t.jsx(rh,{children:t.jsx(gh,{children:t.jsx(ub,{})})})}));export{B0 as _};
